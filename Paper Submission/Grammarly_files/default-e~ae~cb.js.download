"use strict";(self.webpackChunk_grammarly_denali_app=self.webpackChunk_grammarly_denali_app||[]).push([[7961,2350],{1808:(e,t,i)=>{i.d(t,{$n:()=>b,Ch:()=>y,LO:()=>S,aT:()=>k,oo:()=>v,z9:()=>x,HC:()=>C});var r=i(10334),n=i(17171),s=i(69384),a=i(50659),o=i(80074),l=i(87574),c=i(19840),d=i(62723),m=i(7813),p=i(22835),h=i(93712),u=i(22409);const g=JSON.parse('{"clearfix":"_de888339-button-clearfix","button":"_d86f7794-button-button","inline":"_f8f10003-button-inline","red":"_78aa7372-button-red","blue":"_e90c689b-button-blue","buttonSpinner":"_62c49ae1-button-buttonSpinner","hasSpinner":"_c76ec4d3-button-hasSpinner","large":"_1c786aa6-button-large","medium":"_747b3bf4-button-medium","small":"_9e07cc2c-button-small","transparent":"_554b3c64-button-transparent","disabled":"_98c6ad03-button-disabled"}'),f=({onClick:e=(()=>{}),disabled:t=!1,propagateClick:i=!1})=>{const r=function(e){return"boolean"!=typeof e?e:o.s.create(e)}(t),n=o.s.create(!1),s=function(e,t,i,s){return i=>{if(s||i.stopPropagation(),r.get()||n.get())return Promise.resolve();let a;t(!0);try{a=e(i)}catch(i){throw t(!1),i}const o=Promise.resolve(a);return o.then((e=>t(!1))).catch((e=>t(!1))),o}}(e,(e=>n.set(e)),0,i);return{onClick:s,isDisabled:r.pipe(d.z(n,((e,t)=>e||t)))}},_=["size","color","transparent","className"],y=e=>{var{children:t=null,onClick:i=(()=>{}),onMouseOver:o=(()=>{}),onMouseLeave:d=(()=>{}),onMouseOut:p=(()=>{}),disabled:h=!1,className:u="",role:_="button",name:y,id:b,style:v={},tabIndex:C=0,propagateClick:k,ariaLabel:x,ariaLabelledBy:S,mount:E,inline:w}=e,T=(0,s._)(e,["children","onClick","onMouseOver","onMouseLeave","onMouseOut","disabled","className","role","name","id","style","tabIndex","propagateClick","ariaLabel","ariaLabelledBy","mount","inline"]);const M=f({onClick:i,disabled:h,propagateClick:k});return a.createElement(l.F.div,(0,n._)((0,r._)((0,n._)((0,r._)({},T),{mount:E,"aria-label":x,"aria-labelledby":S,"data-name":y,style:v}),(0,c.Ly)(u,Boolean(w)?g.inline:void 0)),{disabled:M.isDisabled,onClick:M.onClick,onKeyPress:e=>{[m.D.ENTER_CODE,m.D.SPACE_CODE].includes(e.charCode)&&(e.preventDefault(),M.onClick(e))},onMouseOver:o,onMouseLeave:d,onMouseOut:p,role:_,tabIndex:C}),t)},b=e=>{const{children:t=null,className:i=""}=e,r=Object.assign(p.$i(e,_),w(i,e)),n=E(e);return a.createElement(y,r,t,n)},v=({className:e="",onClick:t=(()=>{}),disabled:i=!1,value:r="",style:n={},children:s=null,propagateClick:o})=>{const c=f({onClick:t,disabled:i,propagateClick:o});return a.createElement(l.F.button,{type:"submit",style:n,disabled:c.isDisabled,className:e,onClick:c.onClick},r,s)},C=e=>{const{children:t=null,className:i=""}=e,r=Object.assign(p.$i(e,_),w(i,e)),n=E(e);return a.createElement(v,r,t,n)},k=({name:e,id:t,ariaLabelledBy:i,href:r="",target:n="",children:s=null,className:o="",onClick:c=(()=>{}),disabled:d=!1,style:m={},download:p,propagateClick:u})=>{const{onClick:g,isDisabled:_}=f({onClick:c,disabled:d,propagateClick:u}),y=a.useContext(h.OH.Context),b=!0!==p||y.has(h.OH.Flag.canUseDownloadAttr)?n:"_blank";return a.createElement(l.F.a,{"data-name":e,"aria-labelledby":i,id:t,href:r,target:b,style:m,disabled:_,className:o,onClick:g,download:p},s)},x=e=>{const{children:t=null,className:i=""}=e,r=Object.assign(p.$i(e,_),w(i,e)),n=E(e);return a.createElement(k,r,t,n)},S=e=>{var{checked:t,children:i}=e,o=(0,s._)(e,["checked","children"]);return a.createElement(y,(0,n._)((0,r._)({},o),{role:"checkbox","aria-checked":t,onClick:()=>t.modify((e=>!e))}),i)};function E({showSpinnerWhenDisabled:e=!1,transparent:t=!1,size:i="medium"}){return e?a.createElement(u.y,{color:t?void 0:"#fff",className:g.buttonSpinner,size:"small"===i?14:18}):null}function w(e,{size:t="medium",color:i="red",transparent:r=!1,showSpinnerWhenDisabled:n=!1}){return(0,c.Ly)(g.button,g[t],g[i],r&&g.transparent,n&&g.hasSpinner,e)}},63839:(e,t,i)=>{i.d(t,{M:()=>f});var r=i(10334),n=i(17171),s=i(69384),a=i(50659),o=i(84647),l=i(19840),c=i(36840),d=i(65390),m=i(38908),p=i(35426);const h=e=>null!=e.href&&e.href.startsWith("/"),u=e=>null!=e.href&&e.href.includes(document.location.host)||h(e),g=e=>"_blank"===e.target,f=(0,l.yY)((e=>{var{children:t}=e,i=(0,s._)(e,["children"]);const{link:{description:l}}=a.useContext(p.k.Context),f=h(i)?new URL(i.href,document.location.href).href:i.href;return(0,o.pipe)(i,(()=>(0,c.M4)(u,g)(i)?d.some(l.internalNewWindow):(0,c.M4)((0,o.not)(u),g)(i)?d.some(l.externalNewWindow):(0,o.not)(u)(i)?d.some(l.external):d.none),d.map((e=>{const s=m.G7(5);return a.createElement(a.Fragment,null,a.createElement("span",{hidden:!0,id:s},e),a.createElement("a",(0,n._)((0,r._)({},i),{"aria-describedby":s}),t))})),d.getOrElse((()=>a.createElement("a",(0,n._)((0,r._)({},i),{href:f}),t))))}))},35384:(e,t,i)=>{i.d(t,{gw:()=>j});var r=i(10334),n=i(17171),s=i(50659),a=i(84647),o=i(87574),l=i(19840),c=i(78323),d=i(60575),m=i(86922),p=i(19967),h=i(14973),u=i(65873),g=i(91987),f=i(19772),_=i(84714),y=i(65390),b=i(86562),v=i(16721),C=i(98719),k=i(18286),x=i(704),S=i(80152),E=i(77167),w=i(11864),T=i(72747),M=i(27199),A=i(64723);const K={position:"absolute",right:0,bottom:0,zIndex:T.C9,display:"flex",margin:`0 ${w.Ks.rem(.5)} ${w.Ks.rem(1)} 0`,padding:w.Ks.rem(2),width:w.Ks.rem(27),background:M.Q1.CoreNeutral0,alignItems:"flex-start"},N={width:w.Ks.rem(17)},B={marginTop:w.Ks.rem(1)},I={color:S.Q.Text.Base.Subdued,fontWeight:"normal"},$={$nest:{"& button:not(:last-of-type)":{marginRight:w.Ks.rem(E.v$)}}},F={display:"flex",flexDirection:"column",margin:`${w.Ks.rem(2)} 0 ${w.Ks.rem(-1)} ${w.Ks.rem(1)}`,width:w.Ks.rem(5),height:w.Ks.rem(5),borderRadius:w.Ks.percent(50),boxShadow:"0 0 48px 0 rgba(96, 101, 123, .08)",justifyContent:"center",alignItems:"center"},R={position:"fixed",right:w.Ks.rem(4)},L={marginRight:w.Ks.rem(-.5)},P={position:"fixed",right:w.Ks.rem(14),bottom:"auto"},D={$nest:{"@media (max-height: 767px)":(0,r._)({},L),"@media (min-height: 768px)":(0,r._)({},P)}},H=(0,n._)((0,r._)({},P),{bottom:0}),O=(0,n._)((0,r._)({},H),{marginRight:w.Ks.rem(2),right:w.Ks.rem(4)}),Q={$nest:{"@media (min-height: 768px)":(0,n._)((0,r._)({},P),{top:w.Ks.rem(24)})}},V={$nest:{"@media (min-height: 768px)":(0,n._)((0,r._)({},P),{top:w.Ks.rem(28)})}},U={$nest:{"@media (min-height: 768px)":(0,n._)((0,r._)({},P),{top:w.Ks.rem(32)})}},W=(0,n._)((0,r._)({},P),{bottom:0}),z=(0,n._)((0,r._)({},W),{marginRight:w.Ks.rem(2),right:w.Ks.rem(4)}),G=w.Ks.stylesheet({wrapper:[{position:"relative",width:0,height:0}],container:[A.nK,K],messageContainer:[N],buttonsContainer:[B],laterButton:[I],imageContainer:[F],baseTitle:[{fontWeight:"bold"}],closedSidebar:[R],fixedNotification:[D],outcomesPlagiarismSidebarOpen:[H],outcomesPlagiarismSidebarClosed:[O],engagement:[Q],delivery:[V],gbVoxUphook:[U],proofitSidebarOpen:[W],proofitSidebarClosed:[z],footerButtons:[$]}),j=e=>s.createElement(o.F.div,{className:e.isSidebarOpen.view((e=>e?"":G.closedSidebar))},e.navigationViewModel.popover.view((0,a.flow)(y.map((t=>{switch(t){case _.Qh.ProofitHook:return s.createElement(J,(0,n._)((0,r._)({},e),{key:"proofit"}));case _.Qh.PlagiarismHook:return s.createElement(Z,(0,n._)((0,r._)({},e),{key:"plagiarism"}));default:return(0,b.xb)(t)}})),y.toNullable))),q=({title:e,description:t,visible:i,children:n,footer:a,className:c,overlayType:d})=>s.createElement(o.F.div,{className:G.wrapper},s.createElement(h.hJ,{positionType:"fixed",visible:i,alignment:"none",overlayType:d}),i.view((i=>i&&s.createElement(o.F.div,(0,r._)({key:"container",role:"status","aria-live":"polite","data-name":"freemium-notification"},(0,l.Ly)(G.container,c)),s.createElement("div",{className:G.messageContainer},s.createElement(u.tu,{className:G.baseTitle},e),s.createElement(u.C6,null,t),s.createElement(p.$n.Group,{className:G.buttonsContainer},a)),s.createElement("div",{className:G.imageContainer},n))))),Y=e=>{const{gnarSpec:t,pageId:i}=s.useContext(v.Y.Context),a={pageId:i,upgradeHookName:x.P.UpgradeHookName.Tooltip,upgradeHookSlot:e.metricSlot,upgradeHookVariant:e.upgradeViewModel.isEligibleForPro?x.P.UpgradeHookVariant.pro:e.upgradeViewModel.isEligibleForFreeTrial?x.P.UpgradeHookVariant.premiumTrial:x.P.UpgradeHookVariant.premium},o=d.Bx.TimeSeries.rootFemetrics.getMetric(x.P.Metrics.GetPremiumButton).getCounter(x.P.MetricsActions.Show).setContext(a),l=d.Bx.TimeSeries.rootFemetrics.getMetric(x.P.Metrics.GetPremiumButton).getCounter(x.P.MetricsActions.Click).setContext(a),m=k.J.create(t),h={pageId:i,bannerType:"goPremium",placement:e.trackingPlacement,upgradeHookName:"tooltip",upgradeHookSlot:e.metricSlot,upgradeHookVariant:e.upgradeViewModel.upgradeHookVariant},u=f.R.useVisibilityObserverOnce((()=>{o.increment(),m.trackShow(h),e.upgradeViewModel.isEligibleForFreeTrialEuUk&&e.upgradeViewModel.assignToFreeTrialEuUkExperiment(),e.upgradeViewModel.assignToProVsPremiumExperiment(),e.upgradeViewModel.assignToInProductDiscountExperiment()})),_=e.navigationViewModel.popover.lens(c.J2.create(y.exists((t=>t===e.type)),(e=>((0,b.V1)(!Boolean(e),"Positive values shouldn't be set through Option.clear lens"),y.none))));return s.createElement(q,(0,n._)((0,r._)({},e),{visible:_,className:e.className,overlayType:null!=e.overlayType?e.overlayType:"transparent",footer:s.createElement("div",{ref:u,className:G.footerButtons},s.createElement(g.R,{size:"small",isEligibleForFreeTrial:e.upgradeViewModel.isEligibleForFreeTrial,isEligibleForPro:e.upgradeViewModel.isEligibleForPro,isInProductDiscounts:e.upgradeViewModel.isInProductDiscount,upgradeAction:()=>{l.increment(),m.trackClick(h),e.upgradeViewModel.openUpgradeUrl(e.place)}}),s.createElement(p.$n.Ghost,{name:"later",className:G.laterButton,onClick:()=>{m.trackDismiss(h),_.set(!1)}},"Maybe later"))}))},J=e=>{const t=s.useContext(m.S.Context);return s.createElement(Y,{isSidebarOpen:e.isSidebarOpen,type:_.Qh.ProofitHook,upgradeViewModel:e.upgradeViewModel,navigationViewModel:e.navigationViewModel,title:t.proofitTitle,description:t.proofitDescription,place:C.YT.Place.DenaliDocument.editorDenaliProofit,className:Boolean(e.className)?e.className:e.isSidebarOpen.view((e=>e?G.proofitSidebarOpen:G.proofitSidebarClosed)),overlayType:e.overlayType,trackingPlacement:"proofreadingTooltip",metricSlot:x.P.UpgradeHookSlot.ProofreadingTooltip},s.createElement(X,null))},Z=e=>{const t=s.useContext(m.S.Context);return s.createElement(Y,{isSidebarOpen:e.isSidebarOpen,type:_.Qh.PlagiarismHook,upgradeViewModel:e.upgradeViewModel,navigationViewModel:e.navigationViewModel,title:t.plagiarism.title,description:t.freemiumNotifications.plagiarism,place:C.YT.Place.DenaliDocument.editorDenaliPlagiarism,className:Boolean(e.className)?e.className:e.isSidebarOpen.view((e=>e?G.outcomesPlagiarismSidebarOpen:G.outcomesPlagiarismSidebarClosed)),overlayType:e.overlayType,trackingPlacement:"plagiarismTooltip",metricSlot:x.P.UpgradeHookSlot.PlagiarismTooltip},s.createElement(ee,null))},X=()=>s.createElement("svg",{"aria-hidden":!0,width:"78",height:"79",viewBox:"0 0 78 79"},s.createElement("defs",null,s.createElement("path",{d:"M30.333 58.933c16.753 0 30.334-13.192 30.334-29.466S47.086 0 30.333 0C13.581 0 0 13.193 0 29.467s13.58 29.466 30.333 29.466z",id:"profproofreadersimg-path"})),s.createElement("g",{fill:"none",fillRule:"evenodd"},s.createElement("g",{transform:"translate(2 2)"},s.createElement("path",{d:"M6.33 44.008c2.564 7.611 16.385 17.525 29.127 17.525C51.773 61.533 65 48.53 65 32.488 65 16.447 48.648 4.311 36.516 2.983c-8.395-.919-11.41-.345-18.512 3.497-4.216 2.28-7.884 6.083-10.256 9.605-2.569 3.814-4.281 11.482-4.281 16.403 0 3.514 1.719 8.403 2.863 11.52z",fill:"#B8D3FA"}),s.createElement("mask",{id:"profproofreadersimg-mask",fill:"#fff"},s.createElement("use",{xlinkHref:"#profproofreadersimg-path"})),s.createElement("path",{stroke:"#555C6A",strokeWidth:"2",d:"M30.333 59.933C13.035 59.933-1 46.3-1 29.467-1 12.634 13.035-1 30.333-1c17.299 0 31.334 13.634 31.334 30.467S47.632 59.933 30.333 59.933z"}),s.createElement("path",{d:"M29.843 47.74L31 51.519 26.81 67c-8.664-1.11-15.147-2.6-19.45-4.473 0 0-1.308-.306-1.36-3.263 0 0 .47-5.809 4.499-11.621 0 0 1.15-1.53 3.87-2.55l8.696-3.687a5.183 5.183 0 0 0 1.345-1.17c.041-.053.099-.131.172-.236l-.172 10.523 5.433-2.783zm24.59-.228c4.09 5.858 4.568 11.71 4.567 11.71-.053 2.98-1.38 3.29-1.38 3.29-2.61 1.126-9.133 2.622-19.573 4.488L34 51.523l1.24-3.84 4.908 2.836L40.366 40c.281.357.518.602.71.735.086.097.352.277.437.37.193.145.407.288.637.431 2.902 1.806 8.352 3.408 8.352 3.408 2.763 1.027 3.931 2.568 3.931 2.568zM40 36.076V37c0 2.5-4.5 8-7.688 8-3.188 0-7.312-5.5-7.263-8 .016-.5.016-.643 0-.924-1.271-1.628-2.286-2.805-2.845-4.803-1.451 0-1.82-5.804-1.451-6.707-.043-.098-.078-3.484.35-7.296 0 0 .204-7.073 7.397-8.27 1.005 1.073 9.547-2.5 9.547 3.5C45 9 44.453 24.284 44.358 24.566c.31.478 0 6.707-1.695 6.707-.562 1.537-1.64 3.463-2.663 4.803z",fill:"#FFF",mask:"url(#profproofreadersimg-mask)"})),s.createElement("g",{transform:"translate(43 44)"},s.createElement("ellipse",{stroke:"#555C6A",strokeWidth:"2",fill:"#FFF",strokeLinecap:"square",cx:"15.714",cy:"15.963",rx:"16.714",ry:"16.963"}),s.createElement("ellipse",{fill:"#68DEC2",style:{mixBlendMode:"multiply"},cx:"18.571",cy:"17.414",rx:"16.429",ry:"16.688"}),s.createElement("path",{stroke:"#FFF",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",d:"M7.857 17.274l5.501 5.724L25 10.884"})))),ee=()=>s.createElement("svg",{"aria-hidden":!0,width:"32",height:"32",viewBox:"0 0 32 32"},s.createElement("defs",null,s.createElement("rect",{id:"plariarismoutcomesimg-rect",width:"22",height:"22",rx:"4"}),s.createElement("path",{id:"plariarismoutcomesimg-path",d:"M22 10v8a4 4 0 0 1-4 4h-8v-8a4 4 0 0 1 4-4h8z"}),s.createElement("filter",{id:"plariarismoutcomesimg-filter",width:"350%",height:"350%",x:"-125%",y:"-125%",filterUnits:"objectBoundingBox"},s.createElement("feOffset",{in:"SourceAlpha",result:"shadowOffsetOuter1"}),s.createElement("feGaussianBlur",{in:"shadowOffsetOuter1",result:"shadowBlurOuter1",stdDeviation:"5"}),s.createElement("feColorMatrix",{in:"shadowBlurOuter1",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.5 0"}))),s.createElement("g",{fill:"none",fillRule:"evenodd"},s.createElement("use",{fill:"#5CDAE6",transform:"translate(10 10)",xlinkHref:"#plariarismoutcomesimg-rect"}),s.createElement("mask",{id:"plariarismoutcomesimg-mask",fill:"#fff"},s.createElement("use",{xlinkHref:"#plariarismoutcomesimg-rect"})),s.createElement("use",{fill:"#99F6FF",xlinkHref:"#plariarismoutcomesimg-rect"}),s.createElement("g",{mask:"url(#plariarismoutcomesimg-mask)"},s.createElement("use",{fill:"#000",filter:"url(#plariarismoutcomesimg-filter)",xlinkHref:"#plariarismoutcomesimg-path"}),s.createElement("use",{fill:"#79E8F2",xlinkHref:"#plariarismoutcomesimg-path"}))))},56488:(e,t,i)=>{i.d(t,{GN:()=>Q,b3:()=>O});var r=i(10334),n=i(50659),s=i(56453),a=i(84647),o=i(53651),l=i(93263),c=i(2617),d=i(90718),m=i(8966),p=i(19840),h=i(60575),u=i(86922),g=i(19967),f=i(65873),_=i(80159),y=i(51707),b=i(19772),v=i(65141),C=i(24946),k=i(14342),x=i(95168),S=i(54988),E=i(45653),w=i(92141),T=i(88219),M=i(65390),A=i(66202),K=i(58193),N=i(36840),B=i(72763);const I=({title:e,className:t})=>n.createElement("div",(0,r._)({className:t},y.mA(e.toLowerCase(),{allowedTags:["i","b"]}))),$=({title:e,explanation:t})=>n.createElement("div",null,n.createElement(I,{className:B.YI.bigTitle,title:e}),n.createElement("div",(0,r._)({className:B.YI.explanation},y.mA(t,{allowedTags:["i","b"]})))),F=({alert:e,hydrate:t,onApply:i,onAddToDictionary:r,onIgnore:s,onOpen:m,onMount:p})=>{const f=n.useContext(u.S.Context).inlineCard,_=e=>/Unknown/.test(e.patternName);return b.R.useEffectOnDidMount(p),n.createElement("div",{className:B.YI.card},(0,a.pipe)(e.getTransform(),M.chain((0,a.flow)(t,A.fold((t=>(h.Bx.Logging.getLogger("InlineCard.hydration").error("Failed to hydrate an inline card",t.error,{alertId:e.id}),M.none)),M.some))),M.fold((()=>!_(e)&&n.createElement($,{title:e.title,explanation:e.explanation})),(t=>{return n.createElement(T.Vy,{key:"replacementsLabels",replacementsLabels:t,onClick:i,header:(r=e,s=t.tooltipText,/Unknown/.test(r.patternName)?"Unknown word":/Misspelled\/General/.test(r.patternName)?"":/Correctness\/FullSentence\/Fusion\/Rewrite/.test(r.patternName)?r.miniCardTitle:s),customStyle:B.YI,a11yContrast:!0,beta:e.extraProperties.isBeta});var r,s}))),_(e)&&n.createElement($,{title:e.title,explanation:e.explanation}),n.createElement(g.$n.Group,{align:"vertical"},e.extraProperties.hasAddToDictionary&&n.createElement(g.$n.Tertiary,{name:"add-to-dictionary",textPosition:"right",className:_(e)?B.YI.footerButtonBig:B.YI.footerButtonShort,onClick:r},n.createElement(o.I,{icon:l.I,variant:"inherit",accessibilityLabel:""}),f.addToDictionary),n.createElement(g.$n.Tertiary,{name:"dismiss",className:B.YI.footerButtonShort,onClick:s},n.createElement(o.I,{icon:c.C,variant:"inherit",accessibilityLabel:""}),f.dismiss),n.createElement(g.$n.Tertiary,{name:"see_more",className:B.YI.footerButtonShort,onClick:m},n.createElement(o.I,{icon:d.$,variant:"inherit",accessibilityLabel:""}),f.seeMore)),n.createElement(R,{alert:e}))},R=({alert:e})=>(0,a.pipe)(e.extraProperties.freePremium,K.gR("unlocked"))?n.createElement(P,null):(0,a.pipe)(e.extraProperties.premiumYellowFooterVariant,M.isSome)?(0,a.pipe)(e.extraProperties.premiumYellowFooterVariant,M.fold((()=>null),(e=>n.createElement(L,{variant:e})))):n.createElement("div",{className:B.YI.emptyCardFooter}),L=({variant:e})=>{const t=n.useContext(u.S.Context).premiumFooter;return n.createElement(D,null,t[e])},P=()=>{const{beforeIcon:e,afterIcon:t}=n.useContext(u.S.Context).freePremiumAlertFooter;return n.createElement(D,null,e," ",t)},D=({children:e})=>n.createElement(f.Oc,{className:B.YI.premiumCardFooter},n.createElement(o.I,{icon:m.p,size:"medium",variant:"inherit",accessibilityLabel:""}),e),H=e=>{const t=n.useRef(null),[i,s]=n.useState(!1);b.R.useEffectOnDidMount((()=>{const e=t.current;e&&e.firstElementChild&&e.firstElementChild.clientWidth>=288&&s(!0)}));const{alert:a,hydrate:o,onApply:l,onIgnore:c,onAddToDictionary:d,onOpen:m,onMount:h}=e;return n.createElement("div",(0,r._)({role:"presentation",onClick:e=>e.stopPropagation(),key:a.id,ref:e=>t.current=e},(0,p.Ly)(i&&B.YI.maxWidthReached)),n.createElement(F,{alert:a,hydrate:o,onApply:l,onIgnore:c,onAddToDictionary:d,onOpen:m,onMount:h}))},O=({alert:e,events:t,highlightIndex:i,hydrate:r})=>{const s=()=>t.next({type:_.G.Type.closed}),a=e=>()=>{e.type!==_.G.Type.looked&&s(),t.next(e)},o=E.A.isWritingExpertWithTeaser(e)?v.R(document,"mousedown").pipe(C.s(1),k.c(300),x.M(s)):S.w;return b.R.useSubscription(o.subscribe()),n.createElement(H,{alert:e,hydrate:r,onAddToDictionary:a({type:_.G.Type.addedToDictionary,alertId:e.id}),onApply:t=>a({type:_.G.Type.applied,alertId:e.id,alternativeIndex:t}),onIgnore:a({type:_.G.Type.ignored,alertId:e.id}),onOpen:a({type:_.G.Type.opened,alert:{alert:e,highlightIndex:i}}),onMount:a({type:_.G.Type.looked,alertId:e.id,kind:"card"})})},Q=({item:e,highlightIndex:t,viewModel:i,events:r,designSystem:a})=>n.createElement("div",{className:B.YI.sduiCard},n.createElement(s.R,{key:e.id,sduiRootId:e.id,content:e.content,designSystem:a,notify:(r,n,s)=>{i.handleSDUIAction({type:w.X9.Type.sduiCardAction,sourceId:r,cardId:e.id,actions:n,scope:s},t)},transitions:[],prevContent:M.none,onAnimationEnd:N.Yi,onMount:()=>r.next({type:_.G.Type.looked,alertId:e.alertIds[0],kind:"card"})}))},72763:(e,t,i)=>{i.d(t,{YI:()=>W});var r=i(10334),n=i(17171),s=i(11864),a=i(4885),o=i(72747),l=i(27199);const c="inlineHeader",d="itemInsert",m="itemRemove",p="inline-card-diff",h="strike",u="inline-card-card",g="inline-transform",f=()=>({padding:`0 ${s.Ks.rem(1)}`}),_=()=>({paddingTop:s.Ks.rem(.5)}),y=s.Ks.keyframes({from:{opacity:0,transform:"scale(1, .8)"}}),b=s.Ks.keyframes({to:{opacity:0,transform:"scale(1, .8)"}}),v={position:"absolute",zIndex:o.ry,minWidth:s.Ks.rem(11),outline:"none",transformOrigin:"top",willChange:"opacity, transform",$nest:{"@media print":{visibility:"hidden"}}},C={marginTop:s.Ks.rem(.5),transformOrigin:"bottom"},k={animation:`${b} ${s.Ks.seconds(.1)} linear forwards`,pointerEvents:"none"},x={animation:`${y} ${s.Ks.seconds(.1)} linear forwards`},S={display:"flex",flexDirection:"column",overflow:"hidden",marginLeft:s.Ks.rem(-1),minWidth:s.Ks.rem(12),maxWidth:s.Ks.rem(18),borderRadius:s.Ks.rem(o.Am),background:l.Q1.CoreNeutral0,boxShadow:l.eu.Z300,color:a.y2,fontSize:s.Ks.rem(.8),"-webkit-font-smoothing":"antialiased",$nest:{"&:before":{position:"absolute",marginTop:s.Ks.px(-2),width:s.Ks.percent(100),height:s.Ks.px(2),border:"1px solid transparent",content:"''"}}},E=(0,n._)((0,r._)({},S),{maxWidth:void 0}),w={display:"flex",alignItems:"center",justifyContent:"start",padding:`${s.Ks.rem(.5)} ${s.Ks.rem(1)} ${s.Ks.rem(.5)} ${s.Ks.rem(.5)}`,background:l.Q1.CoreYellow20,color:l.Q1.CoreYellow80,$nest:{"& i":{margin:`0 ${s.Ks.rem(.5)} 0 ${s.Ks.rem(.25)}`,fill:l.Q1.CoreYellow80}}},T={paddingBottom:s.Ks.rem(.5)},M={$nest:{"&:first-letter":{textTransform:"capitalize"}}},A={paddingBottom:s.Ks.rem(.75),color:l.Q1.CoreNeutral90,fontSize:s.Ks.rem(.85),lineHeight:s.Ks.rem(1.2)},K={marginBottom:s.Ks.rem(.8),fontSize:s.Ks.rem(.7),lineHeight:s.Ks.rem(1.1),$nest:{"& b":{padding:s.Ks.rem(.25),borderRadius:o.OC,background:a.Hm,color:l.Q1.CoreNeutral90,fontWeight:600}}},N={color:a.V9,fontWeight:"normal",lineHeight:s.Ks.rem(2.1),paddingLeft:s.Ks.important(s.Ks.rem(.5)),justifyContent:"flex-start"},B={height:s.Ks.rem(2)},I={paddingBottom:s.Ks.rem(.5),color:a.V9,whiteSpace:"nowrap",fontWeight:"normal",fontSize:s.Ks.rem(1.25),lineHeight:s.Ks.rem(2),cursor:"pointer",textSizeAdjust:String(s.Ks.percent(100))},$={display:"flex",justifyContent:"space-between",marginBottom:s.Ks.rem(.25),paddingTop:s.Ks.rem(.1),color:a.V9,fontWeight:400,fontSize:s.Ks.rem(.8),lineHeight:s.Ks.rem(1.2)},F={color:l.Q1.CoreBlue50},R={color:s.Ks.important(a.YP),lineHeight:s.Ks.rem(2),$nest:{"&:after":{background:s.Ks.important(a.YP)}}},L={$nest:{[`& .${d}, .${m}`]:{paddingBottom:s.Ks.rem(.3),whiteSpace:"normal",lineHeight:s.Ks.rem(1.5)}}},P={maxWidth:s.Ks.rem(19)},D={padding:`${s.Ks.rem(.75)} ${s.Ks.rem(1)}`,color:l.Q1.CoreNeutral40},H={paddingLeft:s.Ks.rem(.4)},O={color:l.Q1.CoreNeutral40,fontWeight:500},Q={$nest:{"& svg":{stroke:l.Q1.CoreNeutral40}}},V={display:"block",width:s.Ks.percent(100),color:l.Q1.CoreNeutral90,textAlign:"left",whiteSpace:"pre-line",$nest:{"&:first-child":(0,r._)({},_()),"&:hover":{backgroundColor:l.Q1.CoreBlue50,color:l.Q1.CoreNeutral0,$nest:{[`& .${c}`]:{color:l.Q1.CoreNeutral0},[`& .${p}`]:{color:l.Q1.CoreNeutral0},[`& .${g}`]:{color:l.Q1.CoreNeutral0},[`& .${h}`]:{color:s.Ks.important(l.Q1.CoreNeutral0),$nest:{"&:after":{background:s.Ks.important(l.Q1.CoreNeutral0)}}}}}}},U={transform:"scale(.8)",marginRight:s.Ks.rem(.1)},W=(0,n._)((0,r._)({},s.Ks.stylesheet({container:[v],directionUp:[C],invisible:[k],visible:[x],bigTitle:[f(),_(),M,A],unknownWordTitle:[_(),M],explanation:[f(),K],footerButton:[N],footerButtonBig:[N],footerButtonShort:[N,B],inlineWrappedList:[I],maxWidthReached:[L],cardUphook:[P],title:[D],upgradeButton:[H],upgradeButtonText:[O],upgradeIcon:[Q]})),{card:s.Ks.joinClasses([u,s.Ks.style(S)]),sduiCard:s.Ks.style(E),premiumCardFooter:s.Ks.joinClasses([u,s.Ks.style(w)]),emptyCardFooter:s.Ks.joinClasses([u,s.Ks.style(T)]),diff:s.Ks.joinClasses([p,s.Ks.style(F)]),strike:s.Ks.joinClasses([h,s.Ks.style(R)]),inlineHeader:s.Ks.joinClasses([c,s.Ks.style(M,$)]),inlineHeaderOne:s.Ks.joinClasses([c,s.Ks.style(M,$,{marginBottom:0})]),itemInsert:s.Ks.joinClasses([d,s.Ks.style(f(),V)]),itemRemove:s.Ks.joinClasses([m,s.Ks.style(f(),V)]),transform:g,inlineCardUpdatedLogo:s.Ks.style(U)})},24476:(e,t,i)=>{i.d(t,{wY:()=>q});var r=i(10334),n=i(17171),s=i(50659),a=i(84647),o=i(87574),l=i(11864),c=i(86922),d=i(64191),m=i(56122),p=i(77272),h=i(92954),u=i(78799),g=i(16624),f=i(15491),_=i(35426),y=i(27917),b=i(83683);const v=JSON.parse('{"iE":"_bcdd7f0f-change-plan-wrapper","Qs":"_df5b0caf-change-plan-content","Kk":"_91fa5628-change-plan-icon","zJ":"_fa313941-change-plan-iconPremium","Qq":"_17f5ec07-change-plan-text","aF":"_7ed7ecad-change-plan-changePlanBtn","q9":"_cd54690c-change-plan-price"}');var C;!function(e){const t={content:{wrapper:v.iE,icon:v.Kk}};e.View=({notification:e,savedPrice:i,onClose:a,onChangePlan:o})=>{const l=s.useContext(c.S.Context).changePlan.hook;return s.createElement(d.Rx.Wrapper,{notification:e,onClose:a,theme:t},s.createElement(d.Rx.Content,null,s.createElement("div",{className:v.Qs},s.createElement(y.In.Paid,{width:18,className:v.zJ}),s.createElement("div",{className:v.Qq},l.title,s.createElement(h.U,{onClick:o,name:"changePlanNotification",className:v.aF},s.createElement("b",null,l.button.switchTo,s.createElement("span",{className:v.q9},l.button.price(s.createElement(b.J9,(0,n._)((0,r._)({},i.pricePerYear),{periodInMonths:12}))))))))))}}(C||(C={}));var k=i(19967),x=i(65873),S=i(19772),E=i(72747),w=i(27199);l.Ks.style({display:"flex",flexDirection:"column",width:"100vw",height:"100vh",background:w.Q1.CoreNeutral1,justifyContent:"center",alignItems:"center"});const T=l.Ks.style({padding:l.Ks.rem(1.5),width:l.Ks.rem(E.NE-E.PG),borderRadius:l.Ks.rem(E.Am),background:w.Q1.CoreNeutral0,boxShadow:w.eu.Z300,transform:`translateX(${l.Ks.rem(-1*(E.xS-E.xu+E.PG))})`,$nest:{[`@media (${E.P9})`]:{width:l.Ks.rem(E.rQ-E.PG)}}}),M=l.Ks.style({display:"flex",marginBottom:l.Ks.rem(1)}),A=(l.Ks.style({marginBottom:l.Ks.rem(1)}),l.Ks.style({marginBottom:l.Ks.rem(1),fontWeight:700})),K=(l.Ks.style({marginLeft:l.Ks.rem(.5)}),l.Ks.style({maxWidth:"100%"})),N=l.Ks.style({paddingRight:l.Ks.rem(.5),paddingLeft:l.Ks.rem(.5)}),B=l.Ks.joinClasses([l.Ks.style({marginRight:l.Ks.rem(.5),marginLeft:l.Ks.rem(-.5),textTransform:"none",letterSpacing:"normal",fontSize:l.Ks.rem(w.EY.BodySize)}),N]);var I;!function(e){e.View=({name:e,title:t,description:i,cta:r,dismiss:n,topPart:a,rightPart:o,onCTA:l,onDismiss:c,onShow:d})=>(S.R.useEffectOnDidMount((()=>d&&d())),s.createElement("section",{className:T},a,s.createElement("div",{className:M},s.createElement("div",null,s.createElement(x.C6,{className:A},t),s.createElement(x.C6,null,i)),o),s.createElement("div",{className:K},s.createElement(k.$n.Ghost,{name:e,className:B,onClick:l},r),s.createElement(k.$n.Flat,{name:`dismiss.${e}`,className:N,onClick:c},n))))}(I||(I={}));var $=i(90883),F=i(34717);const R=({expiryDate:e,notification:t,onShow:i,onDismiss:r,onUpdateBilling:n})=>{const a=s.useContext(c.S.Context).gbBillingMigration,o=F.Yr.fullDate(F.Yr.Timestamp.toLocal(e.getTime()));return s.useEffect(i),s.createElement(d.Rx.Wrapper,{notification:t,onClose:r},s.createElement("div",null,s.createElement(x.H4,{className:L.title},a.title),s.createElement($.h,null),s.createElement(x.C6,{className:L.description},a.description(o)),s.createElement($.h,null),s.createElement(h.U,{name:"addBillingInformation",onClick:n,className:L.cta},a.cta)))},L=l.Ks.prefixedStylesheet("gb_billing_migration_notification",{title:[{color:w.Q1.CoreNeutral0,lineHeight:l.Ks.rem(1.5)}],description:[{color:w.Q1.CoreNeutral0}],cta:[{fontWeight:600}]});var P=i(63839);const D=({notification:e,onClose:t,link:i})=>{const r=s.useContext(c.S.Context).gbRuleCreated;return s.createElement(d.q0.Wrapper,{notification:e,onClose:t},s.createElement(d.Rx.Content,null,s.createElement("div",{className:V.wrapper},s.createElement("div",{className:V.content},s.createElement("div",null,r.ruleSaved),s.createElement(P.M,{href:i,target:"_blank",className:V.link},r.viewStyleGuide)))))},H={display:"flex",marginTop:l.Ks.rem(-1.1),marginBottom:l.Ks.rem(-.8),alignItems:"center",justifyContent:"space-between"},O={maxWidth:l.Ks.rem(14),wordWrap:"break-word",flexBasis:"auto",flexGrow:1,paddingTop:l.Ks.rem(.5),paddingRight:l.Ks.rem(2)},Q={color:w.Q1.CoreBlue40,textDecoration:"none"},V=l.Ks.stylesheet({wrapper:[H],content:[O],link:[Q]}),U=JSON.parse('{"iE":"_2e5a3ce8-mute_onboarding-wrapper","$_":"_a28a5f5f-mute_onboarding-media","h_":"_1473303e-mute_onboarding-description","HM":"_7b75030f-mute_onboarding-btn"}');var W;!function(e){e.CardMute=({onClose:e,onShow:t})=>{const r=i(92935),n=i(76387),a=s.useContext(c.S.Context).mutedAlerts.onboarding.cardMute;return s.useEffect((()=>t())),s.createElement("div",{className:U.iE},s.createElement("video",{className:U.$_,muted:!0,autoPlay:!0,loop:!0,src:r,poster:n}),s.createElement(x.C6,{className:U.h_},a.description),s.createElement(h.U,{name:"gotItMutedOnboarding",className:U.HM,onClick:e},a.buttonText))}}(W||(W={}));const z=JSON.parse('{"iE":"_d758f5a3-premium_ungating_renewal-wrapper","Qs":"_9401003f-premium_ungating_renewal-content","Kk":"_69d16f6c-premium_ungating_renewal-icon","Qp":"_42a43110-premium_ungating_renewal-iconInfo","iU":"_098c5236-premium_ungating_renewal-message","DD":"_6cb71434-premium_ungating_renewal-title","TD":"_3487f016-premium_ungating_renewal-manageSubscriptionBtn"}');var G;!function(e){const t={content:{wrapper:z.iE,icon:z.Kk}};e.View=({trialEndDate:e,notification:i,onManageSubscription:r,onClose:n})=>{const o=s.useContext(c.S.Context).premiumUngatingRenewalNotification,l=F.Yr.fullDate(F.Yr.Timestamp.toLocal(e.getTime())),m=(0,a.flow)(r,n);return s.createElement(d.Rx.Wrapper,{notification:i,onClose:n,theme:t},s.createElement(d.Rx.Content,null,s.createElement("div",{className:z.Qs},s.createElement(y.In.Info,{width:18,className:z.Qp}),s.createElement("div",{className:z.iU},s.createElement("div",{className:z.DD},o.title),o.message(l),s.createElement(h.U,{onClick:m,name:"manageSubscription",className:z.TD},o.cta)))))}}(G||(G={}));const j=()=>s.createElement("svg",{"aria-hidden":!0,width:"300",height:"120",viewBox:"0 0 200 100",xmlns:"http://www.w3.org/2000/svg"},s.createElement("defs",null,s.createElement("radialGradient",{cy:"51.039%",fx:"50%",fy:"51.039%",r:"53.934%",gradientTransform:"matrix(0 1 -.99155 0 1.006 .01)",id:"a"},s.createElement("stop",{stopColor:"#03C1E2",offset:"0%"}),s.createElement("stop",{stopColor:"#0279D8",offset:"100%"}))),s.createElement("g",{fill:"none",fillRule:"evenodd"},s.createElement("path",{d:"M180.34 114.801c0 25.152-20.564 45.544-45.933 45.544-25.366 0-45.932-20.392-45.932-45.544 0-25.154 20.566-45.544 45.932-45.544 25.369 0 45.933 20.39 45.933 45.544",fill:"#15C39A"}),s.createElement("path",{d:"M143.47 120.973c-1.91 0-3.417 1.705-3.06 3.662.272 1.49 1.686 2.513 3.214 2.513h4.813l2.79-.389c-4.464 6.493-12.214 9.481-20.688 8.163-6.898-1.074-12.823-5.701-15.323-12.165-5.676-14.67 5.13-28.678 19.211-28.678 7.34 0 13.774 4.259 17.465 9.403.002 0 .004.107.004.111.98 1.4 2.92 1.802 4.333.83a3.03 3.03 0 0 0 .905-4.053h.022c-5.105-7.901-14.277-12.957-24.592-12.272-13.43.893-24.298 11.79-25.07 25.115-.898 15.505 11.506 28.164 26.933 28.164 8.104 0 15.36-3.499 20.302-9.16l-.585 3.247v2.935c0 1.513 1.029 2.917 2.533 3.186 1.975.352 3.692-1.143 3.692-3.036v-17.576H143.47",fill:"#FFF",fillRule:"nonzero"}),s.createElement("g",{transform:"translate(3 69.257)"},s.createElement("ellipse",{stroke:"#FFF",strokeWidth:"2.649",fill:"url(#a)",cx:"45.765",cy:"45.378",rx:"47.089",ry:"46.703"}),s.createElement("path",{fill:"#EDEDED",d:"M40.217 39.83l33.05-21.955-21.955 33.05-33.05 21.956z"}),s.createElement("path",{fill:"#FE4E4D",d:"M40.217 39.83l33.05-21.955-21.955 33.05z"}),s.createElement("path",{fillOpacity:".199",fill:"#1C1E29",d:"M73.268 17.875l-21.956 33.05-33.05 21.956z"}),s.createElement("path",{d:"M46.637 77.791v6.483H45.11V77.79h1.526zm-17.783-4.666l1.321.756-3.269 5.614-1.32-.756 3.268-5.614zm33.822 0l3.269 5.614-1.322.756-3.268-5.614 1.32-.756zM17.128 61.023l.763 1.31-5.662 3.242-.763-1.31 5.662-3.242zm57.273 0l5.662 3.242-.762 1.31-5.662-3.242.762-1.31zm10.59-16.293v1.513h-6.537V44.73h6.538zm-71.915 0v1.513H6.538V44.73h6.538zM79.41 25.369l.762 1.31-5.662 3.241-.762-1.31 5.662-3.241zm-67.29 0l5.662 3.241-.763 1.31-5.662-3.241.763-1.31zm52.692-14l1.321.757-3.269 5.614-1.32-.756 3.268-5.615zm-38.094 0l3.268 5.615-1.32.756-3.27-5.614 1.322-.757zm19.919-4.886v6.482H45.11V6.483h1.526z",fill:"#F3F5FA"})),s.createElement("g",null,s.createElement("path",{d:"M76.732 36.02h35.03a2.55 2.55 0 0 0 2.205-3.833L96.452 2.074a2.55 2.55 0 0 0-4.409 0L74.528 32.187a2.55 2.55 0 0 0 2.204 3.832z",fill:"#EA1537"}),s.createElement("path",{d:"M95.86 17.988l-.695 6.792h-1.859l-.694-6.792v-5.483h3.247v5.483zm.024 12.028h-3.272v-3.285h3.272v3.285z",fill:"#FFF",fillRule:"nonzero"})))),q=(0,n._)((0,r._)({},p.k),{alertUndo:(e,t)=>s.createElement(u.Q.Flexible,{notification:e,onClose:t("closedByUser"),action:t("undo"),params:e.args.params}),textRemoved:(e,t)=>s.createElement(X,{action:t("undo")}),cardMuteOnboarding:(e,t)=>s.createElement(W.CardMute,{onShow:t("shown"),onClose:t("closedByUser")}),premiumOnboardingSurvey:(e,t)=>s.createElement(g.a,{viewModel:e.args.viewModel,onClose:t("closedByUser")}),changePlanCta:(e,t)=>s.createElement(C.View,{notification:e,savedPrice:e.args.model.savedPrice,onClose:t("closedByUser"),onChangePlan:t("changePlan")}),gbBillingMigration:(e,t)=>s.createElement(R,{notification:e,expiryDate:e.args.expiryDate,onShow:t("shown"),onUpdateBilling:t("cta"),onDismiss:t("closedByUser")}),changePlanSuccess:e=>s.createElement(ee,{planName:e.args.planName}),premiumUngatingRenewal:(e,t)=>s.createElement(G.View,{trialEndDate:e.args.trialEndDate,notification:e,onClose:t("closedByUser"),onManageSubscription:t("ctaManageSubscription")}),gbSatisfactionSurvey:(e,t)=>s.createElement(m.w,{viewModel:e.args.viewModel,onClose:t("closedByUser"),onComplete:t("completeSurvey")}),safariExtActivation:(e,t)=>s.createElement(Z,{cta:t("activate"),close:t("closedByUser"),onShow:t("shown")}),citationStyleChange:e=>s.createElement(te,{citationStyle:e.args.citationStyle}),gbRuleCreated:(e,t)=>s.createElement(D,{notification:e,onClose:t("closedByUser"),link:e.args.link}),safari12EndSupport:()=>s.createElement(Y,null),logoutError:e=>s.createElement(J,e.args)}),Y=()=>{const e=s.useContext(c.S.Context);return s.createElement(d.Rx.TitledContent,{title:e.safari12EndSupport.title},e.safari12EndSupport.description(l.Ks.style({color:"#fff"})))},J=({timeToRetry:e,resetHandler:t})=>{const i=s.useContext(_.k.Context);return s.createElement(d.Rx.TitledContent,{title:i.account.logoutError.title},s.createElement(o.F.Fragment,null,(0,a.pipe)(e,f.T((e=>-1!==e?s.createElement("div",{key:"logoutErrorNotification"},i.account.logoutError.subtitle,s.createElement("br",null),s.createElement(h.U,{onClick:t},i.account.logoutError.retrying(e))):s.createElement("div",{key:"logoutErrorNotification"},i.account.logoutError.fatalDescription))))))},Z=({cta:e,close:t,onShow:i})=>{const{safariExtActivationNotification:r,actions:n}=s.useContext(c.S.Context);return s.createElement(I.View,{title:r.title,description:r.description,cta:r.cta,dismiss:n.close,name:"safariExtActivationNotification",onCTA:e,onDismiss:t,onShow:i,rightPart:s.createElement(j,null)})},X=({action:e})=>{const t=s.useContext(c.S.Context);return s.createElement(d.Rx.Content,null,s.createElement(u.Q.Content,{action:e,content:t.textRemoved}))},ee=({planName:e})=>{const t=s.useContext(c.S.Context).changePlan;return s.createElement(d.Rx.Content,null,t.successfulNotificationCopy(e))},te=({citationStyle:e})=>{const t=s.useContext(c.S.Context);return s.createElement(d.Rx.Content,null,t.citation.citationStyleChangeNotification.content(t.goals.sections.format.formatTitle(e)))}},85921:(e,t,i)=>{i.d(t,{L:()=>p});var r=i(10334),n=i(17171),s=i(50659),a=i(19840),o=i(86922),l=i(11864),c=i(36840),d=i(27199),m=i(1808);const p=({checked:e,name:t,className:i,ariaLabelledBy:l})=>{const d=s.useContext(o.S.Context);return s.createElement(m.LO,(0,n._)((0,r._)({name:t,"aria-checked":e,ariaLabelledBy:l},(0,a.Ly)(e.view((0,c.Sw)(h.switchButtonOn,h.switchButtonOff)),i)),{checked:e}),s.createElement("span",{"aria-hidden":!0,className:h.on},d.on),s.createElement("span",{"aria-hidden":!0,className:h.off},d.off))};var h;!function(e){const t=l.Ks.rem(1.25),i=e=>({"&:hover":{backgroundColor:e},"&:hover::before":{borderColor:e}}),s=l.Ks.rem(.15),a={$debugName:"switchButton",position:"relative",display:"inline-flex",minWidth:l.Ks.rem(3),height:l.Ks.rem(1.25),borderRadius:t,backgroundColor:d.Q1.CoreNeutral50,color:d.Q1.CoreNeutral0,letterSpacing:l.Ks.rem(.04625),fontSize:l.Ks.rem(.625),cursor:"pointer",transition:l.Ks.seconds(.4),alignItems:"center",userSelect:"none",outline:"none",$nest:(0,r._)({"&::before":{position:"absolute",left:0,width:t,height:t,borderWidth:s,borderStyle:"solid",borderColor:d.Q1.CoreNeutral50,borderRadius:l.Ks.percent(50),backgroundColor:d.Q1.CoreNeutral0,content:"''",transition:l.Ks.seconds(.4),boxSizing:"border-box"},"&:focus":{boxShadow:`0 0 0 1px ${d.Q1.CoreNeutral0}, 0 0 0 3px ${d.Q1.CoreBlue40}`,zIndex:1},"&:focus:not(:focus-visible)":{boxShadow:"none",$unique:!0},"&:focus-visible":{boxShadow:`0 0 0 1px ${d.Q1.CoreNeutral0}, 0 0 0 3px ${d.Q1.CoreBlue40}`,zIndex:1,$unique:!0}},i(d.Q1.CoreNeutral40))},o={position:"relative",textAlign:"center",textTransform:"uppercase",fontWeight:"bold"};var c=e.on=l.Ks.style(o,{width:l.Ks.rem(2.125)}),m=e.off=l.Ks.style(o,{width:l.Ks.rem(1.5),marginLeft:t});const p=(e,t)=>({[`& .${c}`]:e,[`& .${m}`]:t}),h={display:"none"},u={display:"inline-block"};e.switchInput=l.Ks.style({position:"absolute",opacity:0}),e.switchButtonOn=l.Ks.style(a,{backgroundColor:d.Q1.CoreBlue50,$nest:(0,r._)((0,n._)((0,r._)({},p(u,h)),{"&::before":{transform:`translateX(${l.Ks.rem(1.75)})`,borderColor:d.Q1.CoreBlue50}}),i(d.Q1.CoreBlue40))}),e.switchButtonOff=l.Ks.style(a,{$nest:p(h,u)})}(h||(h={}))},92444:(e,t,i)=>{i.d(t,{x:()=>y});var r=i(10334),n=i(17171),s=i(11864),a=i(29120),o=i(27199);const l=e=>({[`&-${e}`]:{marginLeft:s.Ks.rem(3+1.5*e)}}),c=(e,t)=>({counterIncrement:`list${e}`,counterReset:t}),d=(e,t)=>({"&:before":{content:`counter(list${e}, ${t}) '. '`}}),m=(e,t,i)=>({[`&-${e}`]:(0,n._)((0,r._)({},c(e,i)),{$nest:d(e,t)})}),p="editor-",h={editorContainer:`${p}editorContainer`,rtfLink:`${p}rtfLink`,bigSize:`${p}bigSize`},u=`0 0 ${s.Ks.rem(.5)}`,g=(e,t,i)=>({margin:u,fontSize:s.Ks.rem(e),lineHeight:s.Ks.rem(t),$nest:{"&:not(:first-child)":{marginTop:s.Ks.rem(i)}}}),f={position:"relative",overflow:"hidden",minHeight:s.Ks.rem(5),outline:"none",border:"none",resize:"none",$nest:{"& p":{margin:0,padding:0},"& h1":g(1.375,2,2),"& h2":g(1.125,1.7,1),"& ol, & ul":{margin:`0 0 ${s.Ks.rem(.5)}`,paddingLeft:0},"& ol:not(:first-child), & ul:not(:first-child)":{marginTop:s.Ks.rem(.5)},"& li":{margin:`0 0 0 ${s.Ks.rem(3)}`,paddingRight:0,listStyleType:"none",$nest:{"&:before":{display:"inline-block",marginRight:s.Ks.rem(.5),marginLeft:s.Ks.rem(-3),width:s.Ks.rem(2.5),textAlign:"right",whiteSpace:"nowrap",lineHeight:s.Ks.rem(1.375)},[`.${h.bigSize} &`]:{$nest:{"&:before":{lineHeight:s.Ks.rem(1.65)}}}}},"& .ql-indent":{$nest:(0,r._)({},l(1),l(2),l(3),l(4),l(5),l(6),l(7),l(8))},'& ol li[data-list="bullet"]':{$nest:{"&:before":{content:"'\\2022'"}}},"& ol li[data-list='dashed']":{$nest:{"&:before":{content:"'-'"}}},'& ol li[data-list="ordered"]':(0,n._)((0,r._)({},c(0,"list1 list2 list3 list4 list5 list6 list7 list8")),{listStyleType:"none",$nest:(0,n._)((0,r._)({},d(0,"decimal")),{"&.ql-indent":{$nest:(0,r._)({},m(1,"lower-alpha","list2 list3 list4 list5 list6 list7 list8"),m(2,"lower-roman","list3 list4 list5 list6 list7 list8"),m(3,"decimal","list4 list5 list6 list7 list8"),m(4,"lower-alpha","list5 list6 list7 list8"),m(5,"lower-roman","list6 list7 list8"),m(6,"decimal","list7 list8"),m(7,"lower-alpha","list8"),m(8,"lower-roman","none"))}})}),[`& .${h.rtfLink}`]:{color:o.Q1.CoreBlue50,$nest:{"&:visited":{color:o.Q1.CoreBlue50}}}}},_={fontSize:s.Ks.rem(1.375),lineHeight:s.Ks.rem(2.5),$nest:{"& h1":{fontSize:s.Ks.rem(1.65),lineHeight:s.Ks.rem(3)},"& h2":{fontSize:s.Ks.rem(1.375),lineHeight:s.Ks.rem(2.5)}}},y={editorContainer:s.Ks.joinClasses([h.editorContainer,s.Ks.style(f),s.Ks.style({paddingBottom:"40vh"}),a.b.style(f)]),bigSize:s.Ks.joinClasses([h.bigSize,s.Ks.style(_),a.b.style(_)]),rtfLink:s.Ks.joinClasses([h.rtfLink])}},64723:(e,t,i)=>{i.d(t,{nK:()=>a});var r=i(11864),n=i(72747),s=i(27199);s.eu.Z100,r.Ks.rem(n.H0),s.eu.Z200;const a={borderRadius:r.Ks.rem(n.H0),boxShadow:s.eu.Z300}},45181:(e,t,i)=>{i.d(t,{c:()=>v});var r=i(23988),n=i(84647),s=i(80074),a=i(30720),o=i(88105),l=i(76005),c=i(62597),d=i(41949),m=i(42543),p=i(80837),h=i(78339),u=i(58347),g=i(15491),f=i(36094),_=i(77396),y=i(65390),b=i(58193);class v{get documentText(){return this._ded.getText()}calculateStats(){return _.hq(this._getStats).then((e=>(this.recentDocumentStats.set(y.some(e)),e)))}dispose(){this._subs.dispose()}constructor(e,t,i,_,v,C){(0,r._)(this,"_ded",void 0),(0,r._)(this,"_getStats",void 0),(0,r._)(this,"rtfMode",void 0),(0,r._)(this,"saved",void 0),(0,r._)(this,"checkingState",void 0),(0,r._)(this,"asyncChecksState",void 0),(0,r._)(this,"counters",void 0),(0,r._)(this,"title",void 0),(0,r._)(this,"context",void 0),(0,r._)(this,"defaultContext",void 0),(0,r._)(this,"contextCompleteness",void 0),(0,r._)(this,"score",void 0),(0,r._)(this,"scoreStatus",void 0),(0,r._)(this,"textInfo",void 0),(0,r._)(this,"recentDocumentStats",void 0),(0,r._)(this,"documentLength",void 0),(0,r._)(this,"_subs",void 0),(0,r._)(this,"isDemoDocument",void 0),(0,r._)(this,"updateContext",void 0),(0,r._)(this,"updateDefaultContext",void 0),(0,r._)(this,"getCheckingForState",void 0),this._ded=_,this._getStats=v,this.rtfMode=C,this.saved=new m.B7,this.checkingState=s.s.create("full"),this.asyncChecksState=s.s.create({plagiarism:"full",ai_detector:"full",writing_expert_check:"full"}),this.counters=s.s.create(d.fn.group.empty),this.defaultContext=s.s.create(y.none),this.score=s.s.create(y.none),this.scoreStatus=s.s.create(y.none),this.textInfo=s.s.create(y.none),this.recentDocumentStats=s.s.create(y.none),this._subs=new p.y.Keeper,this.isDemoDocument=!0,this.updateContext=e=>{const t=!a.T0.eq.equals(this.context.get(),e);return this.context.set(e),t},this.updateDefaultContext=e=>{const t=!(0,n.pipe)((0,n.tuple)(this.defaultContext.get(),e),(0,n.tupled)(b.fP(a.T0.Default.eq.equals)),y.getOrElse(n.constFalse));return this.defaultContext.set(e),t},this.getCheckingForState=e=>e!==c.J.SpecialId.Plagiarism?this.checkingState.view((e=>({kind:d.kr.CheckingKind.Document,type:e}))):s.s.combine(this.checkingState,this.asyncChecksState.view("plagiarism"),((e,t)=>"full"===e?{kind:d.kr.CheckingKind.Document,type:e}:"idle"!==t?{kind:d.kr.CheckingKind.Plagiarism,type:t}:{kind:d.kr.CheckingKind.Document,type:e})),this.title=s.s.create(e),this.context=s.s.create(i);const k=t.length-1;this.documentLength=s.s.create({full:k,trimmed:o.E.isInsertString(t.delta)?o.E.getTrimmedInsertLength(t.delta):k}),this.contextCompleteness=this.context.view(d.AB.calculateCompleteness),this._subs.push(_.contentUpdated.pipe(h.p(l.D_.isTextMaybeWithFormatting),u.B(200),g.T((()=>_.getText())),g.T((e=>({full:e.length-1,trimmed:e.trim().length})))).subscribe(f.H9(this.documentLength)))}}},17931:(e,t,i)=>{i.d(t,{A:()=>u,F:()=>g});var r=i(83531),n=i(23988),s=i(46238),a=i(84647),o=i(80074),l=i(61389),c=i(30720),d=i(32062),m=i(68594),p=i(65390),h=i(45181);class u{_updateValue(e,t){this._changes.modify((i=>Object.assign({},i,{[e]:t})))}get template(){return this._changes.get().template}set template(e){this._updateValue("template",e)}get outcomes(){return this._changes.get().outcomes}set outcomes(e){this._updateValue("outcomes",e)}get checkedPlagiarism(){return this._changes.view("checkedPlagiarism").get()}set checkedPlagiarism(e){this._updateValue("checkedPlagiarism",e)}constructor(e){(0,n._)(this,"_changes",void 0),(0,n._)(this,"changes",void 0),this._changes=o.s.create(e),this.changes=this._changes.pipe(m.i(1))}}class g extends h.c{get isInitialRevision(){return this._doxInit.remoteDocument.isInitialRevision}downloadOriginal(e){return(0,a.pipe)(this.flush,s.map((()=>e)),s.chain(p.fold((()=>()=>this._doxApi.downloadOriginal(this.id,this._enableTrackingOnDownload)),(e=>()=>this._doxApi.downloadInFormat(this.id,e,this._enableTrackingOnDownload)))),s.map(l.F.saveToFS))()}downloadProofread(){var e=this;return(0,r._)((function*(){yield e._doxApi.downloadProofread(e.id).then(l.F.saveToFS)}))()}generateReport(e,t){var i=this;return(0,r._)((function*(){yield i._doxApi.generateReport(i.id,e,t).then(l.F.saveToFS)}))()}constructor(e,t,i,r,s,o,l,m){super(t.meta.title,t.initialDelta,(0,a.pipe)(t.meta.settings.context,p.getOrElse((()=>c.T0.unset))),i,r,l),(0,n._)(this,"id",void 0),(0,n._)(this,"_doxInit",void 0),(0,n._)(this,"_doxApi",void 0),(0,n._)(this,"_enableTrackingOnDownload",void 0),(0,n._)(this,"proofit",void 0),(0,n._)(this,"extraSettings",void 0),(0,n._)(this,"flush",void 0),this.id=e,this._doxInit=t,this._doxApi=s,this._enableTrackingOnDownload=o,this.extraSettings=new u((0,a.pipe)(this._doxInit.meta.settings.extraSettings,p.getOrElse((()=>d.O.Extra.empty)))),this.flush=()=>(this._ded.flushChanges(),this._doxInit.remoteDocument.flush()),this.isDemoDocument=t.meta.isDemoDocument,this.proofit=m(this.title)}}},29145:(e,t,i)=>{i.d(t,{N:()=>r});var r,n=i(84647),s=i(60575),a=i(24031),o=i(91242),l=i(42543),c=i(78339),d=i(43308),m=i(89769),p=i(95168),h=i(54988),u=i(94855),g=i(77396);!function(e){e.create=(e,t,i)=>{const r=s.Bx.Logging.getLogger("DOXConnector",s.y7.$.DEBUG,s.y7.I.Model.getColor("DOXConnector")),h=new l.B7;return{pushChanges:t=>{i.demoMode||(r.debug("Outgoing DeltaChange to DOX",t),h.next(t),(0,n.pipe)(e.remoteDocument.pushChanges(t),u.qE((e=>{o.Xb.isNotConnectedError(e.error)?r.warn("Could not push changes to DOX",e):r.error("Error on pushing changes to DOX",e)})),g.hq).catch(n.constVoid))},changes:(0,n.pipe)(t,c.p(a.U.is("change")),d.E("change"),m.Z(e.initialDelta),p.M((e=>r.debug("Incoming Change from DOX",e)))),outgoingChanges:h}},e.Mock=e=>{var t;return{pushChanges:n.constVoid,changes:(null===(t=e)||void 0===t?void 0:t.changes)||h.w,outgoingChanges:h.w}}}(r||(r={}))},58538:(e,t,i)=>{i.d(t,{_g:()=>n,uL:()=>k,yp:()=>s});var r,n,s,a=i(83531),o=i(23988),l=i(10334),c=i(17171),d=i(84647),m=i(80074),p=i(28986),h=i(27645),u=i(60575),g=i(66799),f=i(40711),_=i(42543),y=i(77396),b=i(34717),v=i(65390),C=i(66202);!function(e){e.Querying="querying",e.SynonymsReady="ready",e.SynonymsEmpty="empty",e.SynonymApplied="applied",e.SynonymsError="error",e.SynonymsNone="none"}(r||(r={})),function(e){e.isReady=function(e){return null!==e&&e.kind===r.SynonymsReady},e.isEmpty=function(e){return null!==e&&e.kind===r.SynonymsEmpty},e.isQuerying=function(e){return null!==e&&e.kind===r.Querying},e.isApplied=function(e){return null!==e&&e.kind===r.SynonymApplied},e.defaultState={kind:r.SynonymsNone,query:{id:-1,start:-1,word:""}}}(n||(n={}));class k{query(e){var t=this;return(0,a._)((function*(){return t._log.trace("SynonymsQuery: "+e.word),t.state.set({kind:r.Querying,query:e}),y.hq(t._capi.requestSynonyms(e.start,e.word)).then((i=>{const n=b.Yr.Timestamp.now(),a=(0,d.pipe)(i.synonymsOrGroups,v.fold((()=>({kind:r.SynonymsEmpty,query:e,synonyms:{id:i.id},readyAt:n,stats:s.emptySynonymsStats,pname:i.pname})),(t=>({kind:r.SynonymsReady,query:e,synonyms:(0,c._)((0,l._)({},i),{synonymsOrGroups:t}),readyAt:n,stats:s.getSynonymsStats(t),pname:i.pname}))));return t._onResponse(a),a})).catch((i=>(t.abortQuery(),Boolean(i.message)&&-1!==i.message.indexOf("Timeout")?t._log.info("Synonyms timeout",i):t._log.warn("Error getting synonyms",i),{kind:r.SynonymsError,query:e})))}))()}abortQuery(){const e=this.state.get();n.isQuerying(e)&&this.state.set(n.defaultState)}_onResponse(e){const t=window.SQT;setTimeout((()=>{this._log.trace("_onResponse() newState: "+e);const t=this.state.get();n.isQuerying(t)&&t.query.word===e.query.word?this.state.set(e):this._log.trace("Discarding result for "+e.query.word)}),t)}applySynonym(e,t){this._log.debug(`_applySynonym(#${e.id})`);const i=e.range,n=i.start,s=i.end-i.start;this._ded.flushChanges();let a=this.positionManager.getTextLength();const o=(0,d.pipe)((new p.R).retain(n).delete(s).insert(t),f.N.getEnrichedWithFormattingDelta(this._getContent())),l=h.lY.delta(o,a),c=o.invert(this._getContent());return this.changes.next(l),C.getOrElse((e=>this._log.error("Failed to set cursor on synonym apply.",e,{position:n})))(this._ded.setCursor(n,0)),this.state.set({kind:r.SynonymApplied,target:e}),this._capi.sendFeedback({id:e.id,kind:g.Fc.SYNONYM_ACCEPTED,replacementText:t})(),this._ded.flushChanges(),a=this.positionManager.getTextLength(),{action:g.Fc.SYNONYM_ACCEPTED,replacement:t,commit:()=>{this._log.debug(`_applySynonym(#${e.id}):commit()`),e.dispose()},undo:()=>{this._log.debug(`_applySynonym(#${e.id}):undo()`);const t=this.positionManager.getTextLength();if(t===a){const e=h.lY.delta(c,t);this.changes.next(e)}else this._log.error("Text has changed while uncommitted apply is present");return e.dispose(),[]}}}ignore(e){const t=this.state.get();(n.isEmpty(t)||n.isReady(t))&&t.synonyms.id===e?this._capi.sendFeedback({id:e,kind:g.Fc.SYNONYM_DISMISSED})():this._log.error("Tried to report ignore for an unknown synonyms id",{reportedId:e,currentState:t})}constructor(e,t,i,r){(0,o._)(this,"positionManager",void 0),(0,o._)(this,"_getContent",void 0),(0,o._)(this,"_capi",void 0),(0,o._)(this,"_ded",void 0),(0,o._)(this,"state",void 0),(0,o._)(this,"changes",void 0),(0,o._)(this,"_log",void 0),this.positionManager=e,this._getContent=t,this._capi=i,this._ded=r,this.state=m.s.create(n.defaultState),this.changes=new _.B7,this._log=u.Bx.Logging.getLogger("editor.SynonymsModelImpl")}}!function(e){var t=e.emptySynonymsStats={numberOfMeanings:0,numberOfSynonymsByMeanings:[],numberOfSynonymsTotal:0};const i=e=>({numberOfMeanings:1,numberOfSynonymsByMeanings:[e.length],numberOfSynonymsTotal:e.length}),r=e=>e.reduce(((e,t)=>({numberOfMeanings:e.numberOfMeanings+1,numberOfSynonymsByMeanings:[...e.numberOfSynonymsByMeanings,t.words.length],numberOfSynonymsTotal:e.numberOfSynonymsTotal+t.words.length})),t);e.getSynonymsStats=e=>(0,d.pipe)(e,C.fold(i,r));const n=(e,t)=>{const i=t.findIndex((t=>t===e));return{meaningIndex:0,synonymIndexInGroup:i,synonymIndexAbs:i}},s={meaningIndex:-1,synonymIndexInGroup:-1,synonymIndexAbs:-1};e.getSynonymStats=(e,t)=>(0,d.pipe)(t,C.fold((t=>n(e,t)),(t=>((e,t)=>t.reduce((({result:t,numberOfLookedSynonyms:i},r,s)=>{const a=n(e,r.words).synonymIndexInGroup;return a>-1?{result:{meaningIndex:s,synonymIndexInGroup:a,synonymIndexAbs:i+a},numberOfLookedSynonyms:i}:{result:t,numberOfLookedSynonyms:i+r.words.length}}),{result:s,numberOfLookedSynonyms:0}).result)(e,t)))),e.getTimeToClose=e=>(0,d.pipe)(e,(e=>b.Yr.Timestamp.subtract(b.Yr.Timestamp.now(),e)),(e=>e/1e3))}(s||(s={}))},41432:(e,t,i)=>{i.d(t,{$:()=>c});var r=i(50659),n=i(27917),s=i(11864);const a={position:"absolute",top:s.Ks.percent(40),width:s.Ks.percent(100)},o={position:"absolute",top:s.Ks.px(-9999),left:s.Ks.px(-9999),visibility:"hidden"},l=s.Ks.stylesheet({spinner:[a],wrapper:[{display:"flex",height:"100vh"}],preload:[o]});class c extends r.Component{render(){return r.createElement(d,null,r.createElement(n.n3,null))}}const d=({children:e})=>r.createElement("div",{className:l.preload},e)},63911:(e,t,i)=>{i.d(t,{K:()=>g});var r=i(23988),n=i(50659),s=i(84647),a=i(87574),o=i(78674),l=i(65390),c=i(72900),d=i(5828),m=i(13801),p=i(9506),h=i(54322);class u extends n.Component{componentDidMount(){const e=this._el.children;this.props.onElementsReady({header:e[0].outerHTML,stats:e[1].outerHTML,text:e[2].outerHTML,footer:e[3].outerHTML})}render(){const{model:e}=this.props,t=(i=e.plagiarism,(0,s.pipe)(i,l.filter((e=>e.state===o.p.PlagiarismCheckingState.CHECKED)),l.map((e=>e.sortedAlerts)),l.getOrElse((()=>[]))));var i;return n.createElement("div",{ref:e=>{null!==e&&(this._el=e)}},n.createElement(d.cA,{title:e.title}),n.createElement(d.Su,{model:e}),n.createElement("div",null,n.createElement(p._,{html:e.dedHTML,title:e.title,alerts:e.sortedAlerts,plagiarism:t}),n.createElement(m.l,{alerts:e.sortedAlerts,plagiarism:t})),n.createElement(d.ol,null))}constructor(...e){super(...e),(0,r._)(this,"_el",void 0)}}class g extends n.Component{_prepareHTML(e){return'<!doctype html><html lang="en" style="--rem: 23.8;"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><title>Report</title><style>'+(0,h.X3)()+"</style></head>"+`<body>${e}</body></html>`}render(){const{reportViewModel:e}=this.props;return n.createElement(a.F.div,{className:c.xn.invisible},e.reportData.view((0,s.flow)(l.map((t=>n.createElement(u,{model:t,onElementsReady:({header:t,footer:i,stats:r,text:n})=>e.generateReport(this._prepareHTML(r+n),t,i)}))),l.toNullable)))}}},72900:(e,t,i)=>{i.d(t,{hz:()=>y,xn:()=>k});var r=i(11864),n=i(29120),s=i(27199),a=i(14754);const o=44*a.D,l=144*a.D,c=700*a.D,d=12*a.D,m=16*a.D,p=14*a.D,h=p+(m-p)/2-4,u=8.25*a.D,g=.6*a.D;n.b.cssRule("html",{fontSize:r.Ks.px(p)});const f="report-",_={invisible:`${f}invisible`,markBase:`${f}markBase`,markSuccess:`${f}markSuccess`,akkuratWrapper:`${f}akkuratWrapper`,content:`${f}content`,textContent:`${f}textContent`,text:`${f}text`,superscriptContainer:`${f}superscriptContainer`,superscript:`${f}superscript`,alertTableContainer:`${f}alertTableContainer`,alertTable:`${f}alertTable`,alertTableTd:`${f}alertTableTd`,alertTableTdIndex:`${f}alertTableTdIndex`,alertTableTdExample:`${f}alertTableTdExample`,alertTableTdPlagiarismSource:`${f}alertTableTdPlagiarismSource`,alertTableHighlightText:`${f}alertTableHighlightText`,separatorRemover:`${f}separatorRemover`,plagiarismLink:`${f}plagiarismLink`},y=_.superscriptContainer,b={borderBottomColor:r.Ks.important("transparent"),textDecoration:r.Ks.important("none"),fontWeight:r.Ks.important("normal"),fontStyle:r.Ks.important("normal")},v={boxSizing:"border-box",margin:"0 -8px",paddingRight:r.Ks.px(o),paddingLeft:r.Ks.px(l),width:r.Ks.px(c),$nest:{thead:{display:"table-row-group"}}},C={padding:`${r.Ks.px(11*a.D)} ${r.Ks.px(16*a.D)} ${r.Ks.px(11*a.D)} 0`,borderTop:`1px solid ${s.Q1.CoreNeutral20}`,verticalAlign:"top",fontSize:r.Ks.px(d),lineHeight:r.Ks.px(m),breakInside:"avoid",$nest:{"&:last-of-type":{paddingRight:0}}},k={akkuratWrapper:r.Ks.joinClasses([_.akkuratWrapper,n.b.style({fontWeight:"normal",fontFamily:"'Akkurat Std', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', sans-serif, Arial","-webkit-font-smooting":"antialiased","-moz-osx-font-smoothing":"grayscale"})]),content:r.Ks.joinClasses([_.content,n.b.style(v)]),textContent:r.Ks.joinClasses([_.textContent,n.b.style(v,{fontSize:r.Ks.px(p),pageBreakBefore:"always"})]),text:r.Ks.joinClasses([_.text,n.b.style({lineHeight:r.Ks.px(48),$nest:{"& *":{animation:r.Ks.important("none")},"& .ql-container [class*=-placeholder]":{display:"none"},"& .ql-clipboard":{display:"none"}}})]),superscriptContainer:r.Ks.joinClasses([_.superscriptContainer,n.b.style({position:"relative",bottom:r.Ks.px(h),display:"inline-block",width:0,height:0,whiteSpace:"nowrap",fontSize:r.Ks.px(u)})]),superscript:r.Ks.joinClasses([_.superscript,n.b.style(b,{padding:`0 ${r.Ks.px(g)}`,whiteSpace:"nowrap",$nest:{"&:not(:last-child):after":{content:"','"}}})]),alertTableContainer:r.Ks.joinClasses([_.alertTableContainer,n.b.style(v,{paddingLeft:0,pageBreakBefore:"always"})]),alertTable:r.Ks.joinClasses([_.alertTable,n.b.style({width:r.Ks.percent(100),borderCollapse:"collapse",$nest:{[`& tr:first-of-type .${_.alertTableTd}`]:{borderTopWidth:0},"& [class*=-or]":{marginRight:r.Ks.px(4*a.D),marginLeft:0,fontSize:r.Ks.px(d)},"& [class*=-removeOrContainer]":{flexBasis:"auto",$nest:{"& [class*=-itemRemove]":{marginRight:r.Ks.px(4*a.D),marginBottom:0,padding:0,$nest:{"& [class*=-deleteAll]":{verticalAlign:"middle"}}},"& [class*=-itemContext]":{marginRight:r.Ks.px(4*a.D),color:s.Q1.CoreNeutral60,fontStyle:"italic",fontSize:r.Ks.px(d)}}},"& [class*=-itemOriginal], & [class*=-itemRemove]":{backgroundColor:"transparent",color:s.Q1.CoreRed50,fontSize:r.Ks.px(d),lineHeight:r.Ks.px(m),paddingLeft:0,marginBottom:0},"& [class*=-itemOriginal]":{marginRight:0},"& [class*=-itemOriginal]:after":{margin:"-5px 4px 0",color:s.Q1.CoreNeutral60,fontSize:r.Ks.px(d),lineHeight:r.Ks.px(m)},"& [class*=-itemInsert]":{margin:0,padding:0,backgroundColor:"transparent",color:s.Q1.CoreGreen60,fontSize:r.Ks.px(d),lineHeight:r.Ks.px(m)},"& [class*=-itemInsert]:not(:last-child):after":{display:"inline-block",marginRight:"4px",color:s.Q1.CoreNeutral60,content:"','",fontSize:r.Ks.px(d),lineHeight:r.Ks.px(m)},"& [class*=-replacements_labels-diff]":{fontWeight:"normal"},"& [class*=-replacements_labels-list]":{marginBottom:0}}})]),alertTableTd:r.Ks.joinClasses([_.alertTableTd,n.b.style(C)]),alertTableTdIndex:r.Ks.joinClasses([_.alertTableTdIndex,n.b.style(C,{width:r.Ks.px(l),borderTopWidth:0,color:s.Q1.CoreNeutral50,textAlign:"right"})]),alertTableTdExample:r.Ks.joinClasses([_.alertTableTdExample,n.b.style(C,{maxWidth:r.Ks.px(350*a.D)})]),alertTableTdPlagiarismSource:r.Ks.joinClasses([_.alertTableTdPlagiarismSource,n.b.style(C,{maxWidth:r.Ks.px(190*a.D),wordWrap:"break-word"})]),alertTableHighlightText:r.Ks.joinClasses([_.alertTableHighlightText,n.b.style({color:s.Q1.CoreNeutral60,fontStyle:"italic",lineHeight:r.Ks.px(m)})]),markBase:r.Ks.joinClasses([_.markBase,n.b.style({$nest:{"@media print":{borderBottomWidth:r.Ks.important(r.Ks.px(3))}}})]),markSuccess:r.Ks.joinClasses([_.markSuccess,n.b.style({$nest:{"@media print":{backgroundColor:s.Q1.CoreNeutral0}}})]),separatorRemover:r.Ks.joinClasses([_.separatorRemover,n.b.style({position:"fixed",top:0,width:r.Ks.percent(100),height:r.Ks.px(3),backgroundColor:s.Q1.CoreNeutral0})]),plagiarismLink:r.Ks.joinClasses([_.plagiarismLink,n.b.style({display:"block",color:s.Q1.CoreBlue50})]),invisible:r.Ks.joinClasses([_.invisible,r.Ks.style({position:"absolute",visibility:"hidden"})])},x=e=>({position:"fixed",left:r.Ks.px(160),zIndex:-1,width:e});n.b.cssRule("[data-vertical-underline-start]:before",x(r.Ks.px(60)),{height:r.Ks.percent(100),borderRight:`${r.Ks.px(4)} solid`,content:"' '"},{"-webkit-print-color-adjust":"exact !important"}),n.b.cssRule("[data-vertical-underline-body]",x(r.Ks.px(60))),n.b.cssRule("[data-vertical-underline-body]:after",x(r.Ks.px(60)),{height:r.Ks.percent(100),borderRight:`${r.Ks.px(4)} solid`,background:s.Q1.CoreNeutral0,content:"' '"},{"-webkit-print-color-adjust":"exact !important"}),n.b.cssRule("[data-vertical-underline-index]",b,x(r.Ks.px(55)),{height:"inherit",backgroundColor:s.Q1.CoreNeutral0,textAlign:"right",fontSize:r.Ks.px(u),lineHeight:r.Ks.px(u)},{"-webkit-print-color-adjust":"exact !important"}),n.b.cssRule("[data-vertical-underline-index]:before",{display:"block",boxSizing:"border-box",width:r.Ks.px(65),height:r.Ks.px(6),borderTop:`${r.Ks.px(6)} solid ${s.Q1.CoreNeutral0}`,content:"' '"},{"-webkit-print-color-adjust":"exact !important"}),n.b.cssRule("[data-vertical-underline-end]:after",{position:"fixed",left:0,zIndex:-1,display:"block",width:r.Ks.px(229),height:r.Ks.percent(100),background:s.Q1.CoreNeutral0,content:"' '"},{"-webkit-print-color-adjust":"exact !important"})},5828:(e,t,i)=>{i.d(t,{Su:()=>h,cA:()=>u,ol:()=>g,qq:()=>p});var r=i(50659),n=i(84647),s=i(57616),a=i(50581),o=i(65390),l=i(22835),c=i(72900),d=i(32717);const{classes:m}=a,p=e=>r.createElement("div",{className:m(c.xn.akkuratWrapper,e.className),style:e.style},e.children),h=({model:e})=>r.createElement(p,{className:c.xn.content},r.createElement("div",{className:c.xn.separatorRemover}),r.createElement(d.Cc,{title:e.title,author:o.some(e.author)}),r.createElement(d.BP,{stats:e.stats}),r.createElement(d.yY,{score:e.score,critical:e.criticalIssues,advanced:e.advancedIssues}),(0,n.pipe)(e.plagiarism,o.map((e=>r.createElement(d.d6,{plagiarismData:e}))),o.toNullable),!l.RI(e.issues)&&r.createElement(d.MG,{issues:e.issues}),r.createElement(d.Y1,{stats:e.stats})),u=({title:e})=>r.createElement(p,{style:{width:"100%",marginLeft:"17.4857px",marginRight:"38.4686px",color:"#becafa",letterSpacing:"0.1px",position:"absolute",top:0}},r.createElement("div",{style:{width:144,position:"absolute",top:24,left:8}},r.createElement(s.e,{style:{height:"auto",width:120}})),r.createElement("p",{style:{position:"absolute",left:150,width:1060,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",borderBottom:"2px solid #e4e6f2",transform:"scale(0.563)",transformOrigin:"top left",paddingBottom:"21px",top:12,fontSize:"19px"}},"Report: ",e)),g=()=>r.createElement(p,{style:{marginLeft:"128.8807px",marginRight:"25.4686px",width:"100%",fontSize:"19px",color:"#becafa",letterSpacing:"0.1px",lineHeight:"90px"}},r.createElement("div",{style:{position:"absolute",bottom:0,left:-65,transform:"scale(0.563)",width:1060,zIndex:1e3,borderTop:"1px solid #e4e6f2"}},"Report was generated on ",(new Date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),r.createElement("span",{style:{float:"right"}},"Page ",r.createElement("span",{className:"pageNumber"})," of ",r.createElement("span",{className:"totalPages"}))))},13801:(e,t,i)=>{i.d(t,{l:()=>g});var r=i(10334),n=i(50659),s=i(84647),a=i(62597),o=i(26251),l=i(325),c=i(88219),d=i(66202),m=i(36840),p=i(65390),h=i(72900),u=i(5828);const g=({alerts:e,plagiarism:t})=>t.length+e.length===0?null:n.createElement(u.qq,{className:h.xn.alertTableContainer},n.createElement("table",{className:h.xn.alertTable},n.createElement("tbody",null,e.map(((e,t)=>n.createElement(f,{key:e.id,alert:e,index:t}))),t.map(((t,i)=>n.createElement(_,{key:t.id,alert:t,index:i+e.length})))))),f=({alert:e,index:t})=>n.createElement("tr",null,n.createElement("td",{className:h.xn.alertTableTdIndex},t+1,"."),n.createElement("td",{className:h.xn.alertTableTdExample},(0,s.pipe)(e.content,d.fold((e=>n.createElement("span",{className:h.xn.alertTableHighlightText},b(v(e)))),(e=>n.createElement(c.gs,{replacementsLabels:e,onClick:()=>m.Yi,layoutDensity:o.p.Density.cozy,a11yContrast:!1}))))),n.createElement("td",(0,r._)({className:h.xn.alertTableTd},l.v.renderToHtml(e.categoryHuman))),n.createElement("td",{className:h.xn.alertTableTd},a.J.OutcomeId.fromOutcomeId(e.lensId))),_=({alert:e,index:t})=>n.createElement("tr",null,n.createElement("td",{className:h.xn.alertTableTdIndex},t+1,"."),n.createElement("td",{className:h.xn.alertTableTdExample},n.createElement("span",{className:h.xn.alertTableHighlightText},b(v(e.highlightTexts)))),n.createElement("td",{className:h.xn.alertTableTdPlagiarismSource},n.createElement(C,{alert:e})),n.createElement("td",{className:h.xn.alertTableTd},a.J.OutcomeId.fromOutcomeId(e.lensId))),y=300;function b(e){return e.length>y?n.createElement(n.Fragment,null,e.substr(0,y-1),"…"):n.createElement(n.Fragment,null,e)}function v(e){return 1===e.length?e[0]:Array.from(new Set(e)).join("; ")}const C=({alert:e})=>n.createElement(n.Fragment,null,e.title,"web"===e.plagiarismType.source&&(0,s.pipe)(e.plagiarismType.url,p.map((e=>n.createElement("a",{href:e,className:h.xn.plagiarismLink},e))),p.toNullable))},9506:(e,t,i)=>{i.d(t,{_:()=>c});var r=i(50659),n=i(65390),s=i(72900),a=i(5828),o=i(32717),l=i(54322);const c=({html:e,title:t,alerts:i,plagiarism:l})=>r.createElement(a.qq,{className:s.xn.textContent},r.createElement(o.Cc,{title:t,author:n.none}),r.createElement(d,{alerts:i,plagiarism:l,html:e})),d=({html:e,alerts:t,plagiarism:i})=>{const n=(0,l.W4)(e,t,i);return r.createElement("div",{className:s.xn.text,dangerouslySetInnerHTML:{__html:n}})}},12109:(e,t,i)=>{i.d(t,{k5:()=>v,Y1:()=>C,UA:()=>b});var r=i(10334),n=i(17171),s=i(69384),a=i(50659),o=i(86922),l=i(11864),c=i(29120),d=i(27199),m=i(14754),p=i(82287);const h="report-sections-document_insights-",u={insightsSection:`${h}insightsSection`,insightTable:`${h}insightTable`,insightHeader:`${h}insightHeader`,insightBody:`${h}insightBody`,insightTextCell:`${h}insightTextCell`,insightTextHeader:`${h}insightTextHeader`,insightScoreCell:`${h}insightScoreCell`,insightScore:`${h}insightScore`},g={paddingRight:l.Ks.px(32*m.D),width:l.Ks.px(321*m.D)},f={width:l.Ks.px(191*m.D),verticalAlign:"top",textTransform:"lowercase"},_={insightsSection:l.Ks.joinClasses([u.insightsSection,c.b.style(p.f1,{$nest:{"&:not(:first-child)":{marginTop:l.Ks.px(24*m.D)}}})]),insightTable:l.Ks.joinClasses([u.insightTable,c.b.style(p.bi,{marginTop:l.Ks.px(24*m.D),width:l.Ks.px(512*m.D)})]),insightHeader:l.Ks.joinClasses([u.insightHeader,c.b.style({letterSpacing:0,fontWeight:"bold",fontSize:l.Ks.px(18*m.D),lineHeight:l.Ks.px(32*m.D)})]),insightBody:l.Ks.joinClasses([u.insightBody,c.b.style({color:d.Q1.CoreNeutral50,letterSpacing:l.Ks.px(.11*m.D),fontSize:l.Ks.px(13*m.D),lineHeight:l.Ks.px(20*m.D)})]),insightTextCell:l.Ks.joinClasses([u.insightTextCell,c.b.style(g)]),insightTextHeader:l.Ks.joinClasses([u.insightTextHeader,c.b.style(g,{textTransform:"capitalize"})]),insightScoreCell:l.Ks.joinClasses([u.insightScoreCell,c.b.style(f)]),insightScore:l.Ks.joinClasses([u.insightScore,c.b.style(f,{color:d.Q1.CoreBlue50,letterSpacing:l.Ks.px(-.1*m.D)})])},y=({header:e,description:t,measure:i,score:r})=>a.createElement("section",{className:_.insightsSection},a.createElement("table",{className:_.insightTable},a.createElement("tbody",null,a.createElement("tr",{className:_.insightHeader},a.createElement("td",{className:_.insightTextHeader},e),a.createElement("td",{className:_.insightScore},r)),a.createElement("tr",{className:_.insightBody},a.createElement("td",{className:_.insightTextCell},t),a.createElement("td",{className:_.insightScoreCell},i))))),b=e=>{var{score:t}=e,i=(0,s._)(e,["score"]);return a.createElement(y,(0,n._)((0,r._)({},i),{score:`${"number"!=typeof t||t<0?0:t>100?100:Math.round(t)}%`}))},v=e=>{var{score:t}=e,i=(0,s._)(e,["score"]);return a.createElement(y,(0,n._)((0,r._)({},i),{score:""+("number"!=typeof t?0:Math.round(10*t)/10)}))},C=({stats:e})=>{const t=a.useContext(o.S.Context);return a.createElement("div",null,a.createElement(b,{header:t.performance.uniqueWordsTitle,description:t.performance.report.uniqueWordsDescription,measure:t.performance.uniqueWordsTitle,score:e.uniqueWords}),a.createElement(b,{header:t.performance.rareWordsTitle,description:t.performance.rareWords,measure:t.performance.rareWordsTitle,score:e.rareWords}),a.createElement(v,{header:t.performance.wordLengthTitle,description:t.performance.report.wordLengthDescription,measure:t.performance.report.wordLengthMeasure,score:e.wordLength}),a.createElement(v,{header:t.performance.sentenceLengthTitle,description:t.performance.report.sentenceLengthDescription,measure:t.performance.report.sentenceLengthMeasure,score:e.sentenceLength}))}},32717:(e,t,i)=>{i.d(t,{Y1:()=>te.Y1,BP:()=>v,d6:()=>z,yY:()=>D,Cc:()=>u,MG:()=>ee});var r=i(50659),n=i(84647),s=i(65390),a=i(11864),o=i(29120),l=i(27199),c=i(14754);const d="report-sections-title-",m={author:`${d}author`,titleSection:`${d}titleSection`,title:`${d}title`,largeTitle:`${d}largeTitle`,mediumTitle:`${d}mediumTitle`,smallTitle:`${d}smallTitle`,titleContainer:`${d}titleContainer`},p={display:"-webkit-box",overflow:"hidden",color:l.Q1.CoreNeutral90,wordWrap:"break-word",hyphens:"auto",fontWeight:"bold","-webkit-line-clamp":5,"-webkit-box-orient":"vertical"},h={author:a.Ks.joinClasses([m.author,o.b.style({color:l.Q1.CoreNeutral50,letterSpacing:0,fontSize:a.Ks.px(15*c.D),lineHeight:a.Ks.px(24*c.D)})]),titleSection:a.Ks.joinClasses([m.titleSection,o.b.style({marginBottom:a.Ks.px(22*c.D),pageBreakInside:"avoid"})]),title:a.Ks.joinClasses([m.title,o.b.style(p)]),largeTitle:a.Ks.joinClasses([m.largeTitle,o.b.style(p,{marginBottom:a.Ks.px(22*c.D),fontSize:a.Ks.px(28*c.D),lineHeight:a.Ks.px(40*c.D)})]),mediumTitle:a.Ks.joinClasses([m.mediumTitle,o.b.style(p,{fontSize:a.Ks.px(22*c.D),lineHeight:a.Ks.px(32*c.D)})]),smallTitle:a.Ks.joinClasses([m.smallTitle,o.b.style(p,{fontSize:a.Ks.px(18*c.D),lineHeight:a.Ks.px(32*c.D)})]),titleContainer:a.Ks.joinClasses([m.titleContainer,o.b.style({overflow:"hidden",textOverflow:"ellipsis"})])},u=({title:e,author:t})=>r.createElement("section",{className:h.titleSection},r.createElement("h1",{className:e.length<100?h.largeTitle:e.length<200?h.mediumTitle:h.smallTitle},e),(0,n.pipe)(t,s.map((e=>r.createElement("p",{className:h.author},"by ",e))),s.toNullable));var g=i(34717),f=i(82287);const _="report-sections-general_metrics-",y={generalMetricsSection:`${_}generalMetricsSection`,generalMetricsHeader:`${_}generalMetricsHeader`,metrics:`${_}metrics`},b={generalMetricsSection:a.Ks.joinClasses([y.generalMetricsSection,o.b.style(f.f1,{marginBottom:a.Ks.px(14*c.D),$nest:{"& table":{width:a.Ks.percent(100),whiteSpace:"nowrap"},"& tbody":{verticalAlign:"top"}}})]),generalMetricsHeader:a.Ks.joinClasses([y.generalMetricsHeader,o.b.style(f.Co,{margin:`${a.Ks.px(23*c.D)} 0 ${a.Ks.px(4*c.D)}`})]),metrics:a.Ks.joinClasses([y.metrics,o.b.style({color:l.Q1.CoreBlue50,letterSpacing:0,fontWeight:"bold",fontSize:a.Ks.px(15*c.D),lineHeight:a.Ks.px(23*c.D),$nest:{"& td":{width:a.Ks.percent(21.875)}}})])},v=({stats:e})=>r.createElement("section",{className:b.generalMetricsSection},r.createElement("h2",{className:b.generalMetricsHeader},"General metrics"),r.createElement("table",null,r.createElement("tbody",null,r.createElement("tr",{className:b.metrics},r.createElement("td",null,e.chars.toLocaleString("en-US")),r.createElement("td",null,e.words.toLocaleString("en-US")),r.createElement("td",null,e.sentences),r.createElement("td",null,g.Xq(e.readingTime)),r.createElement("td",null,g.Xq(e.speakingTime))),r.createElement("tr",{className:f.xn.text},r.createElement("td",null,"characters"),r.createElement("td",null,"words"),r.createElement("td",null,"sentences"),r.createElement("td",null,"reading",r.createElement("br",null),"time"),r.createElement("td",null,"speaking",r.createElement("br",null),"time")))));var C,k=i(27917),x=i(90660);!function(e){e.checkMark="report-components-checkMark"}(C||(C={})),a.Ks.joinClasses([C.checkMark,o.b.style({display:"inline-block",marginRight:a.Ks.px(7*c.D),marginBottom:a.Ks.px(4*c.D),width:a.Ks.px(16*c.D),height:a.Ks.px(16*c.D),verticalAlign:"middle"})]);const S="report-components-radial_progress-";var E;!function(e){e.radialProgressBar=`${S}radialProgressBar`,e.radialProgressText=`${S}radialProgressText`,e.radialProgressDescription=`${S}radialProgressDescription`}(E||(E={}));const w={radialProgressBar:a.Ks.joinClasses([E.radialProgressBar,o.b.style({width:a.Ks.px(71*c.D),height:a.Ks.px(71*c.D),fontWeight:"bold",transform:`translateX(${a.Ks.px(-6*c.D)})`,fill:l.Q1.CoreNeutral90})]),radialProgressText:a.Ks.joinClasses([E.radialProgressText,o.b.style({fontSize:"20px"})]),radialProgressDescription:a.Ks.joinClasses([E.radialProgressDescription,o.b.style({fontWeight:"normal",fontSize:"11px",fill:l.Q1.CoreNeutral60})])},T=({percentage:e,colorType:t,iconSize:i,description:n})=>r.createElement(x._,{percentage:e,colorType:t,iconSize:i,description:n,theme:{radialProgressBar:w.radialProgressBar,radialProgressText:w.radialProgressText,radialProgressDescription:w.radialProgressDescription}}),M="report-sections-score-",A={scoreTable:`${M}scoreTable`,issuesSummary:`${M}issuesSummary`,issueCounters:`${M}issueCounters`,issueCounter:`${M}issueCounter`,issuesLeftBlock:`${M}issuesLeftBlock`,total:`${M}total`,score:`${M}score`,writingIssues:`${M}wrtitingIssues`,critical:`${M}critical`,advanced:`${M}advanced`},K={display:"flex",verticalAlign:"top",alignItems:"center",$nest:{"& span":{paddingLeft:a.Ks.rem(.8)}}},N={display:"inline-block"},B={scoreTable:a.Ks.joinClasses([A.scoreTable,o.b.style(f.bi,{margin:`${a.Ks.px(22*c.D)} 0 ${a.Ks.px(5*c.D)}`,$nest:{"& th":{paddingBottom:a.Ks.px(7*c.D)},[`& .${A.score}`]:{width:a.Ks.percent(43.75)},[`& .${A.writingIssues}`]:{width:a.Ks.percent(56.25)}}})]),issuesSummary:a.Ks.joinClasses([A.issuesSummary,o.b.style(f.J9,K)]),issueCounters:a.Ks.joinClasses([A.issueCounters,o.b.style(f.J9,K,{paddingTop:a.Ks.px(30*c.D),whiteSpace:"nowrap"})]),issueCounter:a.Ks.joinClasses([A.issueCounter,o.b.style({letterSpacing:a.Ks.px(.2*c.D),fontWeight:"bold",fontSize:a.Ks.px(15*c.D),lineHeight:a.Ks.px(19*c.D)})]),issuesLeftBlock:a.Ks.joinClasses([A.issuesLeftBlock,o.b.style(N)]),total:a.Ks.joinClasses([A.total,o.b.style(N,{width:a.Ks.percent(38.88),$nest:{[`& .${A.issueCounter}`]:{color:l.Q1.CoreNeutral90,letterSpacing:0,fontSize:a.Ks.px(18*c.D)}}})]),critical:a.Ks.joinClasses([A.critical,o.b.style(N,{width:a.Ks.percent(38.88),$nest:{[`& .${A.issueCounter}`]:{color:l.Q1.CoreRed40}}})]),advanced:a.Ks.joinClasses([A.advanced,o.b.style(N,{width:a.Ks.percent(22.24),$nest:{[`& .${A.issueCounter}`]:{color:l.Q1.CoreYellow60}}})]),score:a.Ks.joinClasses([A.score]),writingIssues:a.Ks.joinClasses([A.writingIssues])};function I(e){return e>85?x._.ColorType.eggBlue:e>60?x._.ColorType.dandelion:x._.ColorType.radicalRed}const $=({issues:e,className:t,text:i})=>r.createElement("div",{className:t},r.createElement("div",{className:B.issueCounter},e||r.createElement(k.In.Checkmark,null)),i),F=({critical:e,advanced:t})=>r.createElement("td",{className:B.issueCounters},r.createElement($,{className:B.total,issues:e+t,text:"Issues left"}),r.createElement($,{className:B.critical,issues:e,text:"Critical"}),r.createElement($,{className:B.advanced,issues:t,text:"Advanced"})),R=({score:e})=>r.createElement("td",null,r.createElement(T,{colorType:I(e),iconSize:x._.IconSize.pdf,percentage:e}),r.createElement("p",{className:f.xn.text},"This text scores better than ",e,"%",r.createElement("br",null),"of all texts checked by Grammarly")),L=()=>r.createElement("section",{className:f.xn.section,"data-name":"no-writing-issues"},r.createElement("table",{className:B.scoreTable},r.createElement("thead",{className:f.xn.sectionHeader},r.createElement("tr",null,r.createElement("th",{className:B.writingIssues},"Writing Issues"))),r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",{className:B.issuesSummary},r.createElement(k.In.Checkmark,null),r.createElement("span",null,"No issues found")))))),P=({score:e,critical:t,advanced:i})=>r.createElement("section",{className:f.xn.section,"data-name":"section-score-"+e},r.createElement("table",{className:B.scoreTable},r.createElement("thead",{className:f.xn.sectionHeader},r.createElement("tr",null,r.createElement("th",{className:B.score},"Score"),r.createElement("th",{className:B.writingIssues},"Writing Issues"))),r.createElement("tbody",null,r.createElement("tr",null,r.createElement(R,{score:e}),r.createElement(F,{critical:t,advanced:i}))))),D=({score:e,critical:t,advanced:i})=>t||i?r.createElement(P,{score:e,critical:t,advanced:i}):r.createElement(L,null);var H=i(86922),O=i(74416),Q=i(78674);const V="report-sections-plagiarism-",U={plagiarismSection:`${V}plagiarismSection`,plagiarismSectionHeader:`${V}plagiarismSectionHeader`,original:`${V}original`,plagiarismMark:`${V}plagiarismMark`,score:`${V}score`,percent:`${V}percent`,sources:`${V}sources`,sourcesCount:`${V}sourcesCount`,scoreDescription:`${V}scoreDescription`},W={plagiarismSection:a.Ks.joinClasses([U.plagiarismSection,o.b.style(f.f1,{pageBreakAfter:"always"})]),plagiarismSectionHeader:a.Ks.joinClasses([U.plagiarismSectionHeader,o.b.style(f.Co,{margin:`${a.Ks.px(23*c.D)} 0 ${a.Ks.px(10*c.D)}`})]),original:a.Ks.joinClasses([U.original,o.b.style(f.J9,{display:"flex",alignItems:"center"})]),plagiarismMark:a.Ks.joinClasses([U.plagiarismMark,o.b.style({marginRight:a.Ks.rem(.8)})]),score:a.Ks.joinClasses([U.score,o.b.style(f.J9,{width:a.Ks.percent(21.875)})]),percent:a.Ks.joinClasses([U.percent,o.b.style({marginTop:0,width:a.Ks.px(64*c.D),textAlign:"center"})]),sources:a.Ks.joinClasses([U.sources,o.b.style(f.J9,{paddingTop:a.Ks.px(28*c.D),paddingBottom:0,width:a.Ks.percent(78.125),verticalAlign:"top"})]),sourcesCount:a.Ks.joinClasses([U.sourcesCount,o.b.style({color:l.Q1.CoreNeutral90,letterSpacing:0,fontWeight:"bold",fontSize:a.Ks.px(18*c.D),lineHeight:a.Ks.px(18*c.D)})]),scoreDescription:a.Ks.joinClasses([U.scoreDescription,o.b.style(f.J9,{paddingTop:a.Ks.px(10*c.D),whiteSpace:"pre-line"})])},z=({plagiarismData:e})=>{const t=r.useContext(H.S.Context);return r.createElement("section",{className:W.plagiarismSection,"data-name":"section-plagiarism-"+(e.state===Q.p.PlagiarismCheckingState.CHECKED?e.score:-1)},r.createElement("h2",{className:W.plagiarismSectionHeader},"Plagiarism"),e.state===Q.p.PlagiarismCheckingState.NOT_CHECKED?r.createElement("p",{className:f.xn.text},"This text hasn’t been checked for plagiarism"):O.Q.isMin(e.score)?r.createElement("p",{className:W.original},r.createElement(k.In.Checkmark,{className:W.plagiarismMark}),"This text seems 100% original. Grammarly found no matching text on",r.createElement("br",null),"the Internet or in ProQuest’s databases."):r.createElement("table",{className:f.xn.genericTable},r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",{className:W.score},r.createElement(T,{colorType:x._.ColorType.lightVisteria,iconSize:x._.IconSize.pdf,percentage:O.Q.prism.reverseGet(e.score),description:"%"})),r.createElement("td",{className:W.sources},r.createElement("div",{className:W.sourcesCount},e.sources),e.sources>1?"sources":"source")),r.createElement("tr",null,r.createElement("td",{colSpan:2,className:W.scoreDescription},t.performance.report.plagiarismDescription(e.score,e.sources))))))},G="report-sections-writing_issues-",j={writingIssuesSection:`${G}writingIssuesSection`,writingIssuesTable:`${G}writingIssuesTable`,issueHeader:`${G}issueHeader`,categoryAmount:`${G}categoryAmount`,issueAmount:`${G}issueAmount`,circle:`${G}circle`,oval:`${G}oval`,generalTitle:`${G}generalTitle`,issueTitle:`${G}issueTitle`,categoryTitle:`${G}categoryTitle`,fakeHeader:`${G}fakeHeader`,progressBarCell:`${G}progressBarCell`,issueProgressBar:`${G}issueProgressBar`,issueContent:`${G}issueContent`,temporaryHeader:`${G}temporaryHeader`,progressBarBg:`${G}progressBarBg`},q={marginLeft:a.Ks.px(6*c.D),width:a.Ks.px(20*c.D),height:a.Ks.px(20*c.D),borderRadius:a.Ks.px(10*c.D),background:l.Q1.CoreRed40,color:l.Q1.CoreNeutral0,textAlign:"center",fontSize:a.Ks.px(12*c.D),lineHeight:a.Ks.px(20*c.D)},Y={paddingLeft:a.Ks.px(22*c.D),width:a.Ks.px(293*c.D),color:l.Q1.CoreNeutral90,letterSpacing:0,fontSize:a.Ks.px(14*c.D),lineHeight:a.Ks.px(24*c.D)},J={writingIssuesSection:a.Ks.joinClasses([j.writingIssuesSection,o.b.style({borderTop:`1px solid ${l.Q1.CoreNeutral30}`})]),writingIssuesTable:a.Ks.joinClasses([j.writingIssuesSection,o.b.style(f.bi,{position:"relative",marginBottom:a.Ks.px(22*c.D),width:a.Ks.px(437*c.D),$nest:{"& td, & th":{verticalAlign:"top",pageBreakInside:"avoid"}}})]),issueHeader:a.Ks.joinClasses([j.issueHeader,o.b.style({pageBreakAfter:"avoid"})]),categoryAmount:a.Ks.joinClasses([j.categoryAmount,o.b.style({width:a.Ks.px(32*c.D),fontWeight:"bold",lineHeight:a.Ks.px(22*c.D)})]),issueAmount:a.Ks.joinClasses([j.issueAmount,o.b.style({paddingRight:a.Ks.px(10*c.D),color:l.Q1.CoreRed40,textAlign:"right",fontWeight:"bold",fontSize:a.Ks.px(13*c.D),lineHeight:a.Ks.px(24*c.D)})]),circle:a.Ks.joinClasses([j.circle,o.b.style(q)]),oval:a.Ks.joinClasses([j.oval,o.b.style(q,{width:a.Ks.px(24*c.D)})]),generalTitle:a.Ks.joinClasses([j.generalTitle,o.b.style(Y)]),issueTitle:a.Ks.joinClasses([j.issueTitle,o.b.style(Y,{textTransform:"lowercase",fontWeight:"normal",$nest:{"&:first-letter":{textTransform:"capitalize"}}})]),categoryTitle:a.Ks.joinClasses([j.categoryTitle,o.b.style(Y,{fontWeight:"bold"})]),fakeHeader:a.Ks.joinClasses([j.fakeHeader,o.b.style({position:"absolute",top:0,left:0,width:a.Ks.percent(100),background:l.Q1.CoreNeutral0,lineHeight:a.Ks.px(24*c.D)})]),progressBarCell:a.Ks.joinClasses([j.progressBarCell,o.b.style({width:a.Ks.px(112*c.D)})]),issueProgressBar:a.Ks.joinClasses([j.issueProgressBar,o.b.style({marginTop:a.Ks.px(12*c.D),minWidth:a.Ks.px(5*c.D),height:a.Ks.px(5*c.D),borderRadius:a.Ks.px(6*c.D),background:`linear-gradient(to right, ${l.Q1.CoreRed30}, ${l.Q1.CoreRed40})`,boxShadow:`0 0 0 ${a.Ks.px(3*c.D)} ${l.Q1.CoreNeutral0}`})]),issueContent:a.Ks.joinClasses([j.issueContent,o.b.style({pageBreakInside:"avoid"})]),temporaryHeader:a.Ks.joinClasses([j.temporaryHeader,o.b.style({pageBreakInside:"avoid"})]),progressBarBg:a.Ks.joinClasses([j.progressBarBg,o.b.style({width:a.Ks.percent(100),borderRadius:a.Ks.px(6*c.D),backgroundColor:l.Q1.CoreNeutral10})])},Z=({maxIssues:e,count:t})=>{let i=t/e*100;return i>94&&i<98?i=94:i>=98&&(i=100),r.createElement("div",{className:J.progressBarBg},r.createElement("div",{className:J.issueProgressBar,style:{width:`${i}%`}}))},X=({category:e,categoryIssues:t})=>r.createElement("tr",{className:J.temporaryHeader},r.createElement("th",{className:J.categoryAmount},r.createElement("div",{className:t>99?J.oval:J.circle},t)),r.createElement("th",{className:J.categoryTitle},e),r.createElement("th",{className:J.progressBarCell})),ee=({issues:e})=>{let t=0;return r.createElement("section",{className:J.writingIssuesSection},r.createElement("h2",{className:f.xn.sectionHeader},"Writing Issues"),Object.entries(e).map((([e,i])=>{let r=0;return{category:e,issues:Object.entries(i).map((([e,i])=>(i>t&&(t=i),r+=i,{name:e,count:i}))),issuesCount:r}})).map((({category:e,issuesCount:i,issues:n})=>r.createElement("table",{key:e,className:J.writingIssuesTable},r.createElement("thead",{className:J.issueHeader},r.createElement(X,{category:e,categoryIssues:i})),r.createElement("tbody",null,n.map((({name:e,count:i})=>r.createElement("tr",{key:e,className:J.issueContent},r.createElement("td",{className:J.issueAmount},i),r.createElement("td",{className:J.issueTitle},e),r.createElement("td",null,r.createElement(Z,{maxIssues:t,count:i}))))))))))};var te=i(12109)},82287:(e,t,i)=>{i.d(t,{Co:()=>d,J9:()=>p,bi:()=>m,f1:()=>c,xn:()=>h});var r=i(11864),n=i(29120),s=i(27199),a=i(14754);const o="report-sections-",l={section:`${o}section`,sectionHeader:`${o}sectionHeader`,genericTable:`${o}genericTable`,text:`${o}text`},c={borderTop:`1px solid ${s.Q1.CoreNeutral30}`,pageBreakInside:"avoid"},d={marginTop:r.Ks.px(24*a.D),color:s.Q1.CoreNeutral90,letterSpacing:0,fontWeight:"bold",fontSize:r.Ks.px(18*a.D),lineHeight:r.Ks.px(32*a.D)},m={width:r.Ks.percent(100),tableLayout:"fixed",textAlign:"left"},p={color:s.Q1.CoreNeutral50,letterSpacing:r.Ks.px(.11*a.D),fontSize:r.Ks.px(13*a.D),lineHeight:r.Ks.px(20*a.D)},h={section:r.Ks.joinClasses([l.section,n.b.style(c)]),sectionHeader:r.Ks.joinClasses([l.sectionHeader,n.b.style(d)]),genericTable:r.Ks.joinClasses([l.genericTable,n.b.style(m)]),text:r.Ks.joinClasses([l.text,n.b.style(p)])}},54322:(e,t,i)=>{i.d(t,{W4:()=>l,X3:()=>c});var r=i(84647),n=i(15114),s=i(889),a=i(29120),o=i(72900);function l(e,t,i){return(0,r.pipe)(e,d,m(t),p(i,t.length+1),u,(e=>e.innerHTML))}const c=()=>a.b.getStyles()+`\n.${n.Xz.markBulkApplied&&n.Xz.markBulkApplied.split(/\s/)[0]} { border-bottom-style: hidden !important }`+`\n.${n.Xz.markSelected&&n.Xz.markSelected.split(/\s/)[0]} { background-color: transparent !important }`,d=e=>{const t=document.createElement("div");return t.innerHTML=e,t},m=e=>t=>(e.reduce(function(e){return(t,i,r)=>(i.getHighlightRanges().filter(s.l.isMainView).forEach((i=>{const n=e.querySelectorAll(`[${g.MARK_ID}="${i.meta.id}"]`);if(n.length>0){const e=n[n.length-1],i=function(e,t){const i=document.createElement("span");return i.className=o.xn.superscriptContainer,i.innerHTML=`<span class="${e} ${o.xn.superscript}" data-superscript>${t+1}</span>`,i}(e.classList.value,r);e.appendChild(i),t.push(i)}})),t)}(t),[]).forEach(_),Array.from(t.querySelectorAll("span."+o.hz)).forEach(f),t),p=(e,t=0)=>i=>(e.forEach(((e,r)=>e.getHighlightRanges().filter(s.l.isMainView).forEach((e=>{const n=i.querySelectorAll(`[${g.MARK_ID}="${e.meta.id}"]`),s=(t+r).toString();n.forEach((e=>e.setAttribute(g.VERTICAL_UNDERLINE,s))),Boolean(n[0])&&(n[0].setAttribute(g.VERTICAL_START,""),h(n[0],s),n[n.length-1].setAttribute(g.VERTICAL_END,""))})))),i),h=(e,t)=>e.insertAdjacentHTML("afterbegin",`<span ${g.VERTICAL_INDEX}>${t}</span><span ${g.VERTICAL_BODY}><br /></span>`),u=e=>(e.querySelectorAll(`[${g.VERTICAL_INDEX}]`).forEach((t=>{const i=t.textContent;e.querySelectorAll(`[${g.VERTICAL_UNDERLINE}="${i}"] [${g.VERTICAL_END}]`).forEach((e=>{e.removeAttribute(g.VERTICAL_END)}))})),e);var g;function f(e,t,i){var r,n;i.length>t+1&&(r=e,n=i[t+1],r.textContent.length-function(e,t){const i=document.createRange();return i.setStartAfter(e),i.setEndBefore(t),i.toString().length}(r,n)>=0)&&function(e){e.style.width="auto",e.parentElement.insertAdjacentElement("afterend",e)}(e)}function _(e){if(e.children.length>0&&e.previousSibling){const t=Array.from(e.children);e.innerHTML="",y(e.previousSibling).concat(t).sort(((e,t)=>Number(e.textContent)-Number(t.textContent))).forEach((t=>e.appendChild(t)))}}function y(e){let t=[];return e instanceof Element?(e.matches(`[${g.MARK_ID}]`)&&e.lastElementChild&&e.lastElementChild.classList.contains(o.hz)&&(t=Array.from(e.lastElementChild.children),e.lastElementChild.remove()),e.lastElementChild?t.concat(y(e.lastElementChild)):t):t}!function(e){e.MARK_ID="data-mark-id",e.VERTICAL_UNDERLINE="data-vertical-underline",e.VERTICAL_START="data-vertical-underline-start",e.VERTICAL_BODY="data-vertical-underline-body",e.VERTICAL_END="data-vertical-underline-end",e.VERTICAL_INDEX="data-vertical-underline-index"}(g||(g={}))},14754:(e,t,i)=>{i.d(t,{D:()=>r});const r=1.7},78450:(e,t,i)=>{i.d(t,{g:()=>m});var r=i(23988),n=i(84647),s=i(60575),a=i(41797),o=i(95168),l=i(6987),c=i(94855),d=i(77396);class m{get currentPlan(){return this._model.currentPlan}get offer(){return this._model.offer}get savedPrice(){return this._model.savedPrice}get nextPaymentDate(){return this._model.nextPaymentDate}constructor(e,t,i,m){(0,r._)(this,"_model",void 0),(0,r._)(this,"_modalOperations",void 0),(0,r._)(this,"_notificationsManager",void 0),(0,r._)(this,"_telemetry",void 0),(0,r._)(this,"_log",void 0),(0,r._)(this,"changePlan",void 0),(0,r._)(this,"_handleChangePlanError",void 0),(0,r._)(this,"close",void 0),this._model=e,this._modalOperations=t,this._notificationsManager=i,this._telemetry=m,this._log=s.Bx.Logging.getLogger("view.model.change.plan"),this.changePlan=()=>(this._telemetry.gnarSpec.changePlanConfirmationSwitchPlanButtonClick(this._model.daysToRenewal,this._model.currentPlanType,this._telemetry.pageId),a.H((0,n.pipe)(this._model.changePlan,c.qE(this._handleChangePlanError),d.hq)).pipe(o.M(this.close),l.n((()=>(this._telemetry.gnarSpec.changePlanFormSuccess(this._model.daysToRenewal,this._model.currentPlanType,this._telemetry.pageId),this._notificationsManager.enqueue("changePlanSuccess",{planName:this.offer.title}))))).toPromise()),this._handleChangePlanError=e=>{this._log.error(`Cannot change plan reason: ${e.reason}`,e.originalError);const t=s.sw.isErrorLike(e.originalError)&&e.originalError.message;this._telemetry.gnarSpec.changePlanFormFail(this._telemetry.pageId,`reason: ${e.reason}, error: ${t}`),this._notificationsManager.enqueue("error").toPromise()},this.close=()=>{this._modalOperations.onClose(),this._telemetry.gnarSpec.changePlanConfirmationCloseButtonClick(this._model.daysToRenewal,this._model.currentPlanType,this._telemetry.pageId)}}}},5731:(e,t,i)=>{i.d(t,{r:()=>_,B:()=>r});var r,n=i(50659),s=i(49490),a=i(84647),o=i(84906),l=i(99002),c=i(11089),d=i(90405),m=i(68594),p=i(95168),h=i(44869),u=i(83288),g=i(22835),f=i(59636);!function(e){let t;!function(e){e.editor="editor",e.checksFeed="checksFeed",e.navigation="navigation",e.menu="menu",e.title="title",e.support="support",e.formatting="formatting"}(t=e.Id||(e.Id={})),e.eq=h.OW({id:l.Eq,order:o.Eq}),e.ord=(0,a.pipe)(o._k,u.contramap(g.Up("order"))),e.show=s.pJ({id:l.wv,order:o.wv}),e.create=e=>({id:e,order:Object.values(t).findIndex((t=>t===e))});var i=e.Context=n.createContext(f.o.invariantContent("Focus"));e.createComponent=c.a.create(i),e.initTracking=(e,t)=>e.state.pipe(d.oE,m.i(1),p.M((e=>t.gnarSpec.focusSectionSwitched(t.pageId,e.id)))).subscribe()}(r||(r={}));var _,y=i(46669);!function(e){e.create=e=>({inFocus:e.isEditorFocused.pipe(m.i(1),y.F()),updateFocus:t=>t&&requestAnimationFrame((()=>e.restoreFocus("FocusManager")))})}(_||(_={}))},55638:(e,t,i)=>{i.d(t,{Jr:()=>r,b9:()=>$});var r,n,s=i(23988),a=i(32570),o=i(73231),l=i(2855),c=i(8471),d=i(92802),m=i(84647),p=i(84906),h=i(80074),u=i(63967),g=i(80159),f=i(78339),_=i(15491),y=i(83541),b=i(42543),v=i(80837),C=i(95168),k=i(6987),x=i(21216),S=i(36094),E=i(54988),w=i(45653),T=i(44869),M=i(65390),A=i(66202),K=i(76720),N=i(86562),B=i(58193),I=i(36840);!function(e){let t;!function(e){e.Initial="Initial",e.RemovedFromCAPIMapping="Removed From CAPI Mapping",e.IdNotResolved="Id Not Resolved",e.NotFound="Not Found",e.EmptyStateOnReconnect="Empty State On Reconnect",e.NativeInlineCardContent="Native Inline Card Content"}(t=e.NoSDUIReason||(e.NoSDUIReason={}))}(r||(r={})),function(e){e.eq=T.OW({highlightIndex:p.Eq,action:a.G.eq})}(n||(n={}));class ${getInlineItemForAlert(e){const t=(0,m.pipe)(this._alertsReader.getById(e),M.chain(u.Fc.getRawId));return(0,m.pipe)(this._sduiManager.state.pipe(f.p((0,d.AU)(o.k.isEmpty))),_.T((e=>(0,m.pipe)(t,A.fromOption((()=>r.NoSDUIReason.RemovedFromCAPIMapping)),A.chain((e=>(0,m.pipe)(this._sduiManager.alertIdResolver(l.W.AlertId.from(e)),A.fromOption((()=>r.NoSDUIReason.IdNotResolved))))),A.chain((e=>(0,m.pipe)(this._inlineSDUIManager.getInlineItemForAlert(e),A.fromOption((()=>r.NoSDUIReason.NotFound))))),A.mapLeft((t=>o.k.isEmpty(e)?r.NoSDUIReason.EmptyStateOnReconnect:t))))),y.skipBy(A.getEq(T.ee(m.constTrue),T.w_)))}_handleSduiCardAction(e){this._sduiViewModel.sduiActionEvents.next(e.action),this._appHandling(e)}_appHandling({action:{actions:e,scope:t},highlightIndex:i}){const r=e.filter((e=>"popAssistantFeed"===e.type||"pushAssistantFeed"===e.type||"focusAssistantCard"===e.type));(0,m.pipe)(r,M.fromPredicate((e=>e.length>0)),M.map((e=>{}))),e.forEach((e=>{switch(e.type){case"nextCard":case"prevCard":case"openSettings":case"openToneDetector":case"openFeedback":case"openLearnMore":case"transition":case"openCreateSnippetModal":case"nativeOpenAssistant":case"selectAlternative":case"highlightAlert":case"closePopover":case"interactPopover":case"openPerformanceScore":case"openGrammarlyGo":case"enablePlagiarismCheck":case"disablePlagiarismCheck":case"enableWritingExpertCheck":case"disableWritingExpertCheck":case"showHighlights":case"hideHighlights":case"notify":case"switchView":case"newRevision":case"popAssistantFeed":case"focusAssistantCard":case"stopApplyingAlerts":case"upgradeToPremium":case"removeRoot":return;case"nativeOpenUserSatisfactionFeedback":return this._inlineCardVM.events.next({type:g.G.Type.feedbackModalOpen});case"openLink":return void this.platformEnvironment.actions.openUrl(new K.U(e.url));case"copyToClipboard":return this._copyToClipboard(e.text,"somethingCopied");case"pushAssistantFeed":return this._pushFeed(e,t,i);case"applyAlerts":return void this._applyAlerts(e,t);case"closeCard":return this._inlineCardVM.events.next({type:g.G.Type.closed});case"removeAlerts":return void this._removeAlerts(e,t);default:(0,N.AS)(e)}}))}_removeAlerts(e,t){(0,N.V1)(t.alertRefs.length>0,"applyAlerts actions must have alerts");const i=this._sduiManager.alertIdResolver(l.W.AlertId.from(t.alertRefs[0]));(0,m.pipe)(i,B.Mi((e=>{this._inlineCardVM.events.next({type:g.G.Type.ignored,alertId:e})})))}_applyAlerts(e,t){(0,N.V1)(t.alertRefs.length>0,"applyAlerts actions must have alerts scope");const i=this._sduiManager.alertIdResolver(l.W.AlertId.from(t.alertRefs[0]));(0,N.V1)(M.isSome(i),"alert id must resolve"),this._inlineCardVM.events.next({type:g.G.Type.applied,alertId:B.$v(i),alternativeIndex:e.alternativeIndex})}_pushFeed(e,t,i){(0,N.V1)(t.alertRefs.length>0,"pushAssistantFeed actions must have alerts scope");const r=this._sduiManager.alertIdResolver(l.W.AlertId.from(t.alertRefs[0]));(0,N.V1)(M.isSome(r),"alert id must resolve");const n=this._alertsReader.getById(B.$v(r));(0,N.V1)(M.isSome(n),"inline alert must be registered"),this._inlineCardVM.events.next({type:g.G.Type.opened,alert:{alert:w.A.fromModel(n.value),highlightIndex:i}})}dispose(){this._subs.dispose()}constructor(e,t,i,r,a,o,l,d){(0,s._)(this,"_sduiManager",void 0),(0,s._)(this,"_inlineSDUIManager",void 0),(0,s._)(this,"_inlineCardVM",void 0),(0,s._)(this,"_alertsReader",void 0),(0,s._)(this,"platformEnvironment",void 0),(0,s._)(this,"_copyToClipboard",void 0),(0,s._)(this,"_sduiInlineCardActions",void 0),(0,s._)(this,"_sduiViewModel",void 0),(0,s._)(this,"_focusedItem",void 0),(0,s._)(this,"_subs",void 0),(0,s._)(this,"events",void 0),(0,s._)(this,"handleSDUIAction",void 0),this._sduiManager=t,this._inlineSDUIManager=i,this._inlineCardVM=r,this._alertsReader=a,this.platformEnvironment=l,this._copyToClipboard=d,this._sduiInlineCardActions=new b.B7,this._focusedItem=h.s.create(M.none),this._subs=new v.y.Keeper,this.handleSDUIAction=(e,t=0)=>{this._sduiInlineCardActions.next({action:e,highlightIndex:t})},this.events=r.events,this._sduiViewModel=new c.W(e,t,new F,o,this._focusedItem.view(M.map((e=>e.id)))),this._subs.push(this._sduiInlineCardActions.pipe(y.skipBy(n.eq),C.M((e=>this._handleSduiCardAction(e)))).subscribe(),this._inlineCardVM.events.pipe(f.p((0,I.Ub)(g.G.isLookedAction,g.G.isCardCloseAction)),k.n((e=>g.G.isLookedAction(e)&&"card"===e.kind?this.getInlineItemForAlert(e.alertId).pipe(_.T(M.fromEither)):x.of(M.none)))).subscribe(S.H9(this._focusedItem)))}}class F{constructor(){(0,s._)(this,"feed",E.w),(0,s._)(this,"currentFeed",M.none),(0,s._)(this,"onFeedRemove",E.w),(0,s._)(this,"onFeedEmpty",E.w),(0,s._)(this,"header",E.w),(0,s._)(this,"footer",E.w),(0,s._)(this,"pushFeed",(()=>A.right(null))),(0,s._)(this,"popFeed",I.Yi),(0,s._)(this,"focusCard",(()=>A.right(null))),(0,s._)(this,"notifyCardFocused",I.Yi),(0,s._)(this,"dispose",I.Yi)}}},26730:(e,t,i)=>{i.d(t,{ID:()=>W});var r=i(10334),n=i(17171),s=i(24497),a=i(11864),o=i(29120),l=i(36840),c=i(27199);const d=c.Q1.CoreGreen10,m="2px",p="1px",h="alerts-",u=s.NeutralGray10;var g;!function(e){e.markHeightStandard=`${h}markHeightStandard`,e.markHeightTall=`${h}markHeightTall`,e.markSelected=`${h}markSelected`,e.markSelectedFocused=`${h}markSelectedFocused`,e.markBase=`${h}markBase`,e.markAppliedBase=`${h}markAppliedBase`,e.markVisible=`${h}markVisible`,e.markStart=`${h}markStart`,e.correctness=`${h}correctness`,e.premium=`${h}premium`,e.clarity=`${h}clarity`,e.engagement=`${h}engagement`,e.delivery=`${h}delivery`,e.critical=`${h}critical`,e.advanced=`${h}advanced`,e.plagiarism=`${h}plagiarism`,e.originality=`${h}originality`,e.vox=`${h}vox`,e.knowledgeHub=`${h}knowledgeHub`,e.synonym=`${h}synonym`,e.markAnimated=`${h}markAnimated`,e.markHidden=`${h}markHidden`,e.markApplied=`${h}markApplied`,e.markBulkApplied=`${h}markBulkApplied`,e.markBulkAppliedAnimation=`${h}markBulkAppliedAnimation`,e.markSuccess=`${h}markSuccess`,e.noAnimation=`${h}noAnimation`,e.markVBar=`${h}markVBar`,e.markVBarHighlighted=`${h}markVBarHighlighted`,e.markWritingExpert=`${h}markWritingExpert`,e.markWritingExpertHighlighted=`${h}markWritingExpertHighlighted`}(g||(g={}));const f=`${h}custom`,_={backgroundPosition:`center calc(100% + ${m})`,backgroundRepeat:"no-repeat",contain:"layout style",$nest:{"@media print":{borderBottomWidth:"0 !important"}}},y={$nest:{"@media print":{borderBottomWidth:"3 !important"}}},b=a.Ks.keyframes({from:{backgroundSize:"100% 0"},to:{backgroundSize:"100% 12%"}}),v={standard:`calc(${a.Ks.rem(.45)} - 3px)`,tall:`calc(${a.Ks.rem(.425)} + 1px)`},C=e=>({to:{backgroundColor:e}}),k=(e,t,i,s)=>(0,n._)((0,r._)({$unique:!0},_),{paddingBottom:p,borderBottom:`${m} solid ${t}`,transition:"border-bottom-color .5s linear",$nest:(0,n._)((0,r._)({},_.$nest),{"&[data-vertical-underline-start]:before":{borderColor:i,color:i},"& > [data-vertical-underline-body]:after":{borderColor:i},"& > [data-vertical-underline-index]":{color:i},"&[data-superscript]":{padding:0,border:"none",color:i,transition:"none"},"&:not([data-superscript])":{$nest:{[`&.${g.markSelected}.${g.markHeightStandard}`]:{paddingTop:v.standard},[`&.${g.markSelected}.${g.markHeightTall}`]:{paddingTop:v.tall},[`&.${g.markSelected}`]:{$unique:!0,borderBottomColor:s,animation:`${e} 1s ease forwards`},[`&.${g.markSelectedFocused}`]:{$unique:!0,borderBottomColor:i},[`&.${g.markSelected} .${g.markBase}:not(.${g.markSelected}):not(.${g.markWritingExpert})`]:{paddingBottom:`calc(${m} + ${p})`,borderBottomStyle:"hidden"},[`&.${g.markSelectedFocused} .${g.markBase}:not(.${g.markSelected}):not(.${g.markWritingExpert})`]:{paddingBottom:`calc(${m} + ${p})`,borderBottomStyle:"hidden"}}}})}),x=a.Ks.keyframes(C(c.Q1.CoreRed10)),S=a.Ks.keyframes(C(c.Q1.CoreYellow10)),E=a.Ks.keyframes(C(c.Q1.CoreCyan10)),w=a.Ks.keyframes(C(c.Q1.CorePurple10)),T=a.Ks.keyframes(C(c.Q1.CoreNeutral10)),M=a.Ks.keyframes(C(c.Q1.CoreBlue10)),A=a.Ks.keyframes(C(c.Q1.CoreRed10)),K=a.Ks.keyframes(C(c.Q1.CoreYellow10)),N=a.Ks.keyframes(C(c.Q1.CoreBlue10)),B=a.Ks.keyframes(C(c.Q1.CoreGreen10)),I=a.Ks.keyframes(C(c.Q1.CorePurple10)),$=a.Ks.keyframes(C(c.Q1.CoreGreen10)),F=a.Ks.keyframes(C(u)),R=e=>{const t=a.Ks.color(d).fade(e).toRGBA().toString();return{borderBottomColor:t,backgroundColor:t,$nest:{[`&.${g.markHeightStandard}`]:{paddingTop:v.standard},[`&.${g.markHeightTall}`]:{paddingTop:v.tall}}}},L=e=>({borderBottomColor:"transparent",backgroundColor:a.Ks.color(d).fade(e).toRGBA().toString()}),P=a.Ks.keyframes({from:R("100%"),to:R("50%")}),D={borderBottomWidth:"2px",borderBottomColor:`${c.Q1.CoreNeutral40}`,borderBottomStyle:"dotted",backgroundColor:"transparent"},H=a.Ks.keyframes({to:(0,r._)({},R("0%"),D)}),O=a.Ks.keyframes({from:L("100%"),to:L("50%")}),Q={$nest:{[`&.${g.markHeightStandard}`]:{paddingTop:v.standard},[`&.${g.markHeightTall}`]:{paddingTop:v.tall},[`&:not(.${g.markSelected}):not(.${g.markSelectedFocused})`]:{$nest:{[`&.${g.clarity} &.${g.clarity}`]:{borderBottomStyle:"solid",borderBottomColor:c.Q1.CoreBlue50}}},[`&.${g.correctness}, &.${g.markSelected}, &.${g.markSelectedFocused}`]:{$nest:{[`.${g.markVisible}:not(.${g.markSelected}):not(.${g.markSelectedFocused}).${g.clarity} .${g.markVisible}:not(.${g.markSelected}):not(.${g.markSelectedFocused}).${g.clarity}`]:{}}},[`&.${g.clarity}`]:{$nest:{[`& & &:not(.${g.markSelected}):not(.${g.markSelectedFocused})`]:{borderBottomStyle:"hidden !important"}}}}},V={borderBottom:"0 solid transparent !important",background:"none",animation:"none"},U=e=>({position:"relative",$nest:{[`& > .${g.markVisible}:not(.${g.markSelected}):not(.${g.markSelectedFocused})`]:{borderBottomStyle:a.Ks.important("hidden")},[`&.${g.markHeightTall}`]:{paddingTop:v.tall},"&:after":{content:'"  "',position:"absolute",height:0,bottom:a.Ks.rem(-.15),right:a.Ks.rem(-.875),width:a.Ks.rem(.75),borderBottom:`${a.Ks.rem(.175)} dotted ${e}`}}}),W=(0,l.Bj)((()=>({custom(e,t){const i=a.Ks.color(e).fade(.25).toRGBA().toString(),r=a.Ks.keyframes(C(i));return[f,g.markBase,a.Ks.style(k(r,t,t,i)),o.b.style(k(r,t,t,i),y)].join(" ")},markWritingExpert:g.markWritingExpert,markWritingExpertCustom:e=>[g.markWritingExpert,g.markBase,a.Ks.style(k(e?S:F,e?c.Q1.CoreYellow30:s.Green60,e?c.Q1.CoreYellow40:s.Green60,e?c.Q1.CoreYellow10:s.BlueGray5),U(e?c.Q1.CoreYellow30:s.Green60)),o.b.style(k(e?S:F,e?c.Q1.CoreYellow30:s.Green60,e?c.Q1.CoreYellow40:s.Green60,e?c.Q1.CoreYellow10:s.Green10),U(e?c.Q1.CoreYellow30:s.Green60),y)].join(" "),markWritingExpertHighlighted:g.markWritingExpertHighlighted,markWritingExpertHighlightedCustom:e=>[g.markWritingExpertHighlighted,a.Ks.style(k(e?S:F,"transparent","transparent",e?c.Q1.CoreYellow10:u))].join(" "),markVBar:g.markVBar,markBase:[g.markBase,a.Ks.style(_),o.b.style(_,{$nest:{"@media print":{borderBottomWidth:"3 !important"}}})].join(" "),markAppliedBase:[g.markAppliedBase,g.markBase,a.Ks.style({paddingBottom:`${p}`,borderBottom:`${m} solid ${d}`})].join(" "),correctness:[g.correctness,g.markBase,a.Ks.style(k(A,c.Q1.CoreRed50,c.Q1.CoreRed50,c.Q1.CoreRed10)),o.b.style(k(A,c.Q1.CoreRed50,c.Q1.CoreRed50,c.Q1.CoreRed10),y)].join(" "),premium:[g.premium,g.markBase,a.Ks.style(k(K,c.Q1.CoreYellow40,c.Q1.CoreYellow40,c.Q1.CoreYellow10)),o.b.style(k(K,c.Q1.CoreYellow40,c.Q1.CoreYellow40,c.Q1.CoreYellow10),y)].join(" "),clarity:[g.clarity,g.markBase,a.Ks.style(k(N,c.Q1.CoreBlue50,c.Q1.CoreBlue50,c.Q1.CoreBlue10)),o.b.style(k(N,c.Q1.CoreBlue50,c.Q1.CoreBlue50,c.Q1.CoreBlue10),y)].join(" "),markVisible:[g.markVisible,a.Ks.style(Q),o.b.style(Q)].join(" "),engagement:[g.engagement,g.markBase,a.Ks.style(k(B,c.Q1.CoreGreen50,c.Q1.CoreGreen50,c.Q1.CoreGreen10)),o.b.style(k(B,c.Q1.CoreGreen50,c.Q1.CoreGreen50,c.Q1.CoreGreen10),y)].join(" "),delivery:[g.delivery,g.markBase,a.Ks.style(k(I,c.Q1.CorePurple50,c.Q1.CorePurple50,c.Q1.CorePurple10)),o.b.style(k(I,c.Q1.CorePurple50,c.Q1.CorePurple50,c.Q1.CorePurple10),y)].join(" "),critical:[g.critical,g.markBase,a.Ks.style(k(x,c.Q1.CoreRed50,c.Q1.CoreRed50,c.Q1.CoreRed10)),o.b.style(k(x,c.Q1.CoreRed50,c.Q1.CoreRed50,c.Q1.CoreRed10),y)].join(" "),advanced:[g.advanced,g.markBase,a.Ks.style(k(S,c.Q1.CoreYellow40,c.Q1.CoreYellow40,c.Q1.CoreYellow10)),o.b.style(k(S,c.Q1.CoreYellow40,c.Q1.CoreYellow40,c.Q1.CoreYellow10),y)].join(" "),plagiarism:[g.plagiarism,g.markBase,a.Ks.style(k(E,c.Q1.CoreCyan50,c.Q1.CoreCyan50,c.Q1.CoreCyan10)),o.b.style(k(S,c.Q1.CoreCyan50,c.Q1.CoreCyan50,c.Q1.CoreCyan10),y)].join(" "),originality:[g.originality,g.markBase,a.Ks.style(k(w,c.Q1.CorePurple50,c.Q1.CorePurple50,c.Q1.CorePurple10)),o.b.style(k(I,c.Q1.CorePurple50,c.Q1.CorePurple50,c.Q1.CorePurple10),y)].join(" "),vox:[g.vox,g.markBase,a.Ks.style(k(T,c.Q1.CoreNeutral50,c.Q1.CoreNeutral50,c.Q1.CoreNeutral10)),o.b.style(k(T,c.Q1.CoreNeutral50,c.Q1.CoreNeutral50,c.Q1.CoreNeutral10),y)].join(" "),knowledgeHub:[g.knowledgeHub,g.markBase,a.Ks.style(k(T,c.Q1.CoreNeutral50,c.Q1.CoreNeutral50,c.Q1.CoreNeutral10)),o.b.style(k(T,c.Q1.CoreNeutral50,c.Q1.CoreNeutral50,c.Q1.CoreNeutral10),y)].join(" "),synonym:[g.synonym,g.markBase,a.Ks.style(k(M,c.Q1.CoreBlue50,"transparent",c.Q1.CoreBlue50)),o.b.style(k(M,c.Q1.CoreBlue50,"transparent",c.Q1.CoreBlue50),y)].join(" "),markAnimated:[g.markAnimated,a.Ks.style({animation:`${b} .075s ease`})].join(" "),markHidden:[g.markHidden,a.Ks.style(V),o.b.style(V)].join(" "),markBulkAppliedAnimation:[g.markBulkAppliedAnimation,g.markBase,a.Ks.style(R("100%"),D,{animation:`${P} 2s linear forwards,\n          ${H} .25s linear 2s forwards`})].join(" "),markBulkApplied:[g.markBulkApplied,g.markBase,a.Ks.style(k($,c.Q1.CoreNeutral40,c.Q1.CoreGreen10,c.Q1.CoreGreen10),D)].join(" "),markApplied:[g.markApplied,a.Ks.style(R("100%"),{animation:`${P} .25s linear forwards`})].join(" "),markSuccess:[g.markSuccess,a.Ks.style(L("100%"),{animation:`${O} .25s linear forwards`})].join(" "),noAnimation:[g.noAnimation,a.Ks.style({animationDuration:"0s !important"})].join(" "),markVBarHighlighted:[g.markVBarHighlighted,a.Ks.style({backgroundColor:"#DEF7F5",borderBottom:"solid 5px #DEF7F5",borderTop:"solid 5px #DEF7F5"})].join(" "),markSelected:g.markSelected,markSelectedFocused:g.markSelectedFocused,markHeightStandard:g.markHeightStandard,markHeightTall:g.markHeightTall,markStart:g.markStart})))},63849:(e,t,i)=>{i.d(t,{t:()=>q});var r,n=i(23988),s=i(10334),a=i(38886),o=i(13110),l=i(84647),c=i(80074),d=i(60575),m=i(66799),p=i(72106),h=i(55340),u=i(43585),g=i(63967),f=i(62597),_=i(889),y=i(22809),b=i(21216),v=i(15491),C=i(3346),k=i(36094),x=i(90405),S=i(21662),E=i(68594),w=i(60269),T=i(95168),M=i(64231),A=i(80837),K=i(65621),N=i(78339),B=i(42543),I=i(83541),$=i(62822),F=i(19711),R=i(30295),L=i(38666),P=i(45653),D=i(78884),H=i(79365),O=i(93584),Q=i(65390),V=i(66202),U=i(58193),W=i(22835),z=i(59042),G=i(36840),j=i(19178);!function(e){e.create=(e,t,i,r,n)=>(s,a)=>{const o=i("MarkActionFactory.create");return p.J.Change.getCreateAction({classes:t({state:a.to.visualState,isBulkApplied:g.Fc.State.isBulkApplied(o.state),range:s,isAnimated:!a.to.updateRanges&&(0,R.NM)(a),isEnclosed:r,isVBar:P.A.isVBar(o),isWritingExpert:P.A.isWritingExpertWithTeaser(o),isHidden:n&&P.A.isPremiumPreviewPlagiarism(o)}),range:s,order:e({range:s})})},e.update=(e,t,i,r,n)=>(s,a)=>{const o=i("MarkActionFactory.update");return p.J.Change.getUpdateAction({classes:t({state:a.to.visualState,isBulkApplied:g.Fc.State.isBulkApplied(o.state),range:s,isAnimated:!a.to.updateRanges&&(0,R.NM)(a),isEnclosed:r,isVBar:P.A.isVBar(o),isWritingExpert:P.A.isWritingExpertWithTeaser(o),isHidden:n&&P.A.isPremiumPreviewPlagiarism(o)}),range:s,order:e({range:s})})},e.remove=e=>p.J.Change.getRemoveAction({range:e},p.J.Change.RemoveType.partial)}(r||(r={}));class q{dispose(){this._subs.dispose()}flush(){const e=(new Date).getTime();return this._alertList.flushAlerts(),this._marksRenderer.flush().finally((()=>{const t=(new Date).getTime()-e;this._log.info("Flush performed",{duration:t})}))}focusAlertHighlight(e){return(0,l.pipe)(this._getMarkAlert(e.alert),Q.fold((()=>V.left(new Error("Cannot focus given alert"))),(t=>(R.yl.canBeChanged()(t.markAlert)&&(g.Fc.isSuperAlert(t.alert)&&t.markAlert.scheduleForceUpdate(),t.markAlert.scheduleApply(R.zQ.highlighted),this._marksRenderer.enqueue([t.markAlert],H.m.Priority.asap)),V.right({dispose:()=>this._unfocusAlertHighlight(e)})))))}_unfocusAlertHighlight(e){(0,l.pipe)(e.alert,Q.some,Q.filter((e=>!(0,l.pipe)(this._highlightedAlertId,Q.exists((t=>t===e.id))))),Q.chain(this._getMarkAlert),Q.filter((e=>!R.yl.isOrWillBe(R.zQ.hidden)(e.markAlert)&&R.yl.canBeChanged()(e.markAlert))),Q.map((e=>{R.yl.isOrWillBe(R.zQ.success)(e.markAlert)?(this._handleRemovedAlerts([e.alert]),this._marksRenderer.enqueue([e.markAlert],H.m.Priority.asap)):this._marksRenderer.enqueue([e.markAlert.scheduleApply(R.zQ.visible)],H.m.Priority.asap)})))}moveCursorToHighlight(e,t){return(0,l.pipe)(this._getMarkAlert(e.alert),Q.chain((t=>t.markAlert.markByIndex(e.highlightIndex))),Q.chain((e=>Q.fromEither(e.range()))),Q.fold((()=>V.left(new Error("Cannot find mark for given range"))),(e=>{const{index:i,length:r}=this._ded.getCursor();if(0===r&&(i<e.start||i>e.end)){const i=Math.min(e[t],this._ded.getLastPossibleCursorPosition());return(0,l.pipe)(this._ded.setCursor(i,0),V.orElse((e=>(this._log.error("Failed to set cursor to highlight",e,i),V.left(e)))))}return V.right(void 0)})))}ensureAlertHighlightInViewport(e,t,i){return(0,l.pipe)(this._getVisibleMarkAlert(e.alert),Q.map((e=>e.markAlert)),Q.chain((t=>t.markByIndex(e.highlightIndex))),Q.fold((()=>b.of(V.left(new Error("Cannot ensureAlertHighlightInViewport, because mark is None")))),(e=>this._ded.scrollToMark(e.id,{animate:i,paddingTop:t}).pipe(v.T(V.right),C.W((e=>b.of(V.left(e))))))))}_listenFilterChange(){return(0,l.pipe)(this._filterChanges,v.T(Q.some)).subscribe(k.H9(this._filterKit))}getFirstMark(){return this._alertList.state.pipe(v.T(y.A.find((e=>g.Fc.isCritical(e.alert)))),x.Kc((e=>b.of((0,l.pipe)(this._getMarkAlert(e.alert),Q.chain((e=>e.markAlert.mark)))))))}_listenFilteredAlerts(){return this._filterKit.pipe(S.E(this._alertList.state),v.T((([e,t])=>{const i=(0,l.pipe)(e,Q.map((e=>e.filter)));return(0,l.pipe)(t,y.A.reduce({},((e,t)=>((0,l.pipe)(i,Q.map((e=>e(t.alert))),Q.getOrElse(l.constTrue))&&g.Fc.isRegistered(t.alert)&&(e[t.alert.id]=t.alert),e))),(e=>Q.some({filter:i,alerts:e})))}))).subscribe(k.H9(this._filteredAlerts))}_schedule(e,t){a.J_(e)&&(this._log.trace(`Schedule alerts ${e.map((e=>e.alert.id))} to ${t}`),this._marksRenderer.enqueue(e.map((e=>e.scheduleApply(t))),H.m.Priority.low))}_handleRemovedAlerts(e){(0,l.pipe)(e,a.x1((({id:e})=>(0,l.pipe)(this._marksMap.get(e),Q.fromNullable,U.Mi((()=>this._marksMap.delete(e)))))),o.ci,U.Mi((e=>this._schedule(e,R.zQ.disposed))))}_handleUpdatedAlerts(e){if(!e.length)return;const t=(0,l.pipe)(this._filteredAlerts.get(),Q.chain((e=>e.filter))),{activeToHandle:i,removedToHandle:r}=e.reduce(((e,i)=>(this._alertsFilterService.alertCanBeDisplayed(i)||g.Fc.isBulkApplied(i)?(0,l.pipe)(Q.fromNullable(this._marksMap.get(i.id)),Q.fold((()=>{(0,l.pipe)(t,Q.map((e=>e(i))),Q.getOrElse((()=>!0)))&&e.activeToHandle.push(i)}),(e=>{g.Fc.isLockedUIUphook(i)?e.scheduleForceUpdate():e.scheduleUpdate(),R.yl.isOrWillBe(R.zQ.success)(e)?e.scheduleApply(R.zQ.highlighted):this._marksRenderer.enqueue([e],H.m.Priority.asap)}))):(0,l.pipe)(Q.fromNullable(this._marksMap.get(i.id)),Q.map((t=>{i.allowUpdate&&g.Fc.isCapiDone(i)&&g.Fc.isRated(i)&&R.yl.isOrWillBe(R.zQ.highlighted)(t)?(t.scheduleUpdate(),t.scheduleApply(R.zQ.success),this._marksRenderer.enqueue([t],H.m.Priority.asap)):e.removedToHandle.push(i)}))),e)),{activeToHandle:[],removedToHandle:[]});this._handleVisibleAlerts(i),this._handleRemovedAlerts(r)}_handleVisibleAlerts(e){if(a.Im(e))return;const t=e.map((e=>{if(this._marksMap.has(e.id))return this._marksMap.get(e.id);{const t=g.Fc.isSuperAlert(e)?u.OT.byAhr(this._activeAlertChanges.view((0,l.flow)(Q.filter((t=>t.alert.id===e.id)),Q.chain((t=>(0,l.pipe)(Q.fromNullable(e.getHighlightRanges()[t.highlightIndex]),U.jw((()=>this._log.error("Alert highlight ranges do not contain a range at the given AHI",{knownHighlightRangesCount:e.getHighlightRanges().length,highlightIndex:t.highlightIndex}))))))))):u.OT.byRangeType(e),i=i=>(0,u.pY)({getMarkType:t,theme:u.rh.fromAlert(e,this._useHighHighlights,(0,j.o)(this._suggestionsVisualMode.get()),this._showNativeColorsForHiddenAlerts)})(i),n=t=>(0,l.pipe)(this._alertsReader.getById(e.id),Q.alt((()=>(Boolean(t)&&this._log.warn("Could not find alert for provided MarkAlert",{alert:e,source:t}),Q.some(e)))),Q.map(P.A.fromModel),U.$v),s=({range:t})=>{const i=f.J.getSortOrder(e.lensType);return _.l.isEnclosingView(t())?i+1:i},a=g.Fc.hasEnclosingHighlight(e),o=new L.s(n,this._alertsService,this._alertRangeService,this.changeMarks,r.create(s,i,n,a,this._isFreeUser.get()),r.update(s,i,n,a,this._isFreeUser.get()),r.remove,this._onTransitionEnd(e));return this._marksMap.set(e.id,o),o}})).filter((e=>R.yl.isOneOf(R.zQ.initial)(e)||R.yl.isOrWillBe(R.zQ.hidden)(e)||R.yl.isOrWillBe(R.zQ.visible)(e)||R.yl.isOrWillBe(R.zQ.faded)(e)));this._applyRenderedFeedbackForWritingExpert(t),this._schedule(t,R.zQ.visible)}_handleAcceptedAlerts(e){return(0,l.pipe)(e,a.Tj(this._getMarkAlert),a.oE,(e=>{e.length&&this._marksRenderer.enqueue(e.map((e=>e.markAlert.scheduleApply(R.zQ.applied))),H.m.Priority.immediately)}))}_rerenderAllMarksOnUnderlineModeChange(){return this._suggestionsVisualMode.pipe(E.i(1)).subscribe((()=>{const e=Array.from(this._marksMap.values());e.forEach((e=>e.scheduleForceUpdate())),this._marksRenderer.enqueue(e.map((e=>(e.scheduleForceUpdate(),e))),H.m.Priority.low)}))}_listenMarksState(){const e=e=>(0,s._)({activeAlerts:[],updatedAlerts:[],removedAlerts:[],acceptedAlerts:[],hiddenMarkAlerts:[]},e);return w.h(this._filteredAlerts.pipe(x.Kc((({alerts:t})=>b.of(e({hiddenMarkAlerts:Array.from(this._marksMap.values()).filter((e=>void 0===t[e.alert.id]&&R.yl.notAnyOf(R.zQ.applied,R.zQ.success)(e)&&!g.Fc.State.isBulkApplied(e.alert.state))),activeAlerts:W.$r(t)}))))),this._alertStateDiff.pipe(S.E(this._filteredAlerts),v.T((([t,i])=>(0,l.pipe)(t,z.b.reduce(e({}),((e,t)=>(this._marksMap.has(t.alert.id)&&e.removedAlerts.push(t.alert),e)),((e,t)=>(g.Fc.isAccepted(t.alert)?e.acceptedAlerts.push(t.alert):e.updatedAlerts.push(t.alert),e)),((e,t)=>((0,l.pipe)(i,Q.chain((e=>e.filter)),Q.fold((()=>e.activeAlerts.push(t.alert)),(i=>i(t.alert)&&e.activeAlerts.push(t.alert)))),e)))))))).pipe(T.M((({activeAlerts:e,removedAlerts:t,updatedAlerts:i,acceptedAlerts:r,hiddenMarkAlerts:n})=>(this._handleRemovedAlerts(t),this._handleUpdatedAlerts(i),this._handleVisibleAlerts(e),this._handleAcceptedAlerts(r),this._schedule(n,R.zQ.hidden),()=>this._marksRenderer.dispose()))),C.W(this._log.handler("_listenMarksState exception").error),M.L()).subscribe()}constructor(e,t,i,r,s,o=!1,p,u,f,C,k,x,S){(0,n._)(this,"_ded",void 0),(0,n._)(this,"_alertList",void 0),(0,n._)(this,"_alertsReader",void 0),(0,n._)(this,"_alertsService",void 0),(0,n._)(this,"_alertRangeService",void 0),(0,n._)(this,"_useHighHighlights",void 0),(0,n._)(this,"_marksRenderer",void 0),(0,n._)(this,"_alertsFilterService",void 0),(0,n._)(this,"_filterChanges",void 0),(0,n._)(this,"_suggestionsVisualMode",void 0),(0,n._)(this,"_activeAlertChanges",void 0),(0,n._)(this,"_showNativeColorsForHiddenAlerts",void 0),(0,n._)(this,"_isFreeUser",void 0),(0,n._)(this,"_marksMap",void 0),(0,n._)(this,"_log",void 0),(0,n._)(this,"_subs",void 0),(0,n._)(this,"_filterKit",void 0),(0,n._)(this,"_filteredAlerts",void 0),(0,n._)(this,"_alertStateDiff",void 0),(0,n._)(this,"events",void 0),(0,n._)(this,"changeMarks",void 0),(0,n._)(this,"_getMarkAlert",void 0),(0,n._)(this,"_isAlertVisible",void 0),(0,n._)(this,"_getVisibleMarkAlert",void 0),(0,n._)(this,"getMarkByAlert",void 0),(0,n._)(this,"getEnclosingMarkByAlert",void 0),(0,n._)(this,"_isHighlightInteractable",void 0),(0,n._)(this,"getAlertByMark",void 0),(0,n._)(this,"_highlightedAlertId",void 0),(0,n._)(this,"highlightAlertHighlight",void 0),(0,n._)(this,"_unhighlightAlertHighlight",void 0),(0,n._)(this,"_memoizedWritingExpertRenderedFeedbackApply",void 0),(0,n._)(this,"_applyRenderedFeedbackForWritingExpert",void 0),(0,n._)(this,"_onTransitionEnd",void 0),this._ded=e,this._alertList=t,this._alertsReader=i,this._alertsService=r,this._alertRangeService=s,this._useHighHighlights=o,this._marksRenderer=p,this._alertsFilterService=u,this._filterChanges=f,this._suggestionsVisualMode=C,this._activeAlertChanges=k,this._showNativeColorsForHiddenAlerts=x,this._isFreeUser=S,this._marksMap=new Map,this._log=d.Bx.Logging.getLogger("MarksViewModelImpl",d.y7.$.DEBUG),this._subs=new A.y.Keeper,this._filterKit=c.s.create(Q.none),this._filteredAlerts=c.s.create(Q.none),this._alertStateDiff=this._alertList.state.pipe(K.J(),v.T((([e,t])=>y.A.diff(e,t))),N.p((0,G.AU)(z.b.isEmpty))),this.events=new B.B7,this.changeMarks=e=>this._ded.changeMarks(e),this._getMarkAlert=({id:e})=>(0,l.pipe)(Q.fromNullable(this._marksMap.get(e)),Q.filter(R.yl.notAnyOf(R.zQ.disposed)),Q.chain((e=>(0,l.pipe)(this._alertsReader.getById(e.alert.id),Q.map((t=>({alert:t,markAlert:e}))))))),this._isAlertVisible=e=>(0,l.pipe)(this._filterKit.get(),Q.filter((t=>t.filter(e))),Q.isSome),this._getVisibleMarkAlert=({id:e})=>(0,l.pipe)(this._getMarkAlert({id:e}),Q.filter((e=>this._isAlertVisible(e.alert)))),this.getMarkByAlert=e=>(0,l.pipe)(this._getVisibleMarkAlert(e.alert),Q.chain((t=>t.markAlert.markByIndex(e.highlightIndex)))),this.getEnclosingMarkByAlert=e=>(0,l.pipe)(this._getVisibleMarkAlert(e),Q.chain((e=>e.markAlert.enclosingMark))),this._isHighlightInteractable=e=>{const t=(0,l.pipe)(Q.fromNullable(this._marksMap.get(e.alert.id)),Q.fold((()=>!1),(e=>R.yl.isOrWillBe(R.zQ.highlighted)(e)))),i=P.A.isVBar(e.alert);return(!(0,l.pipe)(D.z.getHighlightRange(e),Q.fold((()=>!1),_.l.isEnclosingView))||t)&&!i},this.getAlertByMark=e=>(0,l.pipe)(this._alertsReader.getInteractable(_.a.fromRangeIdToAlertId(e.id)),Q.filter(this._isAlertVisible),Q.chain((t=>(0,l.pipe)(O.Bm.getHighlightIndex(t,e.range()),V.map((e=>({alert:P.A.fromModel(t),highlightIndex:e}))),Q.fromEither))),Q.filter(this._isHighlightInteractable)),this._highlightedAlertId=Q.none,this.highlightAlertHighlight=e=>(0,l.pipe)(this._getMarkAlert(e),Q.map((e=>e.markAlert)),Q.filter(R.yl.canBeChanged()),Q.fold((()=>V.left(new Error("Cannot highlight alert"))),(t=>((0,l.pipe)(this._highlightedAlertId,U.Mi((t=>{this._log.warn("Trying to highlight alert while previously highlighted alert is not unhighlighted",{highlighted:e.id,previous:t}),this._unhighlightAlertHighlight({id:t})}))),this._highlightedAlertId=Q.some(e.id),t.scheduleApply(R.zQ.highlighted),this._marksRenderer.enqueue([t],H.m.Priority.asap),V.right({dispose:()=>this._unhighlightAlertHighlight(e)}))))),this._unhighlightAlertHighlight=e=>(0,l.pipe)(e,(e=>(Q.exists((t=>t===e.id))(this._highlightedAlertId)||this._log.warn("Trying to unhighlight alert but nothing is highlighted",{alertId:e.id}),this._highlightedAlertId=Q.none,e)),this._getMarkAlert,Q.map((e=>e.markAlert)),Q.filter((e=>R.yl.canBeChanged()(e)&&!R.yl.isOrWillBe(R.zQ.hidden)(e)&&!(0,l.pipe)(this._activeAlertChanges.get(),Q.exists((t=>t.alert.id===e.alert.id))))),Q.map((e=>this._marksRenderer.enqueue([e.scheduleApply(R.zQ.visible)],H.m.Priority.asap)))),this._memoizedWritingExpertRenderedFeedbackApply=(0,G.Bj)((e=>this._alertsService.applyFeedback(e,{kind:m.yp.RENDERED,subtype:m.U3.UnderlineWithTeaser},g.Kz.text))),this._applyRenderedFeedbackForWritingExpert=a.x1((0,l.flow)(W.Up("alert"),Q.fromPredicate(P.A.isWritingExpertWithTeaser),Q.chain((e=>(0,l.pipe)(e.id,this._memoizedWritingExpertRenderedFeedbackApply,V.mapLeft((t=>this._log.error("Failed to apply RENDERED feedback",t,e))),Q.fromEither))))),this._onTransitionEnd=e=>(t,i)=>{R.zQ.isApplied(t.to.visualState)&&requestAnimationFrame((()=>{(0,l.pipe)(i.mark,Q.fold((()=>b.of(V.left(new Error("Cannot animate mark, as it not exists")))),(e=>(0,l.pipe)(w.h(w.h(I.timer(300).pipe($.u(V.right((0,l.constVoid)()))),e.fromMarkEvent("animationend"),e.fromMarkEvent("animationcancel")).pipe(F.$()))))),(0,l.flow)(F.$(),v.T(V.fold((e=>(e instanceof h.C.CollapsedMarkError?this._log.debug("Cannot animate applied alert as it is collapsed",e):this._log.error("Cannot animate applied alert",e,{alertId:i.alert.id,currentState:i.state,alertInfo:{title:i.alert.title,patternName:i.alert.patternName}}),I.timer(150).pipe(v.T(l.constVoid)))),b.of))),(t=>{t.subscribe((()=>{R.yl.isOrWillBe(R.zQ.disposed)(i)?this._log.info("Alert disposed before apply animation finished"):(this.events.next({type:O.sL.Type.AppliedAlertAnimationFinished,alert:e}),g.Fc.isBulkApplied(e)||this._handleRemovedAlerts([e]))}))}))}))},this._subs.push(this._listenMarksState(),this._listenFilterChange(),this._listenFilteredAlerts(),this._rerenderAllMarksOnUnderlineModeChange()),(0,G.hJ)("marksManager",this)}}!function(e){e.Mock=class{getFirstMark(){throw new Error("Method not implemented.")}flush(){return Promise.resolve()}ensureAlertHighlightInViewport(){throw new Error("Method not implemented.")}getEnclosingMarkByAlert(e){throw new Error("Method not implemented.")}getMarkByAlert(e){throw new Error("Method not implemented.")}getAlertByMark(e){throw new Error("Method not implemented.")}constructor(){(0,n._)(this,"events",new B.B7),(0,n._)(this,"dispose",l.constVoid),(0,n._)(this,"focusAlertHighlight",(()=>V.left(new Error("Method not implemented.")))),(0,n._)(this,"highlightAlertHighlight",(()=>V.left(new Error("Method not implemented.")))),(0,n._)(this,"moveCursorToHighlight",(()=>V.left(new Error("Method not implemented."))))}}}(q||(q={}))},19178:(e,t,i)=>{i.d(t,{o:()=>J});var r=i(37107),n=i(26730),s=i(10334),a=i(17171),o=i(24497),l=i(11864),c=i(29120),d=i(36840),m=i(27199);const p=m.Q1.CoreGreen10,h="2px",u="1px",g="alerts1-",f=o.NeutralGray10;var _;!function(e){e.markHeightStandard=`${g}markHeightStandard`,e.markHeightTall=`${g}markHeightTall`,e.markSelected=`${g}markSelected`,e.markSelectedFocused=`${g}markSelectedFocused`,e.markBase=`${g}markBase`,e.markAppliedBase=`${g}markAppliedBase`,e.markVisible=`${g}markVisible`,e.markStart=`${g}markStart`,e.correctness=`${g}correctness`,e.premium=`${g}premium`,e.clarity=`${g}clarity`,e.engagement=`${g}engagement`,e.delivery=`${g}delivery`,e.critical=`${g}critical`,e.advanced=`${g}advanced`,e.plagiarism=`${g}plagiarism`,e.originality=`${g}originality`,e.vox=`${g}vox`,e.knowledgeHub=`${g}knowledgeHub`,e.synonym=`${g}synonym`,e.markAnimated=`${g}markAnimated`,e.markHidden=`${g}markHidden`,e.markApplied=`${g}markApplied`,e.markBulkApplied=`${g}markBulkApplied`,e.markBulkAppliedAnimation=`${g}markBulkAppliedAnimation`,e.markSuccess=`${g}markSuccess`,e.noAnimation=`${g}noAnimation`,e.markVBar=`${g}markVBar`,e.markVBarHighlighted=`${g}markVBarHighlighted`,e.markWritingExpert=`${g}writingExpert`,e.markWritingExpertHighlighted=`${g}markWritingExpertHighlighted`}(_||(_={}));const y=`${g}custom`,b={backgroundPosition:`center calc(100% + ${h})`,backgroundRepeat:"no-repeat",contain:"layout style",$nest:{"@media print":{borderBottomWidth:"0 !important"}}},v={$nest:{"@media print":{borderBottomWidth:"3 !important"}}},C=l.Ks.keyframes({from:{backgroundSize:"100% 0"},to:{backgroundSize:"100% 12%"}}),k={standard:`calc(${l.Ks.rem(.45)} - 3px)`,tall:`calc(${l.Ks.rem(.425)} + 1px)`},x=e=>({to:{backgroundColor:e}}),S=(e,t,i,r,n)=>(0,a._)((0,s._)({$unique:!0},b),{paddingBottom:u,borderBottom:`${h} ${n} ${t}`,transition:"border-bottom-color .5s linear",$nest:(0,a._)((0,s._)({},b.$nest),{"&[data-vertical-underline-start]:before":{borderColor:i,color:i},"& > [data-vertical-underline-body]:after":{borderColor:i},"& > [data-vertical-underline-index]":{color:i},"&[data-superscript]":{padding:0,border:"none",color:i,transition:"none"},"&:not([data-superscript])":{$nest:{[`&.${_.markSelected}.${_.markHeightStandard}`]:{paddingTop:k.standard},[`&.${_.markSelected}.${_.markHeightTall}`]:{paddingTop:k.tall},[`&.${_.markSelected}`]:{$unique:!0,borderBottomColor:r,animation:`${e} 1s ease forwards`},[`&.${_.markSelectedFocused}`]:{$unique:!0,borderBottomColor:i},[`&.${_.markSelected} .${_.markBase}:not(.${_.markSelected}):not(.${_.markWritingExpert})`]:{paddingBottom:`calc(${h} + ${u})`,borderBottomStyle:"hidden"},[`&.${_.markSelectedFocused} .${_.markBase}:not(.${_.markSelected}):not(.${_.markWritingExpert})`]:{paddingBottom:`calc(${h} + ${u})`,borderBottomStyle:"hidden"}}}})}),E=l.Ks.keyframes(x(m.Q1.CoreRed10)),w=l.Ks.keyframes(x(m.Q1.CoreYellow10)),T=l.Ks.keyframes(x(m.Q1.CoreCyan10)),M=l.Ks.keyframes(x(m.Q1.CorePurple10)),A=l.Ks.keyframes(x(m.Q1.CoreNeutral10)),K=l.Ks.keyframes(x(m.Q1.CoreNeutral10)),N=l.Ks.keyframes(x(m.Q1.CoreBlue10)),B=l.Ks.keyframes(x(m.Q1.CoreRed10)),I=l.Ks.keyframes(x(m.Q1.CoreYellow10)),$=l.Ks.keyframes(x(m.Q1.CoreBlue10)),F=l.Ks.keyframes(x(m.Q1.CoreGreen10)),R=l.Ks.keyframes(x(m.Q1.CorePurple10)),L=l.Ks.keyframes(x(m.Q1.CoreGreen10)),P=l.Ks.keyframes(x(f)),D=e=>{const t=l.Ks.color(p).fade(e).toRGBA().toString();return{borderBottomColor:t,backgroundColor:t,$nest:{[`&.${_.markHeightStandard}`]:{paddingTop:k.standard},[`&.${_.markHeightTall}`]:{paddingTop:k.tall}}}},H=e=>({borderBottomColor:"transparent",backgroundColor:l.Ks.color(p).fade(e).toRGBA().toString()}),O=l.Ks.keyframes({from:D("100%"),to:D("50%")}),Q={borderBottomWidth:"2px",borderBottomColor:`${m.Q1.CoreNeutral40}`,borderBottomStyle:"dotted",backgroundColor:"transparent"},V=l.Ks.keyframes({to:(0,s._)({},D("0%"),Q)}),U=l.Ks.keyframes({from:H("100%"),to:H("50%")}),W={$nest:{[`&.${_.markHeightStandard}`]:{paddingTop:k.standard},[`&.${_.markHeightTall}`]:{paddingTop:k.tall},[`&:not(.${_.markSelected}):not(.${_.markSelectedFocused})`]:{$nest:{[`&.${_.clarity} &.${_.clarity}`]:{borderBottomStyle:"solid",borderBottomColor:m.Q1.CoreBlue50}}},[`&.${_.correctness}, &.${_.markSelected}, &.${_.markSelectedFocused}`]:{$nest:{[`.${_.markVisible}:not(.${_.markSelected}):not(.${_.markSelectedFocused}).${_.clarity} .${_.markVisible}:not(.${_.markSelected}):not(.${_.markSelectedFocused}).${_.clarity}`]:{}}},[`&.${_.clarity}`]:{$nest:{[`& & &:not(.${_.markSelected}):not(.${_.markSelectedFocused})`]:{borderBottomStyle:"hidden !important"}}}}},z={borderBottom:"0 solid transparent !important",background:"none",animation:"none"},G=e=>({position:"relative",$nest:{[`& > .${_.markVisible}:not(.${_.markSelected}):not(.${_.markSelectedFocused})`]:{borderBottomStyle:l.Ks.important("hidden")},"&:after":{content:'"  "',position:"absolute",height:0,bottom:l.Ks.rem(-.15),right:l.Ks.rem(-.875),width:l.Ks.rem(.75),borderBottom:`${l.Ks.rem(.175)} dotted ${e}`}}}),j="solid",q="dashed",Y=(0,d.Bj)((()=>({custom(e,t){const i=l.Ks.color(e).fade(.25).toRGBA().toString(),r=l.Ks.keyframes(x(i));return[y,_.markBase,l.Ks.style(S(r,t,t,i,j)),c.b.style(S(r,t,t,i,j),v)].join(" ")},markWritingExpert:_.markWritingExpert,markWritingExpertCustom:e=>[_.markWritingExpert,_.markBase,l.Ks.style(S(e?w:P,e?m.Q1.CoreYellow30:o.Green60,e?m.Q1.CoreYellow40:o.Green60,e?m.Q1.CoreYellow10:o.BlueGray5,j),G(e?m.Q1.CoreYellow30:o.Green60)),c.b.style(S(e?w:P,e?m.Q1.CoreYellow30:o.Green60,e?m.Q1.CoreYellow40:o.Green60,e?m.Q1.CoreYellow10:o.Green60,j),G(e?m.Q1.CoreYellow30:o.Green60),v)].join(" "),markWritingExpertHighlighted:_.markWritingExpertHighlighted,markWritingExpertHighlightedCustom:e=>[_.markWritingExpertHighlighted,l.Ks.style(S(e?w:P,"transparent","transparent",e?m.Q1.CoreYellow10:f,j))].join(" "),markBase:[_.markBase,l.Ks.style(b),c.b.style(b,{$nest:{"@media print":{borderBottomWidth:"3 !important"}}})].join(" "),markAppliedBase:[_.markAppliedBase,_.markBase,l.Ks.style({paddingBottom:`${u}`,borderBottom:`${h} solid ${p}`})].join(" "),correctness:[_.correctness,_.markBase,l.Ks.style(S(B,m.Q1.CoreRed50,m.Q1.CoreRed50,m.Q1.CoreRed10,j)),c.b.style(S(B,m.Q1.CoreRed50,m.Q1.CoreRed50,m.Q1.CoreRed10,j),v)].join(" "),premium:[_.premium,_.markBase,l.Ks.style(S(I,m.Q1.CoreYellow40,m.Q1.CoreYellow40,m.Q1.CoreYellow10,q)),c.b.style(S(I,m.Q1.CoreYellow40,m.Q1.CoreYellow40,m.Q1.CoreYellow10,q),v)].join(" "),clarity:[_.clarity,_.markBase,l.Ks.style(S($,m.Q1.CoreBlue50,m.Q1.CoreBlue50,m.Q1.CoreBlue10,q)),c.b.style(S($,m.Q1.CoreBlue50,m.Q1.CoreBlue50,m.Q1.CoreBlue10,q),v)].join(" "),markVisible:[_.markVisible,l.Ks.style(W),c.b.style(W)].join(" "),engagement:[_.engagement,_.markBase,l.Ks.style(S(F,m.Q1.CoreGreen50,m.Q1.CoreGreen50,m.Q1.CoreGreen10,q)),c.b.style(S(F,m.Q1.CoreGreen50,m.Q1.CoreGreen50,m.Q1.CoreGreen10,q),v)].join(" "),delivery:[_.delivery,_.markBase,l.Ks.style(S(R,m.Q1.CorePurple50,m.Q1.CorePurple50,m.Q1.CorePurple10,q)),c.b.style(S(R,m.Q1.CorePurple50,m.Q1.CorePurple50,m.Q1.CorePurple10,q),v)].join(" "),critical:[_.critical,_.markBase,l.Ks.style(S(E,m.Q1.CoreRed50,m.Q1.CoreRed50,m.Q1.CoreRed10,j)),c.b.style(S(E,m.Q1.CoreRed50,m.Q1.CoreRed50,m.Q1.CoreRed10,j),v)].join(" "),advanced:[_.advanced,_.markBase,l.Ks.style(S(w,m.Q1.CoreYellow40,m.Q1.CoreYellow40,m.Q1.CoreYellow10,q)),c.b.style(S(w,m.Q1.CoreYellow40,m.Q1.CoreYellow40,m.Q1.CoreYellow10,q),v)].join(" "),plagiarism:[_.plagiarism,_.markBase,l.Ks.style(S(T,m.Q1.CoreCyan50,m.Q1.CoreCyan50,m.Q1.CoreCyan10,j)),c.b.style(S(w,m.Q1.CoreCyan50,m.Q1.CoreCyan50,m.Q1.CoreCyan10,j),v)].join(" "),originality:[_.originality,_.markBase,l.Ks.style(S(M,m.Q1.CorePurple50,m.Q1.CorePurple50,m.Q1.CorePurple10,q)),c.b.style(S(R,m.Q1.CorePurple50,m.Q1.CorePurple50,m.Q1.CorePurple10,q),v)].join(" "),vox:[_.vox,_.markBase,l.Ks.style(S(A,m.Q1.CoreNeutral50,m.Q1.CoreNeutral50,m.Q1.CoreNeutral10,q)),c.b.style(S(A,m.Q1.CoreNeutral50,m.Q1.CoreNeutral50,m.Q1.CoreNeutral10,q),v)].join(" "),knowledgeHub:[_.knowledgeHub,_.markBase,l.Ks.style(S(K,m.Q1.CoreNeutral50,m.Q1.CoreNeutral50,m.Q1.CoreNeutral10,q)),c.b.style(S(K,m.Q1.CoreNeutral50,m.Q1.CoreNeutral50,m.Q1.CoreNeutral10,q),v)].join(" "),synonym:[_.synonym,_.markBase,l.Ks.style(S(N,m.Q1.CoreBlue50,"transparent",m.Q1.CoreBlue50,j)),c.b.style(S(N,m.Q1.CoreBlue50,"transparent",m.Q1.CoreBlue50,j),v)].join(" "),markAnimated:[_.markAnimated,l.Ks.style({animation:`${C} .075s ease`})].join(" "),markHidden:[_.markHidden,l.Ks.style(z),c.b.style(z)].join(" "),markBulkAppliedAnimation:[_.markBulkAppliedAnimation,_.markBase,l.Ks.style(D("100%"),Q,{animation:`${O} 2s linear forwards, ${V} .25s linear 2s forwards`})].join(" "),markBulkApplied:[_.markBulkApplied,_.markBase,l.Ks.style(S(L,m.Q1.CoreNeutral40,m.Q1.CoreGreen10,m.Q1.CoreGreen10,j),Q)].join(" "),markApplied:[_.markApplied,l.Ks.style(D("100%"),{animation:`${O} .25s linear forwards`})].join(" "),markSuccess:[_.markSuccess,l.Ks.style(H("100%"),{animation:`${U} .25s linear forwards`})].join(" "),noAnimation:[_.noAnimation,l.Ks.style({animationDuration:"0s !important"})].join(" "),markSelected:_.markSelected,markSelectedFocused:_.markSelectedFocused,markHeightStandard:_.markHeightStandard,markHeightTall:_.markHeightTall,markStart:_.markStart,markVBar:_.markVBar,markVBarHighlighted:_.markVBarHighlighted}))),J=e=>e===r.pK.Default?(0,n.ID)():Y()},91796:(e,t,i)=>{i.d(t,{WJ:()=>O,N1:()=>Q});var r=i(86344),n=i(60575),s=i(76005),a=i(44781),o=i(11924),l=i(80837),c=i(95168),d=i(3346),m=i(68533),p=i(65390),h=i(86562),u=i(74056),g=i(40884),f=i(18286),_=i(26816),y=i(10334),b=i(17171),v=i(84647),C=i(54988),k=i(36840),x=i(66202),S=i(785),E=i(36644),w=i(98719),T=i(9654),M=i(79239);function A(e,t,i){const{appRouter:r,ded:a,downloadViewModel:o,upgradeViewModel:l,modalManager:c,notificationsManager:d,telemetry:m}=t,u=()=>i.visualState.set({type:M.VV.Collapsed}),g=e.name;switch(g){case M.m1.myGrammarly:return()=>{m.gnarSpec.backToMyGrammarlyButtonClick(m.pageId,"documentSetting"),r.navigateAndReload(S.L.routes.documents.href())};case M.m1.newDocument:return()=>{(0,E.Wd)({time:Date.now(),page:"editor",source:"editorNew"}),r.navigate(S.L.routes.new_document.href())};case M.m1.download:return()=>{u(),(0,v.pipe)(o,p.fold(k.Yi,(e=>e.downloadOriginal())))};case M.m1.print:return()=>{u(),setTimeout(window.print,200)};case s.H2.undo:return()=>{u(),a.undo()};case s.H2.redo:return()=>{u(),a.redo()};case s.H2.cut:return()=>{u(),a.cut()};case s.H2.copy:return()=>{u(),a.copy()};case s.H2.paste:return(t,r)=>(u(),r===_.W.Source.View?d.enqueue("clipboardNotSupported",{hotkey:(0,v.pipe)(e.hotkey,p.map((e=>i.getHotkeyString(e[0]))),p.getOrElse((()=>"hotkeys")))}):C.w);case s.H2.selectAll:return()=>{u(),x.getOrElse((e=>n.Bx.Logging.getLogger("documentSettings").error(`Failed to execute 'Select all'. ${e}`)))(a.setCursor(0,a.getLastPossibleCursorPosition()))};case M.m1.editorSettings:return()=>(u(),c.show(T.uF.preferences));case M.m1.upgradeToPremium:return()=>{u(),l.openUpgradeUrl(w.YT.Place.DenaliDocument.editorDenaliDocumentSettings)};case M.m1.logout:return()=>(u(),t.userAccount.features.denali.showSignOutConfirmationPopup?c.show(T.uF.signOut):t.logout());case M.m1.feedback:return()=>(u(),c.show(T.uF.feedback));case M.m1.whatsNew:return()=>(u(),c.show(T.uF.news));case M.m1.language:return k.Yi;case M.m1.close:case M.m1.documentHeader:case M.m1.uploadFile:case M.m1.editHeader:case M.m1.accountHeader:case M.m1.userName:case M.m1.email:case M.m1.subscription:case M.m1.support:case M.m1.privacyPolicy:case M.m1.termsOfService:case M.m1.reportABug:case M.m1.versionHistory:return u;default:return(0,h.xb)(g)}}var K=i(82094),N=i(78339),B=i(15491),I=i(89769),$=i(6987),F=i(60269),R=i(19711),L=i(62822),P=i(36094),D=i(95710);const H=()=>{const e=new Set([o.l.short]),t={active:!1,disabled:!0};return[{name:s.H2.undo,hotkey:r.ci([{modifiers:e,key:"Z"}]),initialState:t,featureOnboardingId:p.none},{name:s.H2.redo,hotkey:r.ci([{modifiers:e,key:"Y"},{modifiers:new Set([o.l.short,o.l.shift]),key:"Z"}]),initialState:t,featureOnboardingId:p.none}]};function O(e){const t=new Set([o.l.short]),i={active:!1,disabled:!1},n={active:!1,disabled:!0},l=[{name:M.m1.close,hotkey:p.none,initialState:i,featureOnboardingId:p.none},"separator",{name:M.m1.myGrammarly,hotkey:p.none,initialState:i,featureOnboardingId:p.none},"separator",{name:M.m1.documentHeader,hotkey:p.none,initialState:i,featureOnboardingId:p.none},{name:M.m1.newDocument,hotkey:p.none,initialState:i,featureOnboardingId:p.none},{name:M.m1.uploadFile,hotkey:p.none,initialState:i,featureOnboardingId:p.none},{name:M.m1.download,hotkey:p.none,initialState:i,featureOnboardingId:p.none},{name:M.m1.print,hotkey:r.ci([{modifiers:t,key:"P"}]),initialState:i,featureOnboardingId:p.none},{name:M.m1.versionHistory,hotkey:p.none,initialState:i,featureOnboardingId:p.some(a.k.VersionHistoryEditor)},"separator",{name:M.m1.editHeader,hotkey:p.none,initialState:i,featureOnboardingId:p.none},{name:s.H2.undo,hotkey:r.ci([{modifiers:t,key:"Z"}]),initialState:n,featureOnboardingId:p.none},{name:s.H2.redo,hotkey:r.ci([{modifiers:t,key:"Y"},{modifiers:new Set([o.l.short,o.l.shift]),key:"Z"}]),initialState:n,featureOnboardingId:p.none},"separator",{name:s.H2.cut,hotkey:r.ci([{modifiers:t,key:"X"}]),initialState:n,featureOnboardingId:p.none},{name:s.H2.copy,hotkey:r.ci([{modifiers:t,key:"C"}]),initialState:n,featureOnboardingId:p.none},{name:s.H2.paste,hotkey:r.ci([{modifiers:t,key:"V",source:o._.Keydown,preventDefault:!1}]),initialState:i,featureOnboardingId:p.none},{name:s.H2.selectAll,hotkey:r.ci([{modifiers:t,key:"A"}]),initialState:i,featureOnboardingId:p.none},"separator",{name:M.m1.editorSettings,hotkey:p.none,initialState:i,featureOnboardingId:p.none},"separator",{name:M.m1.accountHeader,hotkey:p.none,initialState:i,featureOnboardingId:p.none},{name:M.m1.userName,hotkey:p.none,initialState:i,featureOnboardingId:p.none},{name:M.m1.email,hotkey:p.none,initialState:i,featureOnboardingId:p.none},{name:M.m1.upgradeToPremium,hotkey:p.none,initialState:i,featureOnboardingId:p.none},{name:M.m1.language,hotkey:p.none,initialState:i,featureOnboardingId:p.none},{name:M.m1.subscription,hotkey:p.none,initialState:i,featureOnboardingId:p.none},{name:M.m1.logout,hotkey:p.none,initialState:i,featureOnboardingId:p.none},"separator",{name:M.m1.support,hotkey:p.none,initialState:i,featureOnboardingId:p.none},{name:M.m1.whatsNew,hotkey:p.none,initialState:i,featureOnboardingId:p.none},{name:M.m1.feedback,hotkey:p.none,initialState:i,featureOnboardingId:p.none},{name:M.m1.reportABug,hotkey:p.none,initialState:i,featureOnboardingId:p.none},"separator",{name:M.m1.privacyPolicy,hotkey:p.none,initialState:i,featureOnboardingId:p.none},{name:M.m1.termsOfService,hotkey:p.none,initialState:i,featureOnboardingId:p.none}],c=function(e){const t=e.isPremium.get();return i=>{if(!_.W.isItem(i))return!0;const r=i.name;switch(r){case M.m1.reportABug:return e.denali.isInternalUser;case M.m1.upgradeToPremium:return!t&&!e.demoMode;case M.m1.subscription:return!e.disableAppsPromotion&&!e.demoMode&&!g.DY.isBusinessTeamMember(e.denaliUserType);case M.m1.versionHistory:return e.denali.versionHistory;case M.m1.myGrammarly:case M.m1.newDocument:case M.m1.language:case M.m1.editorSettings:case M.m1.uploadFile:case M.m1.support:case M.m1.feedback:return!e.demoMode;case M.m1.close:case M.m1.documentHeader:case M.m1.download:case M.m1.print:case M.m1.editHeader:case M.m1.accountHeader:case M.m1.userName:case M.m1.email:case M.m1.logout:case M.m1.whatsNew:case M.m1.privacyPolicy:case M.m1.termsOfService:case s.H2.undo:case s.H2.redo:case s.H2.cut:case s.H2.copy:case s.H2.paste:case s.H2.selectAll:return!0;default:return(0,h.xb)(r)}}}(e);return l.filter(c).filter(((e,t,i)=>i[t-1]!==e))}function Q(e,t,i,a,h,v,k,x,S,E,w,T,Q,V,U,W){const z=new l.y.Keeper,G=a.features.denali.documentToolbar===g.Wk.documentSettings?O(a.features):w.platform===u.OH.Platform.IPAD?function(e){const t=new Set([o.l.short]),i={active:!1,disabled:!0};return[...O(e),"separator",{name:s.H2.undo,hotkey:r.ci([{modifiers:t,key:"UNDO",source:o._.Input}]),initialState:i,featureOnboardingId:p.none},{name:s.H2.redo,hotkey:r.ci([{modifiers:t,key:"UNDO",source:o._.Input}]),initialState:i,featureOnboardingId:p.none}]}(a.features):H(),{viewModel:j,events:q}=(0,M.fX)(G,i,a,v,E,w,T,V,U,t,e.isEditorFocused),Y=function(e,t,i){return e.filter(_.W.isItem).reduce(((e,r)=>(0,b._)((0,y._)({},e),{[r.name]:A(r,i,t)})),{})}(G,j,{appRouter:t,ded:e,userAccount:a,downloadViewModel:k,upgradeViewModel:x,modalManager:S,notificationsManager:T,telemetry:V,logout:h}),J=_.W.toMenuEvents(e.getCursor.bind(e),q).pipe(c.M((([e,t,i])=>{e!==M.m1.upgradeToPremium?V.gnarSpec.docSettingsEventFire(e,V.pageId,i):f.J.create(V.gnarSpec).trackClick({pageId:V.pageId,bannerType:"upgradeToPremium",placement:"documentSettings"})}))),Z=n.Bx.Logging.getLogger("documentSettings"),X=_.W.linkEvents(J,Y).pipe(d.W(((e,t)=>(Z.error("Error handling document settings event",e),t))));return z.push(X.pipe(m.h(function(e,t,i,r,n,a){const o=i.visualState.pipe(c.M((e=>{e.type===M.VV.Expanded?t.gnarSpec.docSettingsSidebarShow(t.pageId):t.gnarSpec.docSettingsSidebarClose(t.pageId)}))),l=a.pipe(N.p(_.W.MenuEvent.StatefulViewEvent.is),B.T((e=>e.isActivated)),I.Z(!1),$.n((e=>e?C.w:D.F.listen("escape").pipe(c.M((e=>e.preventDefault())))))),d=F.h(e.contentUpdated,r.visible.pipe(N.p(Boolean)),l,n).pipe(R.$());return i.visualState.pipe(N.p((e=>e.type===M.VV.Expanded)),c.M((()=>{i.itemsState.modify((0,K.rO)(((t,i)=>function(e,t,i){switch(e){case s.H2.undo:return(0,b._)((0,y._)({},t),{disabled:!i.canUndo()});case s.H2.redo:return(0,b._)((0,y._)({},t),{disabled:!i.canRedo()});case s.H2.cut:case s.H2.copy:return(0,b._)((0,y._)({},t),{disabled:s.LN.isEmpty(i.getCursor())});case s.H2.selectAll:return(0,b._)((0,y._)({},t),{disabled:i.getTextLength()<=1});default:return t}}(t,i,e)))),r.visible.set(!1)})),$.n((()=>d.pipe(c.M((()=>{i.visualState.set({type:M.VV.Collapsed})}))))),m.h(o),L.u(P.q6))}(e,V,j,Q,W,q))).subscribe(),e.dontFreezeWhen(j.visualState.view("type").view((e=>e===M.VV.Expanded)),"documentSettings")),{viewModel:j,dispose:()=>z.dispose()}}},79239:(e,t,i)=>{i.d(t,{LU:()=>a,VV:()=>r,W7:()=>s,fX:()=>I,m1:()=>n});var r,n,s,a,o=i(23988),l=i(84647),c=i(80074),d=i(60575),m=i(76005),p=i(42543),h=i(36094),u=i(62723),g=i(15491),f=i(41797),_=i(95168),y=i(3346),b=i(38427),v=i(21216),C=i(22013),k=i(65390),x=i(58193),S=i(66202),E=i(86562),w=i(36840),T=i(81870),M=i(74056),A=i(98719),K=i(17931),N=i(98969),B=i(26816);function I(e,t,i,r,n,s,a,o,l,c,d){const m=new p.B7;return{viewModel:new $(e,m,t,i,r,n,s,a,o,l,c,d,i.features.proVsPremiumExperiment,i.features.assignProVsPremiumExperiment,i.features.inProductDiscountsExperiment,i.features.assignInProductDiscountExperiment),events:m}}!function(e){e.Collapsed="Collapsed",e.Expanded="Expanded"}(r||(r={})),function(e){e.close="close",e.myGrammarly="myGrammarly",e.documentHeader="documentHeader",e.newDocument="newDocument",e.uploadFile="uploadFile",e.download="download",e.print="print",e.editHeader="editHeader",e.editorSettings="editorSettings",e.accountHeader="accountHeader",e.userName="userName",e.email="email",e.upgradeToPremium="upgradeToPremium",e.language="language",e.subscription="subscription",e.logout="logout",e.support="support",e.whatsNew="whatsNew",e.feedback="feedback",e.privacyPolicy="privacyPolicy",e.termsOfService="termsOfService",e.reportABug="reportABug",e.versionHistory="versionHistory"}(n||(n={})),function(e){e.uploadFile="uploadFile",e.accountHeaderLabel="accountHeaderLabel",e.languageSettings="languageSettings",e.whatsNewUpdates="whatsNewUpdates"}(s||(s={})),function(e){e.is=e=>e.type===s.languageSettings}(a||(a={}));class ${_createViewItem(e){if(!B.W.isItem(e))return e;const t=(0,l.pipe)(e.featureOnboardingId,k.map(this._userAccount.features.denali.onboardingSeen),k.map(h.B8),k.getOrElse((()=>c.s.create(!1))));return{name:e.name,title:this._getTitle(e.name),tooltip:this._getTooltip(e.name),nestedItem:this._getNestedItem(e),active:this.itemsState.view(e.name,"active"),disabled:this.itemsState.view(e.name,"disabled"),onClick:()=>{this._events.next({event:e.name,source:B.W.Source.View}),(0,l.pipe)(e.featureOnboardingId,k.filter((()=>t.get())),x.Mi(this._userAccount.features.denali.markFeatureOnboarded))},showGreenDot:(0,l.pipe)(e.featureOnboardingId,k.map(this._userAccount.features.denali.onboardingSeen),k.map(h.B8))}}_getNestedItem(e){const t=e.name;switch(t){case n.uploadFile:if(this._userAccount.features.demoMode)return k.none;const i=A.jj.$G.filter((e=>".doc"!==e&&".htm"!==e&&".html"!==e)).join(", ");return k.some(S.right({type:s.uploadFile,uploadViewModel:this._uploadViewModel,label:i}));case n.newDocument:case n.print:case m.H2.undo:case m.H2.redo:case m.H2.cut:case m.H2.copy:case m.H2.paste:case m.H2.selectAll:return(0,l.pipe)(e.hotkey,k.map((e=>S.left(this.getHotkeyString(e[0])))));case n.accountHeader:return k.some(S.right({type:s.accountHeaderLabel,brandingSet:this._userAccount.entitlements.view(k.chain(N.b.getBrandingSet))}));case n.language:return k.some(S.right({type:s.languageSettings,dialectSettings:this._dialectSettings,changeDialect:this._changeDialect,onStateChange:e=>{this._events.next({event:t,source:B.W.Source.View,isActivated:e})}}));case n.download:return this._documentModel.rtfMode===A.jj.l1.FormattingMode.on?k.some(S.left(this._textResources.documentSettings.downloadLabel)):k.none;case n.close:case n.myGrammarly:case n.documentHeader:case n.editHeader:case n.editorSettings:case n.userName:case n.email:case n.upgradeToPremium:case n.subscription:case n.logout:case n.support:case n.whatsNew:case n.feedback:case n.reportABug:case n.privacyPolicy:case n.termsOfService:case n.versionHistory:return k.none;default:return(0,E.xb)(t)}}_getTitle(e){const t=this._userAccount.profile.get();switch(e){case n.userName:return t.fullName;case n.email:return t.email;case n.upgradeToPremium:return this._isInProductDiscount?this._isEligibleForPro?this._textResources.documentSettings.getDiscountPro:this._textResources.documentSettings.getDiscountPremium:this._isEligibleForPro?this._textResources.documentSettings.upgradeToPro:this._textResources.documentSettings.upgradeToPremium;default:return this._textResources.documentSettings[e]}}_getTooltip(e){switch(e){case n.documentHeader:case n.editHeader:case n.accountHeader:case n.email:case n.userName:return k.none;default:const t=this._textResources.documentSettings;return k.some(e in t.tooltips?t.tooltips[e]:t[e])}}constructor(e,t,i,n,s,a,m,p,h,x,E,A,N,I,$,F){(0,o._)(this,"_scheme",void 0),(0,o._)(this,"_events",void 0),(0,o._)(this,"_textResources",void 0),(0,o._)(this,"_userAccount",void 0),(0,o._)(this,"_dialectSettings",void 0),(0,o._)(this,"_uploadViewModel",void 0),(0,o._)(this,"_environment",void 0),(0,o._)(this,"_notificationsManager",void 0),(0,o._)(this,"_telemetry",void 0),(0,o._)(this,"_documentModel",void 0),(0,o._)(this,"_appRouter",void 0),(0,o._)(this,"_isEditorFocused",void 0),(0,o._)(this,"_isEligibleForPro",void 0),(0,o._)(this,"_assignToProVsPremiumExperiment",void 0),(0,o._)(this,"_isInProductDiscount",void 0),(0,o._)(this,"_assignInProductDiscountExperiment",void 0),(0,o._)(this,"itemsState",void 0),(0,o._)(this,"visualState",void 0),(0,o._)(this,"items",void 0),(0,o._)(this,"head",void 0),(0,o._)(this,"hasNewItems",void 0),(0,o._)(this,"getHotkeyString",void 0),(0,o._)(this,"getBindings",void 0),(0,o._)(this,"onMenuHovered",void 0),(0,o._)(this,"onGoBackToGrammarlyHome",void 0),(0,o._)(this,"onOpenToolbar",void 0),(0,o._)(this,"_changeDialect",void 0),this._scheme=e,this._events=t,this._textResources=i,this._userAccount=n,this._dialectSettings=s,this._uploadViewModel=a,this._environment=m,this._notificationsManager=p,this._telemetry=h,this._documentModel=x,this._appRouter=E,this._isEditorFocused=A,this._isEligibleForPro=N,this._assignToProVsPremiumExperiment=I,this._isInProductDiscount=$,this._assignInProductDiscountExperiment=F,this.visualState=c.s.create({type:r.Collapsed}),this.items=[],this.getHotkeyString=C.L.HotkeyOptions.toString(this._environment.has(M.OH.Flag.isAppleSystem)),this.getBindings=(0,l.pipe)(this._scheme,B.W.Scheme.toBindingProvider((e=>this._events.next(e)),(()=>this._isEditorFocused.pipe(u.z(this.visualState.pipe(g.T((e=>e.type===r.Expanded))),w.or))))),this.onMenuHovered=()=>{this._documentModel instanceof K.F&&this._documentModel.flush().catch((e=>d.Bx.Logging.getLogger("documentSettings").error("Could not flush document from toolbar",e)))},this.onGoBackToGrammarlyHome=()=>{this._telemetry.gnarSpec.backToMyGrammarlyButtonClick(this._telemetry.pageId,"inline"),this._appRouter.navigateAndReload(T.Lz.routes.documents.href())},this.onOpenToolbar=()=>{this.visualState.set({type:r.Expanded,scrollTo:k.none}),this._assignToProVsPremiumExperiment(),this._assignInProductDiscountExperiment()},this._changeDialect=e=>f.H(this._dialectSettings.setDialect(e)).pipe(_.M((()=>{(0,l.pipe)(this._environment.actions.dialectChanged(),S.mapLeft((e=>{d.Bx.Logging.getLogger("documentSettings").error("env error during dialect change",e)}))),this._telemetry.gnarSpec.docSettingsLanguageEventFire(e,this._telemetry.pageId)})),y.W((e=>(d.Bx.Logging.getLogger("documentSettings").error("Cannot set language preferences",e),this._notificationsManager.enqueue("error"))))).toPromise(),this.itemsState=c.s.create(e.filter(B.W.isItem).reduce(((e,t)=>(e[t.name]=t.initialState,e)),{}));const[R,...L]=e.map((e=>this._createViewItem(e)));this.head=R,this.items=L,this.hasNewItems=b.zV(L.map((e=>(0,l.pipe)(e,k.fromPredicate(B.W.Item.isViewItem),k.chain((e=>e.showGreenDot)),k.getOrElse((()=>v.of(!1))))))).pipe(g.T((e=>e.some(Boolean))))}}},1404:(e,t,i)=>{i.d(t,{W:()=>r});var r,n=i(44869),s=i(84647),a=i(80074),o=i(60575),l=i(76005),c=i(7432),d=i(62822),m=i(15491),p=i(42543),h=i(80837),u=i(34078),g=i(83541),f=i(6987),_=i(21216),y=i(89769),b=i(60269),v=i(54988),C=i(3346),k=i(36094),x=i(95710),S=i(74380),E=i(66202),w=i(86562),T=i(23121),M=i(36840),A=i(65390),K=i(58193);!function(e){let t,i,r,N,B,I;!function(e){e.EditingMode="EditingMode",e.ReadMode="ReadMode"}(t=e.VisualState||(e.VisualState={})),function(e){e.is=e=>e.visualState===t.EditingMode}(i||(i={})),function(e){e.is=e=>e.type!==N.Type.Close&&e.type!==N.Type.ApplyRemove&&e.type!==N.Type.ApplyChange}(r||(r={})),function(e){let i,r,n;!function(e){e.SwitchToReadMode="SwitchToReadMode",e.SwitchToEditMode="SwitchToEditMode",e.ApplyChange="ApplyChange",e.ApplyRemove="ApplyRemove",e.Close="Close"}(i=e.Type||(e.Type={})),function(e){e.is=e=>e.type===N.Type.SwitchToReadMode}(r=e.SwitchToReadMode||(e.SwitchToReadMode={})),function(e){e.create=function(e,t,i){return(0,s.pipe)(e,S.e,E.bimap((()=>{}),(e=>({type:N.Type.ApplyChange,url:e,textRange:t,rect:i}))))}}(n=e.ApplyChange||(e.ApplyChange={})),e.initMapFromState=function(e){return t=>{const i=e.getFormatting(t.range);if(l.M_.LinkPayload.is(i)){const e=i[l.M_.Type.link],{rect:r,url:n,range:s}=e[0];return"selection"===t.source?{type:N.Type.SwitchToReadMode,textRange:s,rect:r,url:n}:{type:N.Type.SwitchToEditMode,textRange:s,rect:r,url:n}}{(0,w.V1)("toolbar"===t.source,"non-toolbar source can not emit ranges without link formatting");const i=(0,s.pipe)(e.getSelectionRect(),E.fold((()=>{throw new w.zU("Failed to get selection rect while trying to add link")}),s.identity));return{type:N.Type.SwitchToEditMode,textRange:t.range,rect:i,url:""}}}},e.initHandlers=function(e,t,i){const r=()=>T.zb((()=>i.next()));return i=>{switch(i.type){case N.Type.SwitchToEditMode:return e.setCursor(i.textRange.start,c.vY.size(i.textRange));case N.Type.SwitchToReadMode:return E.right(void 0);case N.Type.ApplyChange:return(0,s.pipe)(t.removeLink(i.textRange),E.chain((()=>c.vY.isEmpty(i.textRange)?(0,s.pipe)(t.insertLinkWithCaption(i.textRange.start,i.url,i.url),E.chain((()=>e.setCursor(i.textRange.start+i.url.length,c.vY.size(i.textRange))))):t.insertLink(i.textRange,i.url))));case N.Type.ApplyRemove:return(0,s.pipe)(r(),E.chain((()=>t.removeLink(i.textRange))),E.chain((()=>e.setCursor(i.textRange.start,0))));case N.Type.Close:return r();default:return(0,w.xb)(i)}}},e.initMapToView=function(e){return i=>{const r=()=>e.next({type:N.Type.Close});switch(i.type){case N.Type.SwitchToEditMode:const n=a.s.create(i.url);return{visualState:t.EditingMode,rect:i.rect,inputContent:n,isValid:n.view(M.z2),textRange:i.textRange,close:r,apply:()=>{(0,s.pipe)(N.ApplyChange.create(n.get(),i.textRange,i.rect),E.fold(r,(t=>e.next(t))))}};case N.Type.SwitchToReadMode:return{visualState:t.ReadMode,url:i.url,rect:i.rect,textRange:i.textRange,close:r,remove:()=>e.next({type:N.Type.ApplyRemove,textRange:i.textRange}),change:()=>e.next({type:N.Type.SwitchToEditMode,url:i.url,rect:i.rect,textRange:i.textRange})};default:return(0,w.xb)(i)}}}}(N||(N={})),function(e){e.eq=(0,n.ee)(((e,t)=>e.source===t.source&&c.vY.ord.equals(e.range,t.range)))}(B=e.LinkState||(e.LinkState={})),function(e){e.listenCloseHotkey=function(){return x.F.listen("escape").pipe(d.u({type:N.Type.Close}))},e.listenApplyHotkey=function(e){return x.F.listen("enter").pipe(m.T((()=>{const t=(0,s.pipe)(e.get(),A.filter(i.is));(0,w.V1)(A.isSome(t),"Called Apply when view wasn't in edit mode");const r=K.$v(t);return(0,s.pipe)(N.ApplyChange.create(r.inputContent.get(),r.textRange,r.rect),E.fold((()=>({type:N.Type.Close})),(e=>e)))})))}}(I||(I={})),e.createManager=function(e,i,n){const l=a.s.create(A.none),c=new p.B7,d=N.initMapFromState(e),x=N.initMapToView(c),S=N.initHandlers(e,i,n.closeLinks),w=o.Bx.Logging.getLogger("formattingLinksManager"),T=new h.y.Keeper;return T.push(e.dontFreezeWhen(l.view(A.exists((({visualState:e})=>e===t.EditingMode))),"links"),n.formattingLinkState.pipe(u.s((0,s.flow)(A.filter((e=>"selection"===e.source)),A.fold((()=>0),(()=>200)),g.timer)),f.n(A.fold((()=>_.of(A.none)),(e=>c.pipe(y.Z(d(e)),f.n((e=>b.h(_.of(e),I.listenCloseHotkey(),e.type===N.Type.SwitchToEditMode?I.listenApplyHotkey(l):v.w))),f.n((e=>(0,s.pipe)(S(e),E.fold((e=>(w.error("Error in formatting links",e),n.closeLinks.next(),v.w)),(()=>r.is(e)?_.of(e):v.w))))),m.T(x),m.T(A.some))))),C.W((e=>(w.error("Error in formatting links",e),v.w)))).subscribe(k.H9(l))),{visualState:l,dispose:()=>T.dispose()}}}(r||(r={}))},80019:(e,t,i)=>{i.d(t,{Ht:()=>r,hn:()=>N,uY:()=>n});var r,n,s=i(23988),a=i(10334),o=i(17171),l=i(86344),c=i(48928),d=i(84647),m=i(80074),p=i(60575),h=i(76005),u=i(11924),g=i(42543),f=i(95168),_=i(62822),y=i(36094),b=i(18515),v=i(15491),C=i(3346),k=i(68533),x=i(22013),S=i(78590),E=i(65390),w=i(66202),T=i(86562),M=i(36840),A=i(74056),K=i(26816);function N(e,t,i,n,s,a,o,c){const d=[{name:"head",hotkey:E.none,initialState:{active:!1,disabled:!1},featureOnboardingId:E.none},{name:h.M_.Type.bold,hotkey:l.ci([{modifiers:new Set([u.l.short]),key:"B"}]),initialState:{active:!1,disabled:!1},featureOnboardingId:E.none},{name:h.M_.Type.italic,hotkey:l.ci([{modifiers:new Set([u.l.short]),key:"I"}]),initialState:{active:!1,disabled:!1},featureOnboardingId:E.none},{name:h.M_.Type.underline,hotkey:l.ci([{modifiers:new Set([u.l.short]),key:"U"}]),initialState:{active:!1,disabled:!1},featureOnboardingId:E.none},"separator",{name:h.M_.Type.header1,hotkey:l.ci([{modifiers:new Set([u.l.short,u.l.alt]),key:"1"}]),initialState:{active:!1,disabled:!1},featureOnboardingId:E.none},{name:h.M_.Type.header2,hotkey:l.ci([{modifiers:new Set([u.l.short,u.l.alt]),key:"2"}]),initialState:{active:!1,disabled:!1},featureOnboardingId:E.none},"separator",{name:h.M_.Type.link,hotkey:l.ci([{modifiers:new Set([u.l.short]),key:"K"}]),initialState:{active:!1,disabled:!1},featureOnboardingId:E.none},"separator",{name:h.M_.Type.orderedList,hotkey:l.ci([{modifiers:new Set([u.l.short,u.l.shift]),key:"7"}]),initialState:{active:!1,disabled:!1},featureOnboardingId:E.none},{name:h.M_.Type.bulletList,hotkey:l.ci([{modifiers:new Set([u.l.short,u.l.shift]),key:"8"}]),initialState:{active:!1,disabled:!1},featureOnboardingId:E.none},"separator",{name:"clear",hotkey:l.ci([{modifiers:new Set([u.l.short]),key:"\\"}]),initialState:{active:!1,disabled:!1},featureOnboardingId:E.none}],m=d.filter((0,M.M4)(K.W.isItem,(e=>e.name!==h.M_.Type.link))),g=r.initHandlers(m),{formattingEvents:_,viewModel:y}=function(e,t,i,n,s,a,o){const l=r.ToolbarViewModel.create(i,n,o,t);return{viewModel:l,formattingEvents:K.W.toMenuEvents(e,l.events).pipe(f.M((([e,t,i])=>{s.rtfMenuEventFire(e,a,i)})))}}(e,n,d,s,a,o,c),[v,x]=b.j(_,(e=>e[0]!==h.M_.Type.link)),S=function(e,t,i,n,s){const a=i(e,s),o=p.Bx.Logging.getLogger("formattingMenuManager"),l=K.W.linkEvents(n,a).pipe(C.W(((e,t)=>(o.error("Error handling formatting event",e),t)))),c=r.ToolbarViewModel.stateManager(t,s),d=l.pipe(k.h(c)).subscribe();return{dispose:()=>{d.unsubscribe()}}}(t,i,g,v,y);return{dispose:()=>{S.dispose()},viewModel:y,linkEvents:x}}!function(e){let t,i,r;!function(e){e.asMenuScheme=e=>e.slice(1)}(t=e.Scheme||(e.Scheme={})),function(e){e.Collapsed="Collapsed",e.Expanded="Expanded"}(i=e.VisualState||(e.VisualState={})),function(e){e.create=function(e,r,n,s){const a=e=>r.toolbar.formatting[e],o=e=>E.some(r.toolbar.formatting.tooltips[e]),l=(e,t)=>(0,d.pipe)(o(e.name),E.map((e=>`${r.toolbar.formatting.tooltips.head} ${e}`)),E.map((e=>(0,d.pipe)(t,E.map(w.fold(d.identity,d.constVoid)),E.map((t=>`${e}, shortcut ${t}`)),E.getOrElse((0,d.constant)(e))))),E.toUndefined),c=x.L.HotkeyOptions.toString(n.has(A.OH.Flag.isAppleSystem)),p=new g.B7,h=m.s.create({menu:i.Expanded,items:e.filter(K.W.isItem).reduce(((e,t)=>(e[t.name]=t.initialState,e)),{})}),u=e[0];return{getBindings:(0,d.pipe)(e,t.asMenuScheme,K.W.Scheme.toBindingProvider((e=>p.next(e)),(()=>s))),head:{name:u.name,title:a(u.name),tooltip:o(u.name),nestedItem:E.none,active:h.view("items",u.name,"active"),disabled:h.view("items",u.name,"disabled"),onClick:()=>p.next({event:u.name,source:K.W.Source.View}),showGreenDot:E.none},list:t.asMenuScheme(e).map((e=>{if(K.W.isItem(e)){const t=(0,d.pipe)(e.hotkey,E.map((e=>w.left(c(e[0])))));return{name:e.name,title:a(e.name),tooltip:o(e.name),nestedItem:t,ariaLabel:l(e,t),active:h.view("items",e.name,"active"),disabled:h.view("items",e.name,"disabled"),onClick:()=>p.next({event:e.name,source:K.W.Source.View}),showGreenDot:E.none}}return e})),visualState:h.view("menu"),state:h,events:p}},e.stateManager=function(e,{state:t}){return e.pipe(f.M((e=>{t.lens("items").modify((0,c.rO)(((t,i)=>t===h.M_.Type.bulletList?(0,o._)((0,a._)({},i),{active:!0===e[h.M_.Type.bulletList]||!0===e[h.M_.Type.dashedList]}):t===h.M_.Type.link?i:h.M_.is(t)?(0,o._)((0,a._)({},i),{active:!0===e[t]}):i)))})),_.u(y.q6))}}(r=e.ToolbarViewModel||(e.ToolbarViewModel={}));e.initHandlers=function(e){return(t,r)=>{const n=((e,{state:t})=>r=>{const n=t=>{e({index:t.start,length:t.end-t.start,meta:{source:h.LN.Meta.Source.api,formatting:{bold:!1,italic:!1,underline:!1,bulletList:!1,dashedList:!1,header1:!1,header2:!1,orderedList:!1,strike:!1}}})};switch(r.name){case"head":return()=>t.lens("menu").modify((e=>e===i.Collapsed?i.Expanded:i.Collapsed));case"clear":return n;case h.M_.Type.bold:case h.M_.Type.bulletList:case h.M_.Type.header1:case h.M_.Type.header2:case h.M_.Type.italic:case h.M_.Type.orderedList:case h.M_.Type.underline:return s=r.name,i=>{const r=t.get().items[s].active,n=(t={})=>e({index:i.start,length:i.end-i.start,meta:{source:h.LN.Meta.Source.api,formatting:(0,o._)((0,a._)({},t),{[s]:!r})}});S.pR.isBlockFormat(s)?n({[h.M_.Type.header1]:!1,[h.M_.Type.header2]:!1,[h.M_.Type.orderedList]:!1,[h.M_.Type.bulletList]:!1,[h.M_.Type.dashedList]:!1}):n()};default:return(0,T.xb)(r.name)}var s})(t,r);return e.reduce(((e,t)=>(e[t.name]=n(t),e)),{})}}}(r||(r={})),function(e){e.fromToolbar=function(e){return e.pipe(v.T((([,e])=>({range:e,source:"toolbar"}))))},e.fromDenaliEditor=function(e){return e.pipe(v.T((e=>h.M_.LinkPayload.is(e)?E.some({range:e[h.M_.Type.link][0].range,source:"selection"}):E.none)))}}(n||(n={})),function(e){let t;!function(e){e.Mock=class{constructor(){(0,s._)(this,"viewModel",void 0),(0,s._)(this,"linkEvents",new g.B7),(0,s._)(this,"changes",new g.B7)}}}(t=e.Manager||(e.Manager={}))}(r||(r={}))},26816:(e,t,i)=>{i.d(t,{W:()=>r});var r,n=i(84647),s=i(76005),a=i(95168),o=i(15491),l=i(92051),c=i(36094),d=i(38886),m=i(65390);!function(e){let t,i,p,h;!function(e){e.toBindingProvider=(e,t)=>i=>s=>(0,n.pipe)(i,d.pb(r.isItem),d.cy((i=>(0,n.pipe)(i.hotkey,m.map((n=>n.map((n=>({action:i.name,hotkey:s(n),isActive:t(i.name),bind:a.M((()=>e({event:i.name,source:r.Source.Hotkey})))}))))),m.getOrElse((()=>[]))))))}(t=e.Scheme||(e.Scheme={})),e.isItem=e=>"string"!=typeof e,function(e){e.isViewItem=e=>"string"!=typeof e}(i=e.Item||(e.Item={})),function(e){let t;!function(e){e.is=e=>"isActivated"in e}(t=e.StatefulViewEvent||(e.StatefulViewEvent={})),e.isView=e=>e.source===r.Source.View,e.isHotkey=e=>e.source===r.Source.Hotkey}(p=e.MenuEvent||(e.MenuEvent={})),function(e){e.Hotkey="Hotkey",e.View="View"}(h=e.Source||(e.Source={})),e.toMenuEvents=(e,t)=>t.pipe(o.T((t=>[t.event,s.LN.toTextRange(e()),t.source]))),e.linkEvents=function(e,t){return e.pipe(l.ZZ((([e,i,r])=>c.br(t[e].call(null,i,r)))))}}(r||(r={}))},91956:(e,t,i)=>{i.d(t,{Qn:()=>n,kt:()=>r,xK:()=>F});var r,n,s=i(23988),a=i(10334),o=i(17171),l=i(93267),c=i(84647),d=i(80074),m=i(61198),p=i(63967),h=i(62597),u=i(19805),g=i(54988),f=i(6987),_=i(42543),y=i(15491),b=i(80837),v=i(60269),C=i(78339),k=i(95168),x=i(83541),S=i(68594),E=i(36094),w=i(84714),T=i(44869),M=i(65390),A=i(38908),K=i(36840),N=i(86562),B=i(40884),I=i(44011),$=i(9654);!function(e){let t;!function(e){e.eq=T.OW({isSidebarOpen:l.Eq,isGgoOpen:l.Eq})}(t=e.UIState||(e.UIState={}))}(r||(r={})),function(e){class t extends w.Rv.Mock{constructor(e={},t=!0){super(e),(0,s._)(this,"popover",d.s.create(M.none)),(0,s._)(this,"state",void 0),(0,s._)(this,"alertSwitchChanges",g.w),(0,s._)(this,"premiumButtonData",d.s.create(M.none)),(0,s._)(this,"toggleSidebar",((e,t)=>this.state.set({navigationSource:t,isSidebarOpen:e,isGgoOpen:!1}))),this.state=d.s.create({isSidebarOpen:t,isGgoOpen:!1,navigationSource:p.Kz.sidebar})}}e.Mock=t}(n||(n={}));class F{_switchToLens(e,t){const i=this.activeLensId.get(),r=i===e?h.J.SpecialId.AllAlerts:e;if(i!==r)return r!==h.J.SpecialId.Plagiarism||this._features.plagiarism.get()===B.Fh.enabled||this._features.denali.isAiDetectorEnabled?void this._lensSwitch.next({lensId:r,focusFirst:t.focusFirst,source:t.actionSource}):this.popover.set(M.some(w.Qh.PlagiarismHook))}_listenNavigationEvent(){this._subs.push(this.events.pipe(f.n((e=>{switch(e.type){case"setGoals":return this._modalManager.show(m.ug.setGoals("user"));case"preferences":return this._modalManager.show($.uF.preferences);case"performance":return this._modalManager.show(m.ug.performance);case"switchToLens":switch(this._switchToLens(e.id,{focusFirst:e.focusFirst,actionSource:e.actionSource}),e.id){case h.J.SpecialId.FreePremiumAlerts:this._telemetry.gnarSpec.freeAdvancedIssuesButtonClick(this._telemetry.pageId,"wiritingAssistant");break;case h.J.SpecialId.Premium:this._telemetry.gnarSpec.advancedIssuesButtonClick(this._telemetry.pageId,"wiritingAssistant");break;default:this._telemetry.gnarSpec.openLensButtonClick(A.PT(e.title),this._telemetry.pageId)}return g.w;case"toggleSidebar":return this.state.view("isSidebarOpen").get()?this._switchToLens(h.J.SpecialId.Closed,{focusFirst:!0,actionSource:e.actionSource}):this._focusClosestAlert(p.Kz.api),this._toggleSidebarState(p.Kz.sidebar),g.w;case"switchToCritical":return this._features.isFree.get()?this._focusClosestAlert(e.actionSource):this._focusClosestAlertByPredicate(p.Fc.isCriticalImpact,e.actionSource),g.w;case"switchToAdvanced":return this._features.isFree.get()?this._switchToLens(h.J.SpecialId.Premium,{focusFirst:!0,actionSource:p.Kz.sidebar}):this._focusClosestAlertByPredicate((0,K.AU)(p.Fc.isCriticalImpact),e.actionSource),g.w;case"switchToAll":return this._switchToLens(h.J.SpecialId.AllAlerts,{actionSource:e.actionSource,focusFirst:e.focusFirst}),this.toggleSidebar(!0,p.Kz.sidebar),g.w;default:return(0,N.xb)(e)}}))).subscribe())}_focusClosestAlert(e){(0,c.pipe)(this._getAlertClosestToCursor(p.Fc.isRegisteredApplicableAlert,"cursor"),M.fold((()=>this._switchToLens(h.J.SpecialId.AllAlerts,{focusFirst:!0,actionSource:e})),(t=>this._alertSwitch.next({alertHighlight:t,source:e}))))}_focusClosestAlertByPredicate(e,t){(0,c.pipe)(this._getAlertClosestToCursor((0,K.M4)(p.Fc.isRegisteredApplicableAlert,e),"cursor"),M.fold((()=>this._focusClosestAlert(t)),(e=>this._alertSwitch.next({alertHighlight:e,source:t}))))}get _premiumButtonData(){const e=this._premiumCount,t=this._features.proVsPremiumExperiment?"Pro":e.get().title,i=e.view("count");return d.s.combine(this._features.isFree,this._oggyUphookModel.isAvailable,((e,r)=>e&&r?M.some({id:h.J.SpecialId.Premium,title:t,alerts:i}):M.none))}dispose(){this._subs.dispose()}constructor(e,t,i,n,l,m,g,f,T,A,N){(0,s._)(this,"_telemetry",void 0),(0,s._)(this,"_modalManager",void 0),(0,s._)(this,"_features",void 0),(0,s._)(this,"_getAlertClosestToCursor",void 0),(0,s._)(this,"_documentModel",void 0),(0,s._)(this,"cardVisualMode",void 0),(0,s._)(this,"_isCheetahEnabled",void 0),(0,s._)(this,"_premiumCount",void 0),(0,s._)(this,"_oggyUphookModel",void 0),(0,s._)(this,"_oggyPlagiarismModel",void 0),(0,s._)(this,"_lensSwitch",void 0),(0,s._)(this,"_alertSwitch",void 0),(0,s._)(this,"popover",void 0),(0,s._)(this,"alertSwitchChanges",void 0),(0,s._)(this,"state",void 0),(0,s._)(this,"events",void 0),(0,s._)(this,"_subs",void 0),(0,s._)(this,"activeLensId",void 0),(0,s._)(this,"a11yContrast",void 0),(0,s._)(this,"documentActions",void 0),(0,s._)(this,"premiumButtonData",void 0),(0,s._)(this,"showMuteControl",void 0),(0,s._)(this,"lensTitleType",void 0),(0,s._)(this,"toggleSidebar",void 0),(0,s._)(this,"_toggleSidebarState",void 0),this._telemetry=e,this._modalManager=t,this._features=i,this._getAlertClosestToCursor=n,this._documentModel=l,this.cardVisualMode=g,this._isCheetahEnabled=f,this._premiumCount=T,this._oggyUphookModel=A,this._oggyPlagiarismModel=N,this._lensSwitch=new _.B7,this._alertSwitch=new _.B7,this.popover=d.s.create(M.none),this.alertSwitchChanges=this._alertSwitch.pipe(y.T((({alertHighlight:e,source:t})=>(0,o._)((0,a._)({},e),{source:t})))),this.state=d.s.create({isSidebarOpen:this._features.denali.sidebarOpenedByDefault,isGgoOpen:!1,navigationSource:p.Kz.api}),this.events=new _.B7,this._subs=new b.y.Keeper,this.a11yContrast=!0,this.documentActions=d.s.combine(this._features.plagiarism,this._features.proofit,this._documentModel.documentLength.view("full").view((e=>0===e)),this._documentModel.title,this._isCheetahEnabled,this._oggyPlagiarismModel.isAvailable,((e,t,i,r,n,s)=>({plagiarism:e===B.Fh.enabled?i&&!this._features.isSmartPlagiarismUphookEnabled?w.Rv.plagiarismDisabled(w.GJ.EmptyDocument):s?w.Rv.documentActionAvailable:w.Rv.plagiarismDisabled(w.GJ.NotAvailable):e===B.Fh.upgradeIsNeeded?w.Rv.documentActionAvailable:w.Rv.plagiarismDisabled(w.GJ.NotAvailable),proofit:t===B.Fh.enabled?i?w.Rv.proofitDisabled(w.M7.EmptyDocument):r===I.premiumDemoDocument.title?w.Rv.proofitDisabled(w.M7.DemoDoc):w.Rv.documentActionAvailable:t===B.Fh.upgradeIsNeeded?w.Rv.documentActionAvailable:w.Rv.proofitDisabled(w.M7.NotAvailable),cheetah:n?w.Rv.documentActionAvailable:w.Rv.cheetahDisabled(w.py.NotAvailable)}))),this.toggleSidebar=(e,t)=>this.state.modify((i=>(0,o._)((0,a._)({},i),{navigationSource:t,isSidebarOpen:e,isGgoOpen:!1}))),this._toggleSidebarState=e=>this.state.modify((t=>(0,o._)((0,a._)({},t),{navigationSource:e,isSidebarOpen:!t.isSidebarOpen,isGgoOpen:!1}))),this.premiumButtonData=this._premiumButtonData,this._listenNavigationEvent(),this.showMuteControl=(0,c.pipe)(m,M.fold((()=>d.s.create(!1)),(e=>e.mutedCategories.view(u.x.BaseMutedCategories.filter((0,K.AU)(u.x.Category.isSpecial))).view((e=>e.size>0))))),this.lensTitleType=w.Rv.LensTitleType.default;const $=d.s.create(this._features.denali.sidebarOpenedByDefault?h.J.SpecialId.AllAlerts:h.J.SpecialId.Closed);this._subs.push(v.h(this._lensSwitch.pipe(C.p((({lensId:e})=>h.J.isRelevantForOggy(e)))),this._alertSwitch.pipe(y.T((({source:e})=>({lensId:h.J.SpecialId.AllAlerts,source:e}))))).pipe(k.M((({lensId:e,source:t})=>{$.set(e),this.state.modify((i=>(0,o._)((0,a._)({},i),{navigationSource:t,isSidebarOpen:i.isSidebarOpen||h.J.isCheetah(e),isGgoOpen:h.J.isCheetah(e)})))}))).subscribe(),this.state.pipe(x.skipBy(r.UIState.eq),S.i(1),y.T((({isSidebarOpen:e,isGgoOpen:t})=>e?t?h.J.SpecialId.Cheetah:h.J.SpecialId.AllAlerts:h.J.SpecialId.Closed)),k.M(E.H9($))).subscribe()),this._subs.push(this._oggyUphookModel.isFocused.pipe(y.T((e=>e?h.J.SpecialId.Premium:h.J.SpecialId.AllAlerts)),k.M(E.H9($))).subscribe(),this._oggyPlagiarismModel.isFocused.pipe(y.T((e=>e?h.J.SpecialId.Plagiarism:h.J.SpecialId.AllAlerts)),k.M(E.H9($))).subscribe()),this._subs.push(this.premiumButtonData.pipe(k.M((e=>{M.isSome(e)&&this._features.assignProVsPremiumExperiment()}))).subscribe()),this.activeLensId=$.view(),(0,K.hJ)("toggleSidebar",(()=>this.state.modify((e=>(0,o._)((0,a._)({},e),{isSidebarOpen:!e.isSidebarOpen}))))),(0,K.hJ)("activeLensId",(()=>this.activeLensId.get())),(0,K.hJ)("navigationState",(()=>this.state.get()))}}},35382:(e,t,i)=>{i.d(t,{A:()=>a,f:()=>r});var r,n=i(23988),s=i(60575);!function(e){let t;!function(e){e.isVideo=function(e){return"video"in e}}(t=e.Content||(e.Content={}))}(r||(r={}));class a{markSeen(e){return s.Bx.Logging.getLogger("whatsnew").info("News shown",e),this._settings.markNewsItemsAsSeen(e)}constructor(e){(0,n._)(this,"_settings",void 0),this._settings=e}}},54872:(e,t,i)=>{i.d(t,{xJ:()=>O,LT:()=>Q,XS:()=>z});var r=i(23988),n=i(10334),s=i(17171),a=i(38886),o=i(84647),l=i(80074),c=i(60575),d=i(7432),m=i(34980),p=i(76005),h=i(72106),u=i(14973),g=i(11924),f=i(42543),_=i(15491),y=i(68533),b=i(6987),v=i(36094),C=i(62822),k=i(78339),x=i(8331),S=i(54988),E=i(21216),w=i(95168),T=i(60269),M=i(58347),A=i(21662),K=i(46669),N=i(43308),B=i(30396),I=i(68594),$=i(95710),F=i(36840),R=i(65390),L=i(58193),P=i(44869),D=i(66202);const H=JSON.parse('{"G":"_f5a63458-view-model-mark"}');var O,Q,V;!function(e){e.focus="searchFocus",e.next="searchNext",e.previous="searchPrevious"}(O||(O={})),function(e){var t=e.SEARCH_INPUT_NAME="search-input";e.isSearchInput=function(e){return Boolean(e)&&e.name===t},e.Mock=class{select(){throw new Error("Method not implemented.")}constructor(e){(0,r._)(this,"getBindings",(()=>{throw new Error("Method not implemented.")})),(0,r._)(this,"visible",l.s.create(!1)),(0,r._)(this,"term",l.s.create("")),(0,r._)(this,"result",void 0),(0,r._)(this,"hotkeysActions",new f.B7),(0,r._)(this,"dispose",F.Yi),this.result=l.s.create((0,o.pipe)(R.fromNullable(e),R.map((e=>(0,s._)((0,n._)({},e),{next:F.Yi,prev:F.Yi})))))}}}(Q||(Q={}));class U{next(){this._ops._forceSearch(),this._ops._selectedPos.modify((0,o.flow)(R.map((e=>e+1)),R.map((e=>e>this.count-1?0:e)),L.NW(R.some(0)))),this._ops._highlightSelectedRange(1===this.count)}prev(){this._ops._forceSearch(),this._ops._selectedPos.modify((0,o.flow)(R.map((e=>e-1)),R.map((e=>e<0?this.count-1:e)),L.NW(R.some(this.count-1)))),this._ops._highlightSelectedRange()}equals(e){return null!=e&&this.count===e.count&&this.current===e.current&&this._term===e._term}constructor(e,t,i){(0,r._)(this,"_ops",void 0),(0,r._)(this,"_term",void 0),(0,r._)(this,"count",void 0),(0,r._)(this,"current",void 0),this._ops=e,this._term=t,this.count=i.ranges.length,this.current=(0,o.pipe)(i.selected,R.getOrElse((()=>0)))+1,this._ops._highlightSelectedRange()}}!function(e){const t="searchRange";e.create=(e,i)=>d.vY.create(e,i,{type:t}),e.is=function(e){return typeof e.meta.type===t}}(V||(V={}));const W=P.ee(((e,t)=>e.meta.id===t.meta.id));class z{_searchTerm(e,t){let i=-1;const r=[];for(;i=e.indexOf(t,i+1),i>-1;)r.push(V.create(i,i+t.length));return r}_listenOpenEvents(){return u.hJ.activeCount.pipe(_.T((e=>e<1)),y.h(this.visible.pipe(_.T((e=>!e))))).pipe(b.n(v.vh(this.hotkeysActions)),C.u(!0)).subscribe(v.H9(this.visible))}_listenCloseEvents(){const e=$.F.listen("escape");return this.visible.pipe(b.n(v.vh(e)),y.h(u.hJ.activeCount.pipe(k.p((e=>e>0)))),C.u(!1)).subscribe(v.H9(this.visible))}_replaceRanges(e){this._rangesState.modify((t=>(t.ranges.forEach((e=>this._rangeManager.deregisterRange(e.meta.id))),{ranges:e.map((e=>this._rangeManager.registerRange(`search_${this.term.get().replace(/\s*/g,"_")}_${z.searchMarkCount++}`,e))),selected:e.length>0?R.some(0):R.none})))}_ensureMarkInViewport(e){return(0,o.pipe)(e,D.fromOption((()=>new Error("Mark should not be null at this point"))),D.chain((e=>e.getRect())),D.map(m.W.relativeToViewport),D.fold(x.$,(t=>{const{top:i,bottom:r}=this._editorViewport.get();return t.top<i+50||t.top>r-50?this._ded.scrollToMark(L.$v(e).id,{paddingTop:500,animate:p.nA.fast}):S.w})))}constructor(e,t,i){(0,r._)(this,"_ded",void 0),(0,r._)(this,"_rangeManager",void 0),(0,r._)(this,"_editorViewport",void 0),(0,r._)(this,"_log",void 0),(0,r._)(this,"_subs",void 0),(0,r._)(this,"_forceSearchSubject",void 0),(0,r._)(this,"_rangesState",void 0),(0,r._)(this,"_selectedRange",void 0),(0,r._)(this,"_activeMark",void 0),(0,r._)(this,"visible",void 0),(0,r._)(this,"term",void 0),(0,r._)(this,"result",void 0),(0,r._)(this,"hotkeysActions",void 0),(0,r._)(this,"select",void 0),(0,r._)(this,"dispose",void 0),(0,r._)(this,"_selectedPos",void 0),(0,r._)(this,"_forceSearch",void 0),(0,r._)(this,"_highlightSelectedRange",void 0),(0,r._)(this,"getBindings",void 0),(0,r._)(this,"_bindHotkey",void 0),(0,r._)(this,"_removeRanges",void 0),(0,r._)(this,"_findRanges",void 0),(0,r._)(this,"_changeActiveMark",void 0),(0,r._)(this,"_currentMark",void 0),this._ded=e,this._rangeManager=t,this._editorViewport=i,this._log=c.Bx.Logging.getLogger("SearchViewModel"),this._subs=[],this._forceSearchSubject=new f.B7,this._rangesState=l.s.create({ranges:[],selected:R.none}),this._selectedRange=this._rangesState.view((e=>(0,o.pipe)(e.selected,R.chain((t=>a.$I(t,e.ranges)))))),this._activeMark=l.s.create(R.none),this.visible=l.s.create(!1),this.term=l.s.create(""),this.result=l.s.create(R.none),this.hotkeysActions=new f.B7,this.select=()=>{this._forceSearch(),this._rangesState.modify((({ranges:e,selected:t})=>({ranges:e,selected:(0,o.pipe)(t,L.NW(R.some(0)),R.filter((()=>(0,F.z2)(e))))}))),this._highlightSelectedRange()},this.dispose=()=>{this.term.set(""),this._subs.forEach((e=>e.unsubscribe())),this._subs=[]},this._selectedPos=this._rangesState.lens("selected"),this._forceSearch=()=>this._forceSearchSubject.next(),this._highlightSelectedRange=(e=!1)=>{const t=this._selectedRange.get();e&&R.getEq(W).equals(this._activeMark.get(),t)&&this._ensureMarkInViewport(this._currentMark).subscribe({error:e=>this._log.error("Cannot scroll to mark",e)}),this._activeMark.set(t)},this.getBindings=e=>{const t=new Set([g.l.short]),i=E.of(!0);return[{action:O.focus,hotkey:e({modifiers:t,key:"f"}),bind:this._bindHotkey,isActive:i},{action:O.next,hotkey:e({modifiers:t,key:"g"}),bind:this._bindHotkey,isActive:i},{action:O.previous,hotkey:e({modifiers:new Set([g.l.short,g.l.shift]),key:"g"}),bind:this._bindHotkey,isActive:i}]},this._bindHotkey=w.M(this.hotkeysActions),this._removeRanges=e=>{(0,o.pipe)(this._activeMark.get(),R.filter((t=>e.has(t.meta.id))),R.map((()=>this._activeMark.set(R.none)))),this._rangesState.modify((t=>{const i=t.ranges.filter((({meta:{id:t}})=>!e.has(t)||(this._rangeManager.deregisterRange(t),!1)));return{ranges:i,selected:(0,o.pipe)(t.selected,R.filter((e=>e<i.length)))}}))},this._findRanges=e=>(0,F.z2)(e)?this._searchTerm(this._ded.getText().toLowerCase(),e.toLowerCase()):[],this._changeActiveMark=({prev:e,next:t})=>{this._currentMark=R.none,(0,o.pipe)(e,L.Mi((e=>{this._ded.changeMarks([h.J.Change.getRemoveAction({range:()=>e})(e.meta.id)])}))),(0,o.pipe)(t,L.Mi((e=>{this._currentMark=(0,o.pipe)(this._ded.changeMarks([h.J.Change.getCreateAction({range:()=>e,order:0,classes:[H.G]})(e.meta.id)]),(t=>t.created.get(e.meta.id)),R.fromNullable,R.chain(R.fromEither)),this._ensureMarkInViewport(this._currentMark).subscribe({error:e=>this._log.error("Cannot scroll to mark",e)})})))},this._subs.push(this._listenOpenEvents(),this._listenCloseEvents(),T.h(this.term.pipe(k.p((e=>e.length<=3)),C.u("")),this.term.pipe(k.p((e=>e.length>3)),M.B(300)),this._forceSearchSubject.pipe(A.E(this.term,((e,t)=>t)))).pipe(K.F(),_.T(this._findRanges)).subscribe((e=>{this._activeMark.set(R.none),this._replaceRanges(e)})),this._rangesState.pipe(_.T((e=>(0,o.pipe)(e,R.fromPredicate((e=>(0,a.J_)(e.ranges))),R.map((e=>new U(this,this.term.get(),e))))))).subscribe((e=>this.result.set(e))),this._rangesState.pipe(b.n((({ranges:e})=>(0,a.J_)(e)?this._rangeManager.rangeChanged.pipe(N.E("affected"),k.p(a.J_)):S.w)),_.T((e=>e.filter(V.is))),_.T((e=>new Set(e.map((e=>e.meta.id)))))).subscribe(this._removeRanges),this._activeMark.pipe(B.S((({next:e},t)=>({prev:e,next:t})),{prev:R.none,next:R.none})).subscribe(this._changeActiveMark)),this._subs.push(this._ded.dontFreezeWhen(this.visible,"search"),this.visible.pipe(I.i(1),k.p((e=>!e))).subscribe((()=>{this.term.set("")}))),(0,F.hJ)("searchVM",this)}}(0,r._)(z,"searchMarkCount",0)},18286:(e,t,i)=>{i.d(t,{J:()=>r});var r,n=i(60575),s=i(86562),a=i(704);!function(e){const t=(e,t)=>({pageId:i,placement:r,bannerType:n,advancedAlerts:a=[],inline:o=!1,numberOfAdvancedAlerts:l,numberOfCriticalAlerts:c,sessionUuid:d,upgradeHookName:m,upgradeHookSlot:p,upgradeHookVariant:h})=>{const u=a.reduce(((e,t)=>{const i=t.lensType;return e[i]=e[i]?e[i]+1:1,e}),{}),g=t[(e=>{switch(e){case"show":return"getPremiumButtonShow";case"click":return"getPremiumButtonClick";case"dismiss":return"dismissUpHookButtonClick";default:return(0,s.AS)(e)}})(e)].bind(t);return g(i,n,u.clarity,u.correctness,u.delivery,u.engagement,o,(null!=l?l:a.length>0)?a.length:void 0,c,r,d,m,p,h)},i=e=>({pageId:t,upgradeHookName:i,upgradeHookSlot:r,upgradeHookVariant:o})=>n.Bx.TimeSeries.rootFemetrics.getMetric(a.P.Metrics.GetPremiumButton).getCounter("show"===e?a.P.MetricsActions.Show:"click"===e?a.P.MetricsActions.Click:(0,s.AS)(e)).setContext({pageId:t,upgradeHookName:i,upgradeHookSlot:r,upgradeHookVariant:o}).increment();e.create=e=>({trackShow:t("show",e),trackClick:t("click",e),trackDismiss:t("dismiss",e),countShow:i("show"),countClick:i("click")})}(r||(r={}))},45032:(e,t,i)=>{i.d(t,{Q:()=>r,t:()=>k});var r,n=i(23988),s=i(84647),a=i(80074),o=i(60575),l=i(63967),c=i(80536),d=i(72400),m=i(62597),p=i(22809),h=i(74416),u=i(80837),g=i(65390),f=i(36840),_=i(23121),y=i(66202),b=i(76720),v=i(18711),C=i(40884);!function(e){e.Mock=class{constructor(){(0,n._)(this,"advancedAlerts",a.s.create(g.none)),(0,n._)(this,"openUpgradeUrl",f.Yi),(0,n._)(this,"assignToFreeTrialEuUkExperiment",f.Yi),(0,n._)(this,"assignToProVsPremiumExperiment",f.Yi),(0,n._)(this,"assignToInProductDiscountExperiment",f.Yi),(0,n._)(this,"fromGbVoxUpHookLens",f.Yi),(0,n._)(this,"fromGrammarlyGO",f.Yi),(0,n._)(this,"enableGBVoxHookLens",f.Yi),(0,n._)(this,"displayValue",(()=>"")),(0,n._)(this,"isEligibleForFreeTrial",void 0),(0,n._)(this,"isEligibleForFreeTrialEuUk",void 0),(0,n._)(this,"isEligibleForPro",void 0),(0,n._)(this,"isInProductDiscount",void 0),(0,n._)(this,"upgradeHookVariant",void 0)}}}(r||(r={}));class k{_formatLiteAlerts(e){const t=e.slice(0,5),i=e.slice(5).map((e=>e.count)).reduce(f.cz,0);return i>0?[...t,{group:"",category:"",categoryHuman:"more...",count:i,lensName:"more...",bundleInfo:g.some("more...")}]:t}openUpgradeUrl(e){(0,s.pipe)(_.zb((()=>this._createUpgradeUrl(e))),y.chain(this._environment.actions.openUrl),y.getOrElse((e=>this._log.fatal("unexpected error on open upgrade page",e))))}fromGbVoxUpHookLens(){(0,s.pipe)(_.zb((()=>this._upgradeHook.fromGbVoxUpHookLens())),y.chain(this._environment.actions.openPopup),y.getOrElse((e=>this._log.fatal("unexpected error on open upgrade page",e))))}fromGrammarlyGO(){(0,s.pipe)(_.zb((()=>this._upgradeHook.fromGrammarlyGO())),y.chain(this._environment.actions.openPopup),y.getOrElse((e=>this._log.fatal("unexpected error on open upgrade page for GrammarlyGO",e))))}enableGBVoxHookLens(){(0,s.pipe)(_.zb((()=>new b.U(this._config.account.styleGuide))),y.chain(this._environment.actions.openPopup),y.getOrElse((e=>this._log.fatal("unexpected error on open admin style guide page",e))))}displayValue(e){return(0,s.pipe)(this._uphookFormat,g.map((t=>t===C.SA.layoutGroup?e.lensName:(0,s.pipe)(e.bundleInfo,g.getOrElse((()=>e.categoryHuman))))),g.getOrElse((()=>e.categoryHuman)))}_noRemovedFilter(e){return t=>!l.Fc.isRemoved(t)&&e(t)}_getGroupedLiteAlerts(e){return(0,s.pipe)(this._checkingDomain.state.get(),p.A.reduce([],((t,i)=>(this._noRemovedFilter(e)(i.alert)&&t.push(i.alert.toLiteAlert()),t))),(0,s.pipe)(this._uphookFormat,g.map((e=>e===C.SA.layoutGroup?c.D.groupByGroup:c.D.groupByBundleInfo)),g.getOrElse((()=>c.D.group))))}_getGroupedLensAlerts(e){return(0,s.pipe)(this._checkingDomain.state.get(),p.A.reduce([],((t,i)=>(this._noRemovedFilter(e)(i.alert)&&t.push(i.alert.toLensAlert()),t))),d.N.group)}_getPlagiarismPercent(){return this._lensPreviewVM.getLens(m.J.SpecialId.Plagiarism).view("percentile").view(h.Q.fromRatio)}dispose(){this._subs.dispose()}get isEligibleForFreeTrial(){return this._checkEligibleForFreeTrial()}get isEligibleForFreeTrialEuUk(){return this._checkEligibleForFreeTrialEuUk()}assignToFreeTrialEuUkExperiment(){return this._expClient.getTreatment(v.PremiumFreeTrialEuUk)}get isEligibleForPro(){return this._proVsPremiumExperiment}get isInProductDiscount(){return this._inProductDiscountExperiment}assignToProVsPremiumExperiment(){this._assignProVsPremiumExperiment()}assignToInProductDiscountExperiment(){this._assignInProductDiscountExperiment()}get upgradeHookVariant(){return this.isInProductDiscount?this.isEligibleForPro?"discountPro":"discountPremium":this.isEligibleForPro?"pro":this.isEligibleForFreeTrial?"premiumTrial":"premium"}constructor(e,t,i,r,a,c,d,p,h,_,y,b,v,k,x,S){(0,n._)(this,"_checkingDomain",void 0),(0,n._)(this,"_lensPreviewVM",void 0),(0,n._)(this,"_docId",void 0),(0,n._)(this,"_environment",void 0),(0,n._)(this,"_upgradeHook",void 0),(0,n._)(this,"_config",void 0),(0,n._)(this,"_uphookFormat",void 0),(0,n._)(this,"_uphookDestination",void 0),(0,n._)(this,"_isSmartPlagiarismUphookEnabled",void 0),(0,n._)(this,"_expClient",void 0),(0,n._)(this,"_checkEligibleForFreeTrial",void 0),(0,n._)(this,"_checkEligibleForFreeTrialEuUk",void 0),(0,n._)(this,"_proVsPremiumExperiment",void 0),(0,n._)(this,"_assignProVsPremiumExperiment",void 0),(0,n._)(this,"_inProductDiscountExperiment",void 0),(0,n._)(this,"_assignInProductDiscountExperiment",void 0),(0,n._)(this,"_log",void 0),(0,n._)(this,"_subs",void 0),(0,n._)(this,"advancedAlerts",void 0),(0,n._)(this,"_createUpgradeUrl",void 0),this._checkingDomain=e,this._lensPreviewVM=t,this._docId=i,this._environment=r,this._upgradeHook=a,this._config=c,this._uphookFormat=d,this._uphookDestination=p,this._isSmartPlagiarismUphookEnabled=h,this._expClient=_,this._checkEligibleForFreeTrial=y,this._checkEligibleForFreeTrialEuUk=b,this._proVsPremiumExperiment=v,this._assignProVsPremiumExperiment=k,this._inProductDiscountExperiment=x,this._assignInProductDiscountExperiment=S,this._log=o.Bx.Logging.getLogger("UpgradeViewModel"),this._subs=new u.y.Keeper,this.advancedAlerts=this._lensPreviewVM.getLens(m.J.SpecialId.Premium).view((({count:e})=>e>0?(0,s.pipe)(g.some({count:e,alerts:()=>this._formatLiteAlerts(this._getGroupedLiteAlerts((e=>l.Fc.isPremium(e))))}),g.filter((({alerts:e})=>(0,f.z2)(e())))):g.none)),this._createUpgradeUrl=e=>{const t=this._upgradeHook.fromDenaliDocumentToPlans(e,this._docId,this._getGroupedLiteAlerts((0,f.AU)(l.Fc.isPlagiarism)),this._getGroupedLensAlerts((0,f.AU)(l.Fc.isPlagiarism)),this._isSmartPlagiarismUphookEnabled?this._getPlagiarismPercent():void 0);return g.isNone(this._uphookDestination)?t:this._uphookDestination.value===C.fx.plansPage?t.addParams({redirectUphookToUpgradePageExp:"1"}):this.isEligibleForFreeTrial?this._upgradeHook.fromDenaliDocumentToUpgradeTry(e,this._docId):this._upgradeHook.fromDenaliDocumentToUpgrade(e,this._docId)}}}},96504:(e,t,i)=>{i.d(t,{$3:()=>V,F_:()=>Q,cX:()=>X,hF:()=>O,j7:()=>k,vF:()=>Z,vY:()=>H});var r=i(10334),n=i(17171),s=i(82541),a=i(24497),o=i(80152),l=i(11864),c=i(13607),d=i(95366),m=i(57014),p=i(54610);const h=.2,u=h/3.1,g=l.Ks.vh(20),f=l.Ks.percent(80),_=l.Ks.rem(20),y=m.$U.maxWidth(p.v.navigationHideWidthThreshold),b=(e,t=0)=>({transition:`${l.Ks.seconds(e)} transform linear, ${l.Ks.seconds(e)} opacity linear`,transitionDelay:l.Ks.seconds(t)}),v={position:"relative",height:l.Ks.percent(100)},C={display:"flex",$nest:{[m.$U.print]:{display:"none"}}},k={root:{width:l.Ks.rem(26),marginRight:l.Ks.rem(c.xS)},$nest:{[m.$U.tiny]:{},[m.$U.xs]:{marginRight:l.Ks.rem(c.wn)},[m.$U.xsLower]:{marginRight:l.Ks.rem(c.wn),width:l.Ks.rem(21)},[y]:{marginRight:0}}},x=(0,n._)((0,r._)({position:"relative",zIndex:c.rE},k.root),{$nest:(0,r._)({},k.$nest)}),S={position:"relative",zIndex:c.rE,marginRight:l.Ks.rem(c.xS),width:l.Ks.rem(c.NE),transition:"opacity .2s",$nest:{[m.$U.tiny]:{width:l.Ks.rem(c.rQ)},[m.$U.xs]:{width:l.Ks.rem(c.gx),marginRight:l.Ks.rem(c.wn)},[m.$U.xsLower]:{width:l.Ks.rem(c.gx),marginRight:l.Ks.rem(c.wn-1)},[y]:{width:l.Ks.rem(c.gx),marginRight:0},[m.$U.xss]:{width:l.Ks.rem(c.Bi),$nest:{[`& button[data-name*="${s.A7.ButtonPrev}"], & button[data-name*="${s.A7.ButtonNext}"]`]:{display:"none"}}}}},E={width:_},w={marginRight:l.Ks.rem(c.xS),$nest:{"&:before":{position:"absolute",left:l.Ks.rem(-1.5),display:"block",marginTop:l.Ks.rem(-4),paddingTop:l.Ks.rem(4),width:l.Ks.rem(1.5),height:l.Ks.percent(100),background:a.NeutralGray0,content:"''"},[m.$U.xs]:{marginRight:l.Ks.rem(c.wn)},[m.$U.xsLower]:{marginRight:l.Ks.rem(c.wn-1)},[y]:{marginRight:0}}},T={position:"absolute",top:0,right:0,height:l.Ks.percent(100),pointerEvents:"auto",display:"grid",gridTemplateColumns:"1fr",gridTemplateRows:"8fr 2fr"},M={position:"absolute",visibility:"hidden",opacity:.1,pointerEvents:"none"},A={position:"absolute",zIndex:c.rE,opacity:0,pointerEvents:"none",$nest:{"&.lensMoveDown":{transform:`translateY(${g})`},"&.lensMoveUp":{transform:`translateY(-${g})`}}},K={position:"absolute",zIndex:c.rE},N={position:"absolute",zIndex:c.yg,opacity:1},B={opacity:0,$nest:{"&.lensMoveDown":{transform:`translateY(-${g})`},"&.lensMoveUp":{transform:`translateY(${g})`}}},I={position:"absolute",zIndex:c.yg,opacity:1},$={position:"absolute",opacity:0,transform:`translateX(${f})`},F={position:"fixed",zIndex:c.yg,opacity:1},R={position:"fixed",opacity:0,transform:`translateX(${f})`},L={position:"fixed",zIndex:c.rE,opacity:0,transform:`translateX(${f})`},P={position:"absolute",zIndex:c.rE,opacity:0,transform:`translateX(${f})`},D={transform:"translateX(0)"},H={opacity:1},O={opacity:0,transform:`translateX(${f})`},Q={opacity:0,transform:`translateX(${f})`,pointerEvents:"none"},V={transform:"translateX(0)"},U={position:"absolute",top:0,right:0,width:"auto",height:"100vh",pointerEvents:"all",$nest:{[y]:{width:l.Ks.rem(12),transition:"transform .25s"}}},W={width:0,$nest:{[y]:{width:0}}},z={$nest:{[m.$U.maxWidth(p.v.navigationHideWidthThreshold)]:{transform:`translateX(${l.Ks.rem(11)})`}}},G={$nest:{[y]:{transform:"translateX(0)"}}},j={display:"none",cursor:"pointer",position:"absolute",left:l.Ks.rem(-1.65),top:l.Ks.rem(1),zIndex:c.yg,background:a.NeutralGray0,borderRadius:l.Ks.px(5),border:"none",width:l.Ks.rem(2),height:l.Ks.rem(2),boxShadow:d.c.z100,margin:0,padding:0,overflow:"visible",textTransform:"none","-webkit-appearance":"none","-moz-appearance":"none",$nest:(0,n._)((0,r._)({[y]:{display:"block"},"& i":{transform:"rotateZ(270deg)"},"&:active path":{stroke:o.Q.Icon.Brand.Default},"&:hover path":{stroke:o.Q.Icon.Brand.Default}},(0,m.T7)({$nest:{"& path":{stroke:o.Q.Icon.Brand.Default}}}).$nest),{"&:focus:not(:focus-visible)":{boxShadow:d.c.z100}})},q={zIndex:c.do,height:"auto"},Y={$nest:{'& [aria-controls*="navbar-right"]':{top:l.Ks.rem(3.75)}}},J={position:"relative",opacity:1},Z=l.Ks.prefixedStylesheet("assistant",{sidebarWrapper:[v,C],wrapper:[S],oggyWrapper:[x],iPadWrapper:[S,E],oggyLoaderWrapper:[x,w],hiddenWrapper:[{position:"absolute",top:0,right:0,pointerEvents:"none"}],actionsWrapper:[T],lensHideStart:[M],lensHide:[M,{opacity:0,transition:"opacity .01s"}],ggoEnter:[b(h,.1),N],ggoEnterStart:[B],ggoLeave:[b(h),A],ggoLeaveStart:[K],sidebarLeaveRight:[b(h),P],sidebarLeaveRightStart:[D],navigationEnterLeft:[b(u,.13548387096774195),H],navigationEnterLeftStart:[O],navigationLeaveRight:[b(u),Q],navigationLeaveRightStart:[V],hiddenNavigationWrapperTier:[U,W],expandedNavWrapperTier:[U,G],collapsedNavWrapperTier:[U,z],navCollapseButton:[j,{$nest:{"& i":{transform:"rotateZ(90deg)"}}}],navExpandButton:[j],sidebarTier:[q],sidebarTierOggy:[Y],oggyEnterLeft:[b(h),F],oggyLeaveRight:[b(h),L],oggyEnterLeftStart:[R],oggyLeaveRightStart:[{position:"fixed",transform:"translateX(0)"}]}),X=l.Ks.stylesheet({sidebarLoaderBase:[J],checkingInStart:[$,J],checkingInEnd:[I,J],checkingOutStart:[D,J],checkingOutEnd:[P,J],checkingStart:[{opacity:.99}],checkingEnd:[{opacity:1,transition:"opacity .01s"}],hideStart:[{pointerEvents:"none"}],hideEnd:[{opacity:0,transition:"opacity .01s",pointerEvents:"none"}]})},92468:(e,t,i)=>{i.d(t,{R:()=>M});var r=i(10334),n=i(17171),s=i(50659),a=i(86922),o=i(19967),l=i(14973),c=i(65873),d=i(11864),m=i(27199);const p={width:d.Ks.rem(31)},h={backgroundColor:m.Q1.CoreNeutral0,paddingBottom:0},u={paddingTop:d.Ks.rem(1)},g={display:"grid",gridTemplateColumns:"4fr 2fr 5fr",marginBottom:d.Ks.rem(1)},f={marginBottom:d.Ks.rem(.3)},_={paddingTop:d.Ks.rem(.3)},y={marginRight:d.Ks.rem(.25)},b={fontSize:d.Ks.rem(.75),color:m.Q1.CoreNeutral50,marginBottom:d.Ks.rem(2)},v=d.Ks.stylesheet({wrapper:[p],header:[h],content:[u],offer:[g],plan:[{display:"flex",flexDirection:"column"}],planTitle:[f],arrow:[_],badge:[y],subMonthlyPrice:[b]});var C=i(35198);const k=()=>s.createElement("svg",{"aria-hidden":!0,width:"31",height:"13",viewBox:"0 0 31 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s.createElement("path",{d:"M1 6.5H30M30 6.5L24.5 1M30 6.5L24.5 12",stroke:"#0E101A",strokeLinecap:"round"}));var x=i(83683);const S=({current:e})=>s.createElement("div",{className:v.plan},s.createElement(c.H4,{className:v.planTitle},e.title),s.createElement(c.C6,null,s.createElement(x.J9,(0,n._)((0,r._)({},e.regularPriceMoney),{periodInMonths:e.periodMonths})),s.createElement("div",{className:v.subMonthlyPrice},s.createElement(x.Ly,(0,n._)((0,r._)({},e.regularPriceMoney),{periodInMonths:e.periodMonths}))))),E=({offer:e,saved:t})=>{const i=s.useContext(a.S.Context).changePlan;return s.createElement("div",{className:v.plan},s.createElement(c.H4,{className:v.planTitle},e.title),s.createElement(c.C6,null,s.createElement(x.J9,(0,n._)((0,r._)({},e.regularPrice),{periodInMonths:e.periodInMonths}))," ",s.createElement(C.E.Regular,{className:v.badge},i.savedBadge(t.percent)),s.createElement("div",{className:v.subMonthlyPrice},s.createElement(x.Ly,(0,n._)((0,r._)({},e.regularPrice),{periodInMonths:e.periodInMonths})))))},w=({current:e,offer:t,saved:i})=>s.createElement("div",{className:v.offer},s.createElement(S,{current:e}),s.createElement("div",{className:v.arrow},s.createElement(k,null)),s.createElement(E,{offer:t,saved:i})),T=e=>{const t=s.useContext(a.S.Context).changePlan,i=s.useContext(l.aF.TitleIdContext);return s.createElement(c.H2,{id:i},t.title(s.createElement(x.J9,(0,n._)((0,r._)({},e.savedPrice.pricePerYear),{periodInMonths:12}))))},M=({changePlanViewModel:{currentPlan:e,offer:t,savedPrice:i,nextPaymentDate:r,changePlan:n,close:d}})=>{const m=s.useContext(a.S.Context).changePlan;return s.createElement(l.aF,{className:v.wrapper},s.createElement(l.aF.Header,{className:v.header},s.createElement(T,{savedPrice:i})),s.createElement(l.aF.Body,{name:"change.plan.body",className:v.content},s.createElement(s.Fragment,null,s.createElement(w,{current:e,offer:t,saved:i}),s.createElement(c.jN,null,m.confirmationDescription(e.title,r,s.createElement(x.X0,t.price),s.createElement(x.X0,t.regularPrice),t.periodInMonths)))),s.createElement(l.aF.Footer,null,s.createElement(o.$n.Ghost,{name:"modal.cancel",onClick:d},m.cancelButton),s.createElement(o.$n.Primary,{name:"confirm.change.to.annual",onClick:n},m.confirmationButton(t.title))))}},83683:(e,t,i)=>{i.d(t,{J9:()=>l,Ly:()=>o,X0:()=>a});var r=i(50659),n=i(86922),s=i(38908);const a=({value:e,currency:t})=>{const i="USD"===t?"$":`${t} `;return r.createElement(r.Fragment,null,i,s.$g(e))},o=({value:e,currency:t,periodInMonths:i})=>{const s=e/Math.max(1,i),o=r.useContext(n.S.Context).changePlan;return r.createElement(r.Fragment,null,r.createElement(a,{currency:t,value:s}),"/",o.perMonth)},l=({value:e,currency:t,periodInMonths:i})=>{const s=e/Math.max(1,i)*12,o=r.useContext(n.S.Context).changePlan;return r.createElement(r.Fragment,null,r.createElement(a,{currency:t,value:s}),"/",o.perYear)}},9654:(e,t,i)=>{i.d(t,{uF:()=>Le,zz:()=>Re,JG:()=>Pe});var r=i(23988),n=i(10334),s=i(50659),a=i(38886),o=i(30720),l=i(61198),c=i(61790),d=i(53005),m=i(15491),p=i(86562),h=i(80300),u=i(78450),g=i(76720),f=i(40884);class _{get isBusinessAdmin(){return f.DY.isBusinessAdmin(this._userAccount.features.denaliUserType)}constructor(e,t,i,n){(0,r._)(this,"_userAccount",void 0),(0,r._)(this,"_config",void 0),(0,r._)(this,"_environment",void 0),(0,r._)(this,"_telemetry",void 0),(0,r._)(this,"dismiss",void 0),(0,r._)(this,"updatePayment",void 0),this._userAccount=e,this._config=t,this._environment=i,this._telemetry=n,this.dismiss=()=>{this._userAccount.settings.incrementDunningDismissCount()},this.updatePayment=()=>{this._telemetry.gnarSpec.inProductDunningNoticationUpdatePaymentInformationButtonClick(this._telemetry.pageId),this._environment.actions.openPopup(new g.U(this._config.account.subscription))}}}var y=i(17171),b=i(80074),v=i(78323),C=i(66799),k=i(19805),x=i(29862),S=i(37107);const E=k.x.Category.Id.create(C.xD.SpecialCategory.InQuotes);class w{constructor(e,t,i,s){(0,r._)(this,"_denaliSettings",void 0),(0,r._)(this,"_categoriesModel",void 0),(0,r._)(this,"_features",void 0),(0,r._)(this,"_telemetry",void 0),(0,r._)(this,"_preferencesModel",void 0),(0,r._)(this,"_newPreferences",void 0),(0,r._)(this,"trackOpened",void 0),(0,r._)(this,"trackSuggestionManagementClicked",void 0),(0,r._)(this,"update",void 0),(0,r._)(this,"autoScrollToNextAlert",void 0),(0,r._)(this,"fontSize",void 0),(0,r._)(this,"suggestionsVisualMode",void 0),(0,r._)(this,"muteQuotedAlerts",void 0),this._denaliSettings=e,this._categoriesModel=t,this._features=i,this._telemetry=s,this._preferencesModel=this._denaliSettings.editorPreferences,this._newPreferences=b.s.create(this._denaliSettings.editorPreferences.get()),this.trackOpened=()=>{this._telemetry.gnarSpec.preferencesPopupShow(this._telemetry.pageId)},this.trackSuggestionManagementClicked=()=>{this._telemetry.gnarSpec.deactivatedSuggestionsSuggestionManagementClick(this._telemetry.pageId,"editorSettings",this._telemetry.pageSessionId)},this.update=()=>{const e=this._newPreferences.get(),t=this._categoriesModel.getMutedSpecialCategories().has(E),i=this.muteQuotedAlerts.get(),r=t!==i,n=!S.$u.eq.equals(this._preferencesModel.get(),e)||r;e.suggestionsVisualMode!==this._preferencesModel.get().suggestionsVisualMode&&this._telemetry.gnarSpec.suggestionsVisualModeFeatureToggled(this._telemetry.pageId,e.suggestionsVisualMode,this._telemetry.pageSessionId),n&&(this._denaliSettings.updateEditorPreferences(e),this._telemetry.gnarSpec.preferencesFormSuccess(this.autoScrollToNextAlert.get(),e.fontSize,i,this._telemetry.pageId,e.suggestionsVisualMode)),r&&(t?(this._categoriesModel.unmuteCategories([E]),this._telemetry.gnarSpec.muteQuotedAlertsFeatureToggled(this._telemetry.pageId,"unmuted",this._telemetry.pageSessionId)):(this._categoriesModel.muteCategories([E]),this._telemetry.gnarSpec.muteQuotedAlertsFeatureToggled(this._telemetry.pageId,"muted",this._telemetry.pageSessionId)))},this.autoScrollToNextAlert=this._newPreferences.lens("autoScrollToNextAlert").lens(x.O.unwrap(!this._features.autoJumpSettings.isDisabledByDefault)),this.fontSize=this._newPreferences.lens(v.J2.create((e=>e.fontSize===S.Z4.Large),((e,t)=>(0,y._)((0,n._)({},t),{fontSize:e?S.Z4.Large:S.Z4.Normal})))),this.suggestionsVisualMode=this._newPreferences.lens(v.J2.create((e=>e.suggestionsVisualMode===S.pK.Accessible),((e,t)=>(0,y._)((0,n._)({},t),{suggestionsVisualMode:e?S.pK.Accessible:S.pK.Default})))),this.muteQuotedAlerts=b.s.create(this._categoriesModel.getMutedSpecialCategories().has(E))}}var T=i(35382),M=i(84647),A=i(60575),K=i(35413),N=i(36094),B=i(62723),I=i(6987),$=i(21216),F=i(14342),R=i(62822),L=i(88423),P=i(89769),D=i(38169),H=i(70365),O=i(88e3),Q=i(65390),V=i(66202);class U{constructor(e,t,i,n){(0,r._)(this,"reportViewModel",void 0),(0,r._)(this,"_documentModel",void 0),(0,r._)(this,"_notificationsManager",void 0),(0,r._)(this,"_modalOperations",void 0),(0,r._)(this,"state",void 0),(0,r._)(this,"onModalClose",void 0),this.reportViewModel=e,this._documentModel=t,this._notificationsManager=i,this._modalOperations=n,this.state=K.v((()=>N.RF((()=>this._documentModel.calculateStats())))).pipe(B.z(this._documentModel.checkingState,((e,t)=>(0,M.pipe)(e,Q.filter((()=>"idle"===t))))),I.n(Q.fold((()=>$.of({type:O.K.State.Type.LOADING}).pipe(F.c(150))),V.fold((e=>(A.Bx.Logging.getLogger("editor.toolbar").error("Error on requesting document stats",e),this._notificationsManager.enqueue("statisticsError").pipe(R.u({type:O.K.State.Type.ERROR}),L.j((()=>this.onModalClose()))))),(e=>b.s.combine(this._documentModel.score,this._documentModel.counters,this._documentModel.documentLength.view("trimmed"),((t,i,r)=>(0,M.pipe)(t,Q.fold((()=>({type:O.K.State.Type.SHORT_CONTENT})),(t=>({type:O.K.State.Type.READY,documentIsEmpty:0===r,score:t,counters:i,stats:e})))))))))),P.Z({type:O.K.State.Type.EMPTY}),D.H(1),H.B()),this.onModalClose=()=>{this._modalOperations.onClose()}}}var W,z=i(92802),G=i(17223),j=i(98126),q=i(95168),Y=i(58193),J=i(22835),Z=i(36840),X=i(1424),ee=i(18286);!function(e){let t,i;!function(e){e[e.SMALL=0]="SMALL",e[e.LARGE=1]="LARGE"}(t=e.Type||(e.Type={})),function(e){e[e.SHOW_ALL=0]="SHOW_ALL",e[e.HIDE_PREV=1]="HIDE_PREV",e[e.HIDE_NEXT=2]="HIDE_NEXT",e[e.HIDE_BOTH=3]="HIDE_BOTH"}(i=e.NavigationControlDisplay||(e.NavigationControlDisplay={}))}(W||(W={}));class te{start(){this._currentStepIndex.set(Q.some(0)),this._onStart()}constructor(e,t,i,n,s=Z.Yi){(0,r._)(this,"type",void 0),(0,r._)(this,"_stepMap",void 0),(0,r._)(this,"_settings",void 0),(0,r._)(this,"_modalOperations",void 0),(0,r._)(this,"_onStart",void 0),(0,r._)(this,"_steps",void 0),(0,r._)(this,"_currentStepIndex",void 0),(0,r._)(this,"_abort",void 0),(0,r._)(this,"_getStepForIndex",void 0),(0,r._)(this,"descriptionMeta",void 0),(0,r._)(this,"currentStep",void 0),(0,r._)(this,"goToNext",void 0),(0,r._)(this,"goToPrev",void 0),this.type=e,this._stepMap=t,this._settings=i,this._modalOperations=n,this._onStart=s,this._steps=this.type===f.fO.TourType.migration?te._migrationTour:te._welcomeTour,this._currentStepIndex=b.s.create(Q.none),this._abort=()=>{this._settings.denaliWelcomeTourSeen(),this._modalOperations.onClose(),this._currentStepIndex.set(Q.none)},this._getStepForIndex=e=>{const t=this._steps[e],i=this._stepMap[t.stepId];switch(i.type){case W.Type.LARGE:var r;return{stepId:t.stepId,type:i.type,index:e,content:i.renderContent(),description:i.renderDescription.bind(i),navigationControl:null!==(r=t.navigationControl)&&void 0!==r?r:W.NavigationControlDisplay.SHOW_ALL};case W.Type.SMALL:return{stepId:t.stepId,type:i.type,index:e,content:i.renderContent({type:this.type,abort:this._abort,goToNext:this.goToNext,goToPrev:this.goToPrev}),navigationControl:Boolean(t.navigationControl)?t.navigationControl:W.NavigationControlDisplay.HIDE_BOTH};default:return(0,p.xb)(i)}},this.descriptionMeta=this._currentStepIndex.view(Q.map((e=>({index:e,steps:this._steps.length})))).view(Q.map((({index:e,steps:t})=>({index:e<1||e>=t-1?e:e-1,totalSteps:t-2})))),this.currentStep=this._currentStepIndex.view(Q.map(this._getStepForIndex)),this.goToNext=()=>this._currentStepIndex.modify(Q.chain((e=>{const t=e+1;return Boolean(this._steps[t])?Q.some(t):(this._settings.denaliWelcomeTourSeen(),this._modalOperations.onClose(),Q.none)}))),this.goToPrev=()=>this._currentStepIndex.modify(Q.map((e=>{const t=e-1;return Boolean(this._steps[t])?t:0})))}}(0,r._)(te,"_migrationTour",[{stepId:"welcomeOldUser"},{stepId:"fastApply",navigationControl:W.NavigationControlDisplay.HIDE_PREV},{stepId:"assistant"},{stepId:"checkTypes"},{stepId:"goals"},{stepId:"finalOldUser",navigationControl:W.NavigationControlDisplay.HIDE_NEXT}]),(0,r._)(te,"_welcomeTour",[{stepId:"welcomeNewUser"},{stepId:"fastApply",navigationControl:W.NavigationControlDisplay.HIDE_PREV},{stepId:"assistant"},{stepId:"checkTypes"},{stepId:"goals"},{stepId:"finalNewUser",navigationControl:W.NavigationControlDisplay.HIDE_NEXT}]);class ie{get showOnboardingTourA11yUpdates(){return this._features.showOnboardingTourA11yUpdates}constructor(e,t,i){(0,r._)(this,"_settings",void 0),(0,r._)(this,"_features",void 0),(0,r._)(this,"_modalOperations",void 0),(0,r._)(this,"close",void 0),this._settings=e,this._features=t,this._modalOperations=i,this.close=()=>{this._settings.denaliWelcomeTourSeen(),this._modalOperations.onClose()}}}var re=i(14973),ne=i(92468);const se=({changePlanViewModel:e})=>s.createElement(re.Gd,{positionType:"fixed",animate:!0,smallResolution:"resize",onClose:e.close},s.createElement(ne.R,{changePlanViewModel:e}));var ae=i(994),oe=i(19967),le=i(10486),ce=i(65873),de=i(19711),me=i(20408),pe=i(63839);const he=JSON.parse('{"iE":"_8d820c72-feedback-popup-wrapper","h_":"_5a633a50-feedback-popup-description","TP":"_dde4098c-feedback-popup-briefDescriptionInput","cG":"_8af6c552-feedback-popup-feedbackInput","NZ":"_83d6ee84-feedback-popup-helpdesk","oB":"_52a56165-feedback-popup-feedbackPopupBody","F1":"_001a2b32-feedback-popup-feedbackPopupFooter"}'),ue=()=>{const e=s.useContext(re.aF.TitleIdContext);return s.createElement(ce.H1,{id:e},"Send Product Feedback")},ge=({feedbackViewModel:e,modalOperations:t})=>{const i=s.useContext(me._.Context),r=b.s.create(!0);return s.useEffect((()=>{e.modalShown.next();const i=r.pipe(de.$((e=>!1===e))).subscribe(t.onClose);return()=>i.unsubscribe()}),[e.modalShown,r,t.onClose]),s.createElement(re.hJ,{positionType:"fixed",visible:r,preventClose:!0,animate:!0},s.createElement(re.aF,{className:he.iE},s.createElement(re.aF.Header,null,s.createElement(ue,null)),s.createElement(re.aF.Body,{className:he.oB,name:"feedbackBody"},s.createElement(ce.P1,{className:he.h_},"Tell us what you think. We promise to act on your feedback to make Grammarly even more awesome."),s.createElement(le.pd,{autofocus:!0,value:e.currentText.lens("brief"),placeholder:"Brief description",className:he.TP}),s.createElement(le.fs,{placeholder:"Type your feedback",className:he.cG,value:e.currentText.lens("detailed")}),s.createElement(ce.C6,null,"If you have a support or billing-related request, please go to"," ",s.createElement(pe.M,{href:i.support.mainPage,target:"_blank",className:he.NZ},"Grammarly Helpdesk"))),s.createElement(re.aF.Footer,{className:he.F1},s.createElement(oe.$n.Ghost,{name:"cancel",onClick:()=>r.set(!1)},"Cancel"),s.createElement(oe.$n.Primary,{name:"send",disabled:e.currentText.view((e=>""===e.brief||""===e.detailed)),onClick:()=>(r.set(!1),e.sendFeedback())},"Send"))))};var fe=i(19840),_e=i(86922),ye=i(27917),be=i(11864),ve=i(19772),Ce=i(50581),ke=i(27199),xe=i(85921);const Se=e=>s.createElement(re.Gd,{positionType:"fixed",animate:!0,onClose:e.modalOperations.onClose},s.createElement(we,{preferencesViewModel:e.preferencesViewModel,close:e.modalOperations.onClose})),Ee=()=>{const e=s.useContext(_e.S.Context),t=s.useContext(re.aF.TitleIdContext);return s.createElement(ce.H1,{id:t},e.editorSettingsModalHeader)},we=({preferencesViewModel:e,close:t})=>{const i=s.useContext(_e.S.Context);return ve.R.useEffectOnDidMount(e.trackOpened),ve.R.useEffectOnWillUnmount(e.update),s.createElement(re.aF,{className:Fe.popupWrapper},s.createElement(re.aF.Header,{className:Fe.popupHeader},s.createElement(Ee,null)),s.createElement(re.aF.Body,{name:"preferencesBody",className:Fe.popupBody},s.createElement(Ne,{value:e.autoScrollToNextAlert,id:"autoScrollSwitcher",title:i.preferences.autoJumpToNextAlert,description:i.preferences.autoJumpToNextAlertDescription}),s.createElement(Ne,{value:e.muteQuotedAlerts,id:"muteCitedAlerts",title:i.preferences.muteQuotedAlerts}),s.createElement(Ne,{value:e.fontSize,id:"fontSizeIncreasedSwitcher",title:i.preferences.increaseFontSize}),s.createElement(Ne,{value:e.suggestionsVisualMode,id:"suggestionsVisualModeSwitcher",title:i.preferences.suggestionsVisualMode.title,description:i.preferences.suggestionsVisualMode.descritionSDUI}),s.createElement(Ke,{onClick:e.trackSuggestionManagementClicked})),s.createElement(re.aF.Footer,null,s.createElement(oe.$n.Primary,{name:"pref-done-btn",className:Fe.doneButton,onClick:t},i.done)))},Te=({children:e})=>s.createElement(ce.Oc,{className:Fe.description},e),Me=({children:e,className:t})=>s.createElement("section",(0,fe.Ly)(Fe.bodySection,t),e),Ae=e=>{const t=s.useContext(me._.Context),i=s.useContext(_e.S.Context).preferences;return s.createElement(oe.$n,{name:"manage-suggestions",href:t.account.suggestions,target:"_blank",onClick:e.onClick,className:Fe.manageSuggestions},i.suggestionManagementLink,s.createElement(ye.In.OuterLink,{className:Fe.manageSuggestionsIcon}))},Ke=e=>{const t=s.useContext(_e.S.Context).preferences;return s.createElement(Me,null,s.createElement(Ae,{onClick:e.onClick}),s.createElement(Te,null,t.suggestionManagementDescription))},Ne=({value:e,id:t,title:i,description:r,className:n})=>s.createElement(Me,{className:Ce.classes(Fe.setting,n)},s.createElement("label",{id:t},s.createElement(ce.C6,null,i),Boolean(r)?s.createElement(Te,null,r):null),s.createElement(xe.L,{checked:e,className:Fe.toggle,name:t,ariaLabelledBy:t})),Be=be.Ks.rem(2),Ie=be.Ks.rem(1),$e=ke.Q1.CoreBlue50,Fe=be.Ks.prefixedStylesheet("preferencePopup",{popupWrapper:[{display:"flex",flexDirection:"column",width:be.Ks.rem(27),userSelect:"none"}],popupHeader:[{padding:`${be.Ks.rem(3)} ${Be} ${Ie}`,backgroundColor:ke.Q1.CoreNeutral0}],popupBody:[{padding:`0 ${Be}`}],doneButton:[{padding:be.Ks.important(`0 ${Ie}`)}],bodySection:[{padding:`${Ie} 0`,borderTop:`1px solid ${ke.Q1.CoreNeutral20}`}],description:[{color:ke.Q1.CoreNeutral50,marginTop:be.Ks.rem(.5),whiteSpace:"pre-line"}],selectableLabel:[{userSelect:"text",cursor:"text"}],setting:[{display:"flex",cursor:"pointer",justifyContent:"space-between"}],toggle:[{marginLeft:be.Ks.rem(1.75),marginTop:be.Ks.rem(.125)}],manageSuggestions:[{display:"flex",alignItems:"center",color:$e,fontSize:be.Ks.rem(ke.EY.BodySize),fontWeight:ke.EY.BodyWeight,lineHeight:be.Ks.rem(2),marginTop:be.Ks.rem(-.3125)}],manageSuggestionsIcon:[{stroke:"currentColor"}]});var Re,Le;!function(e){e.Tour="Tour",e.WhatsNew="WhatsNew",e.Proofit="Proofit",e.Preferences="Preferences",e.Feedback="Feedback",e.ChangePlan="ChangePlan",e.Dunning="Dunning",e.SignOut="SignOut"}(Re||(Re={})),function(e){e.tour={type:Re.Tour},e.news={type:Re.WhatsNew},e.feedback={type:Re.Feedback},e.dunning={type:Re.Dunning},e.preferences={type:Re.Preferences},e.changePlan=e=>({type:Re.ChangePlan,model:e}),e.setGoals=l.ug.setGoals,e.performance=l.ug.performance,e.signOut={type:Re.SignOut}}(Le||(Le={}));class Pe{load(e){switch(e.type){case Re.ChangePlan:return this._loadChangePlanModal(e.model);case Re.Tour:return this._loadTour();case Re.WhatsNew:return this._loadWhatsNew();case Re.Preferences:return this._loadPreferences();case Re.Feedback:return this._loadFeedback();case Re.Dunning:return this._loadDunning();case l.f_.SetGoals:return this._loadSetGoals(e.source);case l.f_.Performance:return this._loadPerformance();case Re.Proofit:throw new Error(`Failed to load ${e} modal`);case Re.SignOut:return this._loadSignOut();default:return(0,p.xb)(e)}}_loadTour(){return i.e(1737).then(i.bind(i,52698)).then((({WelcomeModal:e})=>t=>{const i=new ie(this._userAccount.settings,this._userAccount.features.denali,t);return{instance:{type:Re.Tour},component:s.createElement(e,{welcomeModalViewModel:i})}}))}_loadWhatsNew(){return Promise.all([Promise.all([i.e(5637),i.e(8310)]).then(i.bind(i,89827)).then((({newsMedia:e,initStaticNewsData:t,ordNews:i})=>{const r=Object.values(t(this._textResources.base)).map((t=>({id:t.id,date:t.date,content:(0,n._)({title:t.title,body:t.body},e[t.id])}))),s=a.di(i)(Object.values(r).filter((e=>this._userAccount.features.denali.newsConfig[e.id].visible())));return s.forEach((e=>{(new Image).src=T.f.Content.isVideo(e.content)?e.content.poster:e.content.image})),s})),Promise.all([i.e(5637),i.e(8310)]).then(i.bind(i,7971))]).then((([e,{WhatsNewPopup:t}])=>i=>({instance:{type:Re.WhatsNew},component:s.createElement(t,{newsVM:new T.A(this._userAccount.settings),content:e,modalOperations:i})})))}_loadSetGoals(e){return Promise.resolve((t=>{const i=function(e,t,i,r,n,s,a,o=Z.Yi,l){return(0,M.pipe)(G.h(t,function(e,t,i){return{goalsPopupShow:t=>e.gnarSpec.goalsPopupShow(e.pageId,t),getPremiumButtonClick:()=>ee.J.create(e.gnarSpec).trackClick({pageId:e.pageId,bannerType:"goPremium",placement:"setGoalsPopup"}),goalsFormSuccess:(r,n)=>{const s=()=>Y.gR("academic")(r.domain)&&t.features.denali.isStudentsOFE;return e.gnarSpec.goalsFormSuccess((0,M.pipe)(r.domain,Q.getOrElse((()=>n.domain))),(0,M.pipe)(r.goals,Q.map((e=>s()?[]:e)),Q.getOrElse((()=>n.goals)),(e=>Array.from(e))),e.pageId,i,(0,M.pipe)(r.outcomeContext,Q.filter(s),Q.map(J.Up("type")),Q.toUndefined),(0,M.pipe)(r.audience,Q.filter((0,z.AU)(s)),Q.toUndefined),(0,M.pipe)(r.outcomeContext,Q.filter(s),Q.map(J.Up("citation")),Q.toUndefined),(0,M.pipe)(r.style,Q.filter((0,z.AU)(s)),Q.toUndefined))}}}(r,e,s),n,s,a,{demoMode:e.features.demoMode,isFree:e.features.isFree.get(),isStudentsOFE:e.features.denali.isStudentsOFE,isEligibleForFreeTrial:e.features.isEligibleForFreeTrial,isEligibleForFreeTrialEuUk:e.features.isEligibleForFreeTrialEuUk,assignToFreeTrialEuUkExperiment:i.assignToFreeTrialEuUkExperiment.bind(i),isEligibleForPro:e.features.proVsPremiumExperiment,assignToProVsPremiumExperiment:e.features.assignProVsPremiumExperiment},(()=>i.openUpgradeUrl(X.Y.Place.DenaliDocument.editorDenaliGoals)),e.settings.enableSetGoalsLoader.get(),o,l),h.n.extendActions(j.F(q.M((t=>{t.kind===c.b.ActionsKind.close&&e.settings.enableSetGoalsLoader.get()!==t.showOnLoad&&(e.settings.updateSetGoalsLoader(t.showOnLoad),r.gnarSpec.showGoalsNewDocumentFormSuccess(t.showOnLoad,r.pageId,s))})))))}(this._userAccount,this._documentContext,this._upgradeViewModel,this._telemetry,t,e,o.T0.defaultContextFallback,this._setGoalsA11yStatus.change,this._categoriesModel.getMutedCategories);return{instance:{type:l.f_.SetGoals,source:e},component:h.UI.mount(c.b.Modal,i)}}))}_loadPreferences(){const e=new w(this._userAccount.settings,this._categoriesModel,this._userAccount.features.denali,this._telemetry);return Promise.resolve((t=>({instance:{type:Re.Preferences},component:s.createElement(Se,{preferencesViewModel:e,modalOperations:t})})))}_loadFeedback(){return Promise.resolve((e=>({instance:{type:Re.Feedback},component:s.createElement(ge,{feedbackViewModel:this._feedbackViewModel,modalOperations:e})})))}_loadSignOut(){return Promise.all([i.e(270),i.e(5464)]).then(i.bind(i,25185)).then((({SignOutPopup:e})=>t=>{const i=e.Flow(t,this._telemetry,this._userAccount.settings,this._userAccount.features,this._logout);return{instance:{type:Re.SignOut},component:h.UI.mount(e.View,i)}}))}_loadDunning(){return i.e(9234).then(i.bind(i,93710)).then((({DunningPopup:e})=>t=>{const i=new _(this._userAccount,this._config,this._environment,this._telemetry);return{instance:{type:Re.Dunning},component:s.createElement(e,{dunningViewModel:i,modalOperations:t})}}))}_loadPerformance(){return Promise.resolve((e=>{const t=new U(this._reportViewModel,this._documentModel,this._notificationsManager,e),i=h.UI.Knot.make(d.c.ModalView,{downloadButton:h.UI.Node.make((()=>s.createElement(ae.n,{reportViewModel:t.reportViewModel,state:t.state})))}),r=h.n.fromSideEffect((t=>{t.action.kind===d.c.ActionsKind.close?e.onClose():(0,p.xb)(t.action.kind)}),t.state.pipe(m.T((e=>({root:e})))));return{instance:{type:l.f_.Performance},component:h.UI.mount(i,r)}}))}_loadChangePlanModal(e){return Promise.resolve((t=>{const i=new u.g(e,t,this._notificationsManager,this._telemetry);return{instance:{type:Re.ChangePlan,model:e},component:s.createElement(se,{changePlanViewModel:i})}}))}constructor(e,t,i,n,s,a,o,l,c,d,m,p,h,u){(0,r._)(this,"_userAccount",void 0),(0,r._)(this,"_textResources",void 0),(0,r._)(this,"_documentContext",void 0),(0,r._)(this,"_upgradeViewModel",void 0),(0,r._)(this,"_config",void 0),(0,r._)(this,"_environment",void 0),(0,r._)(this,"_feedbackViewModel",void 0),(0,r._)(this,"_notificationsManager",void 0),(0,r._)(this,"_documentModel",void 0),(0,r._)(this,"_reportViewModel",void 0),(0,r._)(this,"_telemetry",void 0),(0,r._)(this,"_categoriesModel",void 0),(0,r._)(this,"_logout",void 0),(0,r._)(this,"_setGoalsA11yStatus",void 0),this._userAccount=e,this._textResources=t,this._documentContext=i,this._upgradeViewModel=n,this._config=s,this._environment=a,this._feedbackViewModel=o,this._notificationsManager=l,this._documentModel=c,this._reportViewModel=d,this._telemetry=m,this._categoriesModel=p,this._logout=h,this._setGoalsA11yStatus=u}}},1884:(e,t,i)=>{i.d(t,{gq:()=>xe,tq:()=>Se});var r=i(10334),n=i(17171),s=i(50659),a=i(84647),o=i(80074),l=i(87574),c=i(19840),d=i(62228),m=i(86922),p=i(27917),h=i(61198),u=i(90883),g=i(60280),f=i(65873),_=i(41949),y=i(11864),b=i(38427),v=i(15491),C=i(78339),k=i(62822),x=i(89769),S=i(89011),E=i(82315),w=i(65390),T=i(58193),M=i(16721),A=i(40884),K=i(54610),N=i(51850),B=i(10099),I=i(19967),$=i(24290),F=i(80300),R=i(77167),L=i(24497),P=i(13607),D=i(57014);const H=.2,O={position:"relative",display:"block",zIndex:0,margin:`${y.Ks.rem(0)} ${y.Ks.rem(R.Jj)}`,fontSize:y.Ks.rem(.875),fontWeight:500,border:`${y.Ks.px(1)} solid transparent`,borderRadius:y.Ks.rem(.25),backgroundImage:"linear-gradient(to right, #526DD9 0%, #526DD9 25%, #3E7FFC 75%, #0FCEAF 100%)",backgroundSize:y.Ks.percent(400),backgroundPositionX:y.Ks.percent(99),transition:`background-position-x ${y.Ks.seconds(H)}`,$nest:{svg:(0,n._)((0,r._)({},{"--path-fill-1":"#018374","--path-fill-2":"#018374","--path-fill-3":"#00FFCE","--path-fill-4":"#018374"}),{flex:"0 0 auto",$nest:{path:{transition:`fill ${y.Ks.seconds(H)}`}}}),"&[data-active=true]":{fontWeight:600,color:L.NeutralGray60,backgroundPositionX:y.Ks.percent(1),$nest:{path:(0,r._)({},{"--path-fill-1":"#2551DA","--path-fill-2":"#018374","--path-fill-3":"#34BCFF","--path-fill-4":"#2551DA"})}}}},Q={position:"relative",zIndex:1,lineHeight:y.Ks.rem(1.5),backgroundColor:L.White,color:L.NeutralGray90,padding:y.Ks.rem(R.CN),display:"flex",alignItems:"center",transition:`\n    color ${y.Ks.seconds(H)},\n    background-color ${y.Ks.seconds(H)}\n  `,$nest:{"[data-active='true'] > &":{backgroundColor:L.NeutralGray10,color:L.NeutralGray60},":not([data-disabled='true'])[data-hovered='true'] > &":{backgroundColor:L.NeutralGray10}}},V={fontSize:y.Ks.rem(.75),fontWeight:400,lineHeight:y.Ks.rem(1.125),color:L.NeutralGray90,$nest:{[D.$U.compactSidebar]:D.sM}},U={minWidth:y.Ks.rem(1.5),minHeight:y.Ks.rem(1.5)},W={position:"relative",zIndex:P.kf},z=y.Ks.prefixedStylesheet("cheetah_button",{button:[O],buttonContent:[Q],label:[{flex:"1 1 auto",display:"flex",flexDirection:"column",alignItems:"flex-start"}],subtitle:[V],icon:[U],onboardingContainer:[W]});var G=i(29517);const j="Generative AI",q="By the way, you can also access our generative AI assistance here.",Y="Go beyond revision",J="Generative AI can help you brainstorm ideas and even write a first draft.",Z=e=>{const{hideOnboarding:t,stepContent:i,children:a}=e;return t?a:s.createElement(E.M7,(0,n._)((0,r._)({},i),{alignment:"bottom",eventType:"onclick",stepId:S.E.StepId.GrammarlyGOIdeationAssistant,dotPosition:{kind:"dotAtPosition",position:E.p3.center}}),a)},X=e=>{const t=K.v.useCollapsibleNavbarThreshold(),i=e.viewModel.isInOnboardingTourA11yExperiment,r=b.zV([t,e.viewModel.onboardingViewModels]).pipe(v.T((([e,t])=>e?w.none:t))),n=i?{title:Y,message:J}:{message:q};return s.createElement(l.F.Fragment,null,b.zV([t,e.isSidebarIdle]).pipe(v.T((([t,o])=>s.createElement(Z,{stepContent:n,hideOnboarding:!o||i&&t},s.createElement(l.F.Fragment,null,s.createElement(I.$n,{tag:$.f.div,onClick:e.viewModel.navigation.handleCheetahButtonClick,onMouseDownCapture:e=>{e.stopPropagation()},active:e.viewModel.navigation.isGGOLensActive,name:"cheetah",className:z.button},s.createElement("div",{ref:e.viewModel.navigation.cheetahButtonRef,className:z.buttonContent},s.createElement("div",{className:z.label},s.createElement("span",null,j)),s.createElement(G.B.GrammarlyGO,{width:22,className:z.icon}))),r.pipe(v.T((0,a.flow)(w.map((e=>s.createElement("div",{className:z.onboardingContainer},F.UI.mount(N.M,(0,B.G)(e))))),w.toNullable)))))))))};var ee=i(48732);const te=".3s",ie={width:y.Ks.percent(100)},re={display:"block"},ne={marginRight:y.Ks.rem(2)},se={position:"relative",paddingTop:y.Ks.rem(3.5)},ae={paddingLeft:y.Ks.rem(.1)},oe={position:"absolute",bottom:y.Ks.rem(.75)},le={marginTop:0,marginBottom:0,border:"1px solid rgba(198, 203, 222, .7)",$nest:{'& [aria-busy="false"]':{display:"none"},[D.$U.compactSidebar]:{display:"flex",alignItems:"center",height:y.Ks.important("auto")}}},ce={margin:`${y.Ks.rem(.5)} ${y.Ks.rem(1.75)}`,height:y.Ks.px(1),backgroundColor:L.BlueGray20,opacity:.7},de={display:"block",lineHeight:y.Ks.rem(1.125),$nest:{"&:after":{content:'" "'},[D.$U.compactSidebar]:{fontSize:y.Ks.rem(.875),lineHeight:y.Ks.rem(1.5),paddingRight:y.Ks.rem(.25)}}},me={opacity:1,transition:`opacity ${te}`},pe={opacity:0,transition:`opacity ${te}`},he={top:y.Ks.rem(.55),position:"absolute",$nest:{[D.$U.compactSidebar]:{position:y.Ks.important("static")}}},ue={top:y.Ks.rem(.5)},ge={position:"absolute",top:y.Ks.rem(.55),opacity:1,transition:`opacity ${te}`},fe={minHeight:y.Ks.rem(1.125),height:y.Ks.rem(1.125),opacity:1,transition:`opacity ${te}`,transform:"translate(-.125rem, -.25rem)"},_e={height:y.Ks.rem(3.5)},ye={height:y.Ks.rem(5.25),$nest:{[D.$U.compactSidebar]:{height:"auto"}}},be={position:"absolute",right:0,bottom:y.Ks.rem(.25),$nest:{[D.$U.compactSidebar]:{bottom:"auto"}}},ve={$nest:{[D.$U.compactSidebar]:D.sM}},Ce=y.Ks.prefixedStylesheet("header",{performanceOnboardingContainer:[ie],goalsOnboardingContainer:[ie,re],goalsNotification:[ne],headerWrapper:[se,ae],headerWrapperHigh:[se],headerWrapperCheetah:[se,{display:"flex",flexDirection:"column"}],description:[re,ve],descriptionLoading:[oe],headerBtn:[le],delimiter:[ce],performanceScore:[de],performanceScoreFadeIn:[me],performanceScoreFadeOut:[pe],spinner:[re,he],spinnerScore:[ue],checkmark:[re,ge],checkmarkA11yContrast:[re,fe],checkmarkFadeOut:[re,ge,pe],spinnerFadeIn:[re,he,me],spinnerFadeOut:[re,he,pe],performanceBtnLow:[le],performanceBtn:[le,_e],performanceBtnHigh:[le,ye],performanceDescription:[re,{$nest:{"&:global(.checking-complete)":{marginTop:0}}}],arrowIcon:[be]}),ke=e=>{const{hideOnboarding:t,onboardingStepInfo:i,themes:a,children:o}=e;return t?o:s.createElement(E.M7,(0,n._)((0,r._)({},i),{alignment:"bottom",eventType:"onclick",dotPosition:{kind:"findFirstButton",buttonOrder:0,position:E.p3.center},themes:a}),o)},xe=({documentModel:e,isIdle:t,modalManager:i,navigationViewModel:d,cheetahViewModel:g,features:y})=>{const{goals:E}=s.useContext(m.S.Context),{gnarSpec:N,pageId:B}=s.useContext(M.Y.Context),I=i.state.view(w.exists((e=>e.instance.type===h.f_.SetGoals))),$=i.state.view(w.exists((e=>e.instance.type===h.f_.Performance))),F=y.denali.showOnboardingTourA11yUpdates,R=K.v.useCollapsibleNavbarThreshold(),L=()=>{d.events.next({type:"performance"}),N.documentStatisticsButtonClick(B)},P=o.s.combine(e.context,e.contextCompleteness,(({domain:e,outcomeContext:t},i)=>({domain:e,outcomeContext:t,completeness:i}))).view((({domain:e,completeness:t,outcomeContext:i})=>y.denali.isStudentsOFE&&T.gR("academic")(e)&&w.isSome(i)?E.button.subtitleAcademic(E.sections.format.formatTitle(T.$v(i).citation)):E.button.subtitle(t,_.AB.TOTAL_GOALS,_.AB.MIN_GOALS))),D={documentStats:F?{title:"Evaluate your text",message:"Check your Grammarly text score and other document stats."}:{message:"Check your text score and other document statistics."},goals:F?{title:"Set some goals",message:"Specify a writing style and audience for your document to get tailored feedback."}:{title:void 0,message:"Set goals to get tailored feedback based on your type of writing."}};return s.createElement(l.F.header,{className:Ce.headerWrapperCheetah},b.zV([R,t]).pipe(v.T((([i,o])=>{const m=!o||F&&i;return s.createElement(s.Fragment,null,s.createElement(u.h,{small:!0}),s.createElement(ke,{hideOnboarding:m,onboardingStepInfo:{stepId:S.E.StepId.Step8,title:D.documentStats.title,message:D.documentStats.message},themes:{containerWrapperClassName:Ce.performanceOnboardingContainer}},s.createElement(Se,{checkingState:e.checkingState,score:e.score,scoreStatus:e.scoreStatus,isActive:$,onClick:L})),s.createElement(u.h,{small:!0}),s.createElement(ke,{hideOnboarding:m,onboardingStepInfo:{stepId:S.E.StepId.Step1,title:D.goals.title,message:D.goals.message},themes:{containerWrapperClassName:Ce.goalsOnboardingContainer,notificationClassName:Ce.goalsNotification}},s.createElement(ee.C,(0,n._)((0,r._)({name:"set-goals",isActive:I,isDisabled:I,title:E.button.title,"aria-label":P.view((e=>`${E.button.title}: ${e}`))},(0,c.Ly)(Ce.headerBtn)),{onClick:()=>{d.events.next({type:"setGoals"}),N.setGoalsButtonClick(B)}}),s.createElement(p.In.Arrow,{direction:p.bO.right,className:Ce.arrowIcon}),s.createElement(f.Oc,{className:Ce.description},P))),y.denali.oggy===A.kH.splitSharedAssistants?s.createElement(l.F.Fragment,null,g.isGenAiAvailable.pipe(C.p(a.identity),k.u(g),v.T((e=>s.createElement(s.Fragment,null,s.createElement(u.h,{small:!0}),s.createElement(X,{viewModel:e,isSidebarIdle:t})))),x.Z(null))):null,s.createElement(u.h,{small:!0}),s.createElement("div",{className:Ce.delimiter}))}))))},Se=({checkingState:e,score:t,scoreStatus:i,isActive:r,onClick:n})=>{const h=s.useContext(m.S.Context),u=i.view((e=>(0,a.pipe)(e,w.map((e=>e===d.QB.ScoresStatus.SENSITIVE)),w.getOrElse(a.constFalse)))),g=o.s.combine(r,u,((e,t)=>e||t));return s.createElement(l.F.Fragment,null,o.s.combine(e,t,u,((e,t,i)=>{const o="idle"===e,l=o?(0,a.pipe)(t,w.filter((({rank:e})=>100===e)),w.fold((()=>h.performance.button.score),(()=>h.performance.button.score100))):null,d=e=>o?i?h.performance.button.statuses.paused:(0,a.pipe)(t,w.fold((()=>h.performance.button.statuses.unavailable),e)):h.performance.button.statuses.calculating;return s.createElement(ee.C,{name:"performance",isActive:r,isDisabled:g,className:w.isNone(t)&&o?Ce.performanceBtnLow:Ce.performanceBtnHigh,"aria-label":d((e=>`${h.performance.button.score}: ${e.rank}%`)),onClick:n},s.createElement(Ee,{checkingState:e,score:t}),s.createElement("div",null,l),s.createElement(f.Oc,(0,c.Ly)(o&&"checking-complete",Ce.description,!o&&Ce.descriptionLoading),d((()=>h.performance.button.statuses.available))),s.createElement(p.In.Arrow,{direction:p.bO.right,className:Ce.arrowIcon}))})))},Ee=({checkingState:e,score:t})=>{const i="idle"===e;return s.createElement(s.Fragment,null,s.createElement(g.y,{variation:"green",size:20,className:y.Ks.joinClasses([i?Ce.spinnerFadeOut:Ce.spinnerFadeIn,Ce.spinnerScore]),isIdle:i,strokeWidth:5}),(0,a.pipe)(t,w.map((({rank:e})=>100===e?s.createElement(p.In.NotificationInfo,{width:18,className:i?Ce.checkmarkA11yContrast:Ce.checkmarkFadeOut}):s.createElement(f.$p,{className:y.Ks.joinClasses([Ce.performanceScore,i?Ce.performanceScoreFadeIn:Ce.performanceScoreFadeOut])},e))),w.toNullable))}},48732:(e,t,i)=>{i.d(t,{C:()=>_,m:()=>y});var r=i(10334),n=i(17171),s=i(69384),a=i(50659),o=i(84647),l=i(19840),c=i(87574),d=i(86922),m=i(19967),p=i(24290),h=i(16117),u=i(82608),g=i(65390),f=i(86763);const _=e=>{var{title:t,tooltip:i,tooltipAlignment:o,isActive:c,isDisabled:d,className:h,children:g}=e,_=(0,s._)(e,["title","tooltip","tooltipAlignment","isActive","isDisabled","className","children"]);return a.createElement(m.$n,(0,r._)((0,n._)((0,r._)({},_),{styleType:u.Typography.Type.Base,active:c,tag:p.f.div,title:"string"==typeof i?a.createElement("div",{className:f.M.tooltip},i):i,titleAlign:o,disabled:d}),(0,l.Ly)(f.M.outcomeBtn,f.M.outcomeBtnBorders,h)),t,g)},y=({id:e,data:t,name:i,activeLensId:r,onClick:n})=>{const s=a.useContext(d.S.Context);return a.createElement(c.F.Fragment,null,t.view((0,o.flow)(g.map((t=>a.createElement(_,{id:e,key:t.id,name:i,title:t.title,isActive:r.view((t=>t===e)),onClick:n,className:f.M.premium},a.createElement(c.F.Fragment,null,t.alerts.view((e=>a.createElement(h.Q.OutcomeCounter,{theme:f.M,count:e})))),a.createElement(u.Typography.Small,{className:f.M.outcomeStatus},s.sidebar.advancedAlerts)))),g.toNullable)))}},86763:(e,t,i)=>{i.d(t,{M:()=>M});var r=i(10334),n=i(80152),s=i(13607),a=i(11864),o=i(27199),l=i(57014);const c=a.Ks.seconds(.2),d=e=>({$nest:{[l.$U.compactSidebar]:e}}),m={padding:`${a.Ks.rem(.5)} 0`,width:a.Ks.rem(9),whiteSpace:"normal",lineHeight:a.Ks.rem(1)},p={position:"relative",display:"block",borderRadius:a.Ks.rem(s.H0),fontWeight:500,lineHeight:a.Ks.rem(1.5),transition:`background-color ${c}`,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{backgroundColor:n.Q.Background.Base.Subdued},"&[data-active='true']":{backgroundColor:n.Q.Background.Base.Subdued}}},h=(0,r._)({margin:a.Ks.rem(.5),padding:`${a.Ks.rem(o.Yq.ButtonOutcomeY)} ${a.Ks.rem(o.Yq.ButtonOutcomeX)}`},d({display:"flex",alignItems:"center"})),u={boxSizing:"border-box",margin:`${a.Ks.rem(.25)} ${a.Ks.rem(1)}`,padding:a.Ks.rem(.75),borderRadius:a.Ks.rem(s.H0),$nest:{"&[data-active='true']":{backgroundColor:o.Q1.CoreBlue1,border:`1px solid ${n.Q.Border.Base.Default}`,color:o.Q1.CoreBlue60,fontWeight:600},[l.$U.xs]:{paddingTop:a.Ks.rem(.5),paddingBottom:a.Ks.rem(.5)}}},g=(0,r._)({display:"block",color:o.EY.SmallLightColor,whiteSpace:"normal",letterSpacing:a.Ks.rem(o.EY.SmallLightLetterSpacing),fontWeight:o.EY.SmallLightWeight},d(l.sM)),f={overflow:"hidden",marginBottom:a.Ks.rem(-.25),width:a.Ks.percent(400),borderRadius:a.Ks.rem(.375),transition:`background-color ${c}`,transform:"scale(.25)",transformOrigin:"left"},_={marginLeft:a.Ks.percent(-100),width:a.Ks.percent(100),height:a.Ks.rem(.75),transition:`transform .5s, background-color ${c}`},y={stroke:"none",fill:o.Q1.CoreNeutral40},b={position:"absolute",top:a.Ks.rem(.25),width:a.Ks.rem(1),height:a.Ks.rem(1),stroke:"none",$nest:{"&:not([data-disabled='true'])[data-active='true']":y,"&:not([data-disabled='true'])[data-hovered='true']":y,"&[data-disabled='true']":y}},v={position:"absolute",top:a.Ks.rem(.25),right:a.Ks.rem(.5),padding:a.Ks.rem(.5),width:a.Ks.rem(2),height:a.Ks.rem(2),objectFit:"contain"},C={right:a.Ks.rem(.5)},k={position:"absolute",top:a.Ks.rem(.25),right:a.Ks.rem(.5),padding:a.Ks.rem(.5),width:a.Ks.rem(2),height:a.Ks.rem(2),objectFit:"contain"},x={right:a.Ks.rem(.25),opacity:0,transition:`opacity ${c}`,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{opacity:1}}},S={[l.$U.xs]:{paddingTop:a.Ks.rem(.25),paddingBottom:a.Ks.rem(.25)}},E=a.Ks.prefixedStylesheet("navigation",{tooltip:[m],outcomeBtn:[p,h],outcomeBtnBorders:[u],outcomeStatus:[g],progressBarBg:[f],progressBar:[_],icon:[b],voxLogo:[v],checkmarkIcon:[b,C],voxIconLeft:[k],infoIcon:[b,x],counterContent:[],inactive:[]}),w=(e,t)=>({$nest:{[`& .${E.checkmarkIcon}`]:{fill:e,$nest:{"&:not([data-disabled='true'])[data-active='true']":{fill:e},"&:not([data-disabled='true'])[data-hovered='true']":{fill:e}}},[`& .${E.progressBarBg}`]:{backgroundColor:t},[`& .${E.progressBar}`]:{backgroundColor:e},"&:not([data-disabled='true'])[data-active='true']":{$nest:{[`& .${E.progressBarBg}`]:{backgroundColor:o.Q1.CoreNeutral0}}},"&:not([data-disabled='true'])[data-hovered='true']":{$nest:{[`& .${E.progressBarBg}`]:{backgroundColor:o.Q1.CoreNeutral0}}},[`&.${E.inactive}`]:{$nest:{[`& .${E.checkmarkIcon}`]:{fill:t},[`& .${E.progressBarBg}`]:{backgroundColor:o.Q1.CoreNeutral0},[`& .${E.progressBar}`]:{backgroundColor:t},"&:not([data-disabled='true'])[data-active='true']":{$nest:{[`& .${E.progressBar}`]:{backgroundColor:e}}},"&:not([data-disabled='true'])[data-hovered='true']":{$nest:{[`& .${E.progressBar}`]:{backgroundColor:e}}}}}}}),T={position:"absolute",top:a.Ks.rem(.5),right:a.Ks.rem(.5),left:"auto",fill:o.Q1.CoreYellow20,$nest:{[`& .${E.counterContent}`]:{fill:o.Q1.CoreYellow80}}},M=(0,r._)({},a.Ks.prefixedStylesheet("navigation",{correctness:[p,w(o.Q1.CoreRed50,o.Q1.CoreRed10)],clarity:[p,w(o.Q1.CoreBlue50,o.Q1.CoreBlue10)],engagement:[p,w(o.Q1.CoreGreen50,o.Q1.CoreGreen10)],delivery:[p,w(o.Q1.CorePurple50,o.Q1.CorePurple10)],vox:[p,w(o.Q1.CoreNeutral50,o.Q1.CoreNeutral10)],knowledgeHub:[p,w(o.Q1.CoreNeutral50,o.Q1.CoreNeutral10)],plagiarism:[p,w(o.Q1.CoreCyan50,o.Q1.CoreCyan10)],counterWrapper:[T],premium:[S]}),E)},994:(e,t,i)=>{i.d(t,{H:()=>y,n:()=>_});var r=i(23988),n=i(50659),s=i(84647),a=i(87574),o=i(80074),l=i(86922),c=i(19967),d=i(27917),m=i(60280),p=i(15491),h=i(88e3),u=i(65390),g=i(63911);const f=JSON.parse('{"$S":"_16595d1f-performance-downloadPdfReportButton","ej":"_5f117457-performance-preparingForReportLabel","wq":"_6fe9ef4b-performance-downloadPdfSpinner","NQ":"_31b5a8f7-performance-loaderContainer","kZ":"_6fac0ad7-performance-downloadIcon"}'),_=({reportViewModel:e,state:t})=>n.createElement(a.F.Fragment,null,(0,s.pipe)(e,u.map((e=>t.pipe(p.T((t=>n.createElement(y,{key:"downloadPdfReportButton",statsLoadingState:t.type,reportViewModel:e})))))),u.toNullable));class y extends n.Component{_getButtonState(e,t){const i=this.context.performance;return e?{disabled:!0,className:f.ej,children:n.createElement("span",{key:"stats-load-container",className:f.NQ},i.report.preparingPdfReport,n.createElement(m.y,{size:20,variation:"gray",wrapperClassName:f.wq}),n.createElement(g.K,{reportViewModel:this.props.reportViewModel}))}:Object.assign({className:f.$S,children:n.createElement("span",{key:"download-button"},n.createElement(d.In.Download,{className:f.kZ}),i.report.downloadPdfReport)},t===h.K.State.Type.READY?{disabled:!1}:{disabled:!0,title:t===h.K.State.Type.SHORT_CONTENT?i.notEnoughTextToGenerateReport:void 0})}componentWillUnmount(){this.props.reportViewModel.tryToInterrupt()}shouldComponentUpdate(){return!1}componentWillReceiveProps({statsLoadingState:e}){this._loadingState.set(e)}render(){return n.createElement(c.$n.Caps,{name:"download-pdf-report",title:this._buttonState.view("title"),className:this._buttonState.view("className"),disabled:this._buttonState.view("disabled"),onClick:this.props.reportViewModel.beginDownload},this._buttonState.view("children"))}constructor(...e){super(...e),(0,r._)(this,"context",void 0),(0,r._)(this,"_loadingState",o.s.create(this.props.statsLoadingState)),(0,r._)(this,"_buttonState",o.s.combine(this.props.reportViewModel.downloadStarted,this._loadingState,((e,t)=>this._getButtonState(e,t))))}}(0,r._)(y,"contextType",l.S.Context)},50760:(e,t,i)=>{i.d(t,{I:()=>v,N:()=>b});var r=i(23988),n=i(10334),s=i(17171),a=i(50659),o=i(84647),l=i(87574),c=i(19840),d=i(19967),m=i(27917),p=i(78339),h=i(86562),u=i(65390),g=i(7813),f=i(58193),_=i(54872);const y=JSON.parse('{"iE":"_4e776e00-search_bar-wrapper","Up":"_0b54df74-search_bar-view","Mc":"_b64bef22-search_bar-searchInputWrapper","Rt":"_3d4f0e89-search_bar-searchInput","qc":"_8b70d1e9-search_bar-searchIcon","hJ":"_7b81c65e-search_bar-counter","b":"_83b88492-search_bar-closeButton","A6":"_6fdeb332-search_bar-roundButton","Ju":"_8bcca6bd-search_bar-lessIcon","eO":"_f2f84543-search_bar-lessIconUp _8bcca6bd-search_bar-lessIcon"}');class b extends a.Component{componentDidMount(){this._title&&(this._title.focus(),this._subs.push(this.props.searchViewModel.hotkeysActions.subscribe((e=>{switch(e){case _.xJ.focus:this._title&&(this._title.focus(),this._title.select());break;case _.xJ.next:this._resultFunctionOrSelect((e=>e.next()));break;case _.xJ.previous:this._resultFunctionOrSelect((e=>e.prev()));break;default:(0,h.xb)(e)}})),this.props.searchViewModel.visible.pipe(p.p(Boolean)).subscribe((()=>{requestAnimationFrame((()=>{this._title&&(this._title.focus(),this._title.select())}))}))))}componentWillUnmount(){this._subs.forEach((e=>e.unsubscribe())),this._subs=[]}_resultFunctionOrSelect(e){(0,o.pipe)(this.props.searchViewModel.result.get(),u.fold(this.props.searchViewModel.select,e))}render(){const e=this.props.searchViewModel;return a.createElement("div",{className:y.Up},a.createElement(l.F.div,{className:y.Mc},a.createElement(m.In.SearchQuestion,{className:y.qc}),a.createElement(l.F.input,(0,s._)((0,n._)({name:_.LT.SEARCH_INPUT_NAME,spellCheck:!1,mount:e=>this._title=e,placeholder:"Find in document",className:y.Rt,autoFocus:!0},(0,c.oI)({value:e.term})),{onKeyDown:e=>e.keyCode===g.D.ENTER_CODE&&this._resultFunctionOrSelect((e=>e.next()))})),e.result.view(u.getOrElse((()=>({count:0,current:0})))).view((({count:e,current:t})=>e>0&&a.createElement("span",{className:y.hJ,key:"count"},t,"/",e)))),a.createElement(d.$n.Tertiary,{className:y.A6,name:"search-prev",disabled:e.result.view(f.Lw((e=>1===e.current))),onClick:()=>this._resultFunctionOrSelect((e=>e.prev()))},a.createElement(m.In.Arrow,{className:y.eO})),a.createElement(d.$n.Tertiary,{className:y.A6,name:"search-next",disabled:e.result.view(f.Lw((e=>e.current===e.count))),onClick:()=>this._resultFunctionOrSelect((e=>e.next()))},a.createElement(m.In.Arrow,{className:y.Ju})),a.createElement(d.$n.Ghost,{className:y.b,name:"search-close",onClick:()=>e.visible.set(!1)},a.createElement(m.In.Close,null)))}constructor(...e){super(...e),(0,r._)(this,"_title",void 0),(0,r._)(this,"_subs",[])}}const v=({searchViewModel:e})=>a.createElement(l.F.div,{className:y.iE},e.visible.view((t=>t&&a.createElement(b,{searchViewModel:e}))))},29517:(e,t,i)=>{i.d(t,{B:()=>r});var r,n=i(50659),s=i(27917);!function(e){e.GrammarlyGO=({className:e,width:t=23})=>n.createElement(s.hh,{className:e,width:t,viewBox:"0 0 23 23"},n.createElement("path",{fill:"var(--path-fill-1, #2551DA)",fillRule:"evenodd",stroke:"none",d:"M14.9 17c.1-.8.6-1.5 1.2-2 1.3-1.3 2.1-3 2.1-5 0-3.9-3.2-7-7.2-7s-7.3 3.1-7.3 7c0 2 .9 3.7 2.2 5 .6.5 1 1.2 1.2 2H15Zm-7.6 1.5h7.4v.7c-.1 1-1 1.8-2 1.8H9.3c-1 0-1.9-.8-2-1.8v-.7Z",clipRule:"evenodd"}),n.createElement("mask",{id:"a",width:"16",height:"18",x:"3",y:"3",maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},n.createElement("path",{fill:"var(--path-fill-2, #018374)",fillRule:"evenodd",stroke:"none",d:"M14.9 17c.1-.8.6-1.5 1.2-2 1.3-1.3 2.1-3 2.1-5 0-3.9-3.2-7-7.2-7s-7.3 3.1-7.3 7c0 2 .9 3.7 2.2 5 .6.5 1 1.2 1.2 2H15Zm-7.6 1.5h7.4v.7c-.1 1-1 1.8-2 1.8H9.3c-1 0-1.9-.8-2-1.8v-.7Z",clipRule:"evenodd"})),n.createElement("g",{filter:"url(#b)",mask:"url(#a)",opacity:".9"},n.createElement("mask",{id:"c",fill:"#fff"},n.createElement("path",{stroke:"none",fillRule:"evenodd",d:"M14.9 17c.1-.8.6-1.5 1.2-2 1.3-1.3 2.1-3 2.1-5 0-3.9-3.2-7-7.2-7s-7.3 3.1-7.3 7c0 2 .9 3.7 2.2 5 .6.5 1 1.2 1.2 2H15Zm-7.6 1.5h7.4v.7c-.1 1-1 1.8-2 1.8H9.3c-1 0-1.9-.8-2-1.8v-.7Z",clipRule:"evenodd"})),n.createElement("path",{fill:"var(--path-fill-3, #34BCFF)",fillRule:"evenodd",stroke:"none",d:"M14.9 17c.1-.8.6-1.5 1.2-2 1.3-1.3 2.1-3 2.1-5 0-3.9-3.2-7-7.2-7s-7.3 3.1-7.3 7c0 2 .9 3.7 2.2 5 .6.5 1 1.2 1.2 2H15Zm-7.6 1.5h7.4v.7c-.1 1-1 1.8-2 1.8H9.3c-1 0-1.9-.8-2-1.8v-.7Z",clipRule:"evenodd"}),n.createElement("path",{fill:"var(--path-fill-4, #2551DA)",stroke:"none",d:"m16.1 15-.7-.8.7.8ZM15 17v1h.8l.1-.8-1-.2Zm-9-2-.7.7.7-.7ZM7 17l-1 .2.2.8h.8v-1Zm7.6 1.5h1l.1-1h-1v1Zm-7.4 0v-1H6.2l.1 1h1Zm7.4.7-1-.1h1Zm-7.4 0h-1 1Zm8.1-5c-.6.7-1.3 1.5-1.5 2.6l2 .4c0-.5.4-1 1-1.5l-1.5-1.5Zm1.8-4.2c0 1.7-.6 3.2-1.8 4.2l1.4 1.5a7.9 7.9 0 0 0 2.4-5.7h-2ZM11 4c3.5 0 6.3 2.7 6.3 6h2c0-4.5-3.8-8-8.3-8v2Zm-6.3 6c0-3.3 2.8-6 6.3-6V2a8.1 8.1 0 0 0-8.3 8h2Zm1.9 4.2A5.9 5.9 0 0 1 4.8 10h-2c0 2.2.9 4.2 2.4 5.7l1.4-1.5ZM8 16.8c-.2-1-.9-2-1.5-2.6l-1.4 1.5c.5.5.8 1 1 1.5l2-.4ZM15 16H7v2H15v-2Zm-.2 1.5H7.3v2h7.4v-2Zm1 1.7v-.6l-2-.2v.7l2 .1Zm-3 2.8a3 3 0 0 0 3-2.8l-2-.1c0 .5-.5.9-1 .9v2Zm-3.4 0h3.4v-2H9.3v2Zm-3-2.8a3 3 0 0 0 3 2.8v-2a1 1 0 0 1-1-1l-2 .2Zm0-.6v.6l2-.1v-.7l-2 .2Z",mask:"url(#c)"})),n.createElement("g",{filter:"url(#d)"},n.createElement("path",{fill:"#fff",stroke:"none",d:"M14.5 10.6a3.8 3.8 0 0 0-2.8 2.8v.1c-.2.7-1.2.7-1.3 0a3.8 3.8 0 0 0-2.9-2.9c-.7-.1-.7-1 0-1.2a3.8 3.8 0 0 0 2.9-2.9c.1-.7 1-.7 1.2 0a3.8 3.8 0 0 0 2.9 2.9c.7.1.7 1 0 1.2Z"})),n.createElement("defs",null,n.createElement("filter",{id:"b",width:"26.5",height:"30",x:"-2.3",y:"-3",colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},n.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),n.createElement("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),n.createElement("feGaussianBlur",{result:"effect1_foregroundBlur_5277_13171",stdDeviation:"3"})),n.createElement("filter",{id:"d",width:"20",height:"20",x:"1",y:"0",colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},n.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),n.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),n.createElement("feOffset",null),n.createElement("feGaussianBlur",{stdDeviation:"3"}),n.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),n.createElement("feColorMatrix",{values:"0 0 0 0 0.00392157 0 0 0 0 0.513726 0 0 0 0 0.454902 0 0 0 1 0"}),n.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_5277_13171"}),n.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_5277_13171",result:"shape"})))),e.Rewrite=({className:e,width:t=24})=>n.createElement(s.hh,{className:e,width:t,viewBox:"0 0 24 24"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.866 4.5C12.3877 4.22386 11.7761 4.38773 11.5 4.86603L10.2469 7.03649L14.577 9.53649L15.8301 7.36603C16.1063 6.88773 15.9424 6.27614 15.4641 6L12.866 4.5ZM13.8256 10.8379L9.49549 8.33793L6.2476 13.9634C6.07792 14.2573 5.98582 14.5896 5.97995 14.9289L5.91538 18.6643C5.90859 19.0569 6.33617 19.3038 6.67275 19.1016L9.87546 17.178C10.1664 17.0032 10.408 16.7573 10.5777 16.4634L13.8256 10.8379Z",fill:"#018374"}),n.createElement("mask",{id:"mask0_5345_15767",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"5",y:"4",width:"11",height:"16"},n.createElement("path",{d:"M12.8667 4.50011C12.3885 4.22397 11.7769 4.38784 11.5007 4.86613L10.2476 7.0366L14.5777 9.5366L15.8308 7.36613C16.107 6.88784 15.9431 6.27625 15.4648 6.00011L12.8667 4.50011Z",fill:"#018374"}),n.createElement("path",{d:"M13.8263 10.838L9.49621 8.33804L6.24832 13.9636C6.07864 14.2574 5.98653 14.5897 5.98067 14.929L5.9161 18.6644C5.90931 19.057 6.33689 19.3039 6.67347 19.1017L9.87618 17.1781C10.1671 17.0033 10.4088 16.7574 10.5784 16.4636L13.8263 10.838Z",fill:"#018374"})),n.createElement("g",{mask:"url(#mask0_5345_15767)"},n.createElement("g",{opacity:"0.9",filter:"url(#filter0_f_5345_15767)"},n.createElement("path",{d:"M12.9435 2.36572L17.2737 4.86572L10.676 16.2933L4.49997 22L6.34584 13.7933L12.9435 2.36572Z",fill:"#00FFCE"}),n.createElement("path",{d:"M13.1266 3.04874L16.5907 5.04874L10.2809 15.9775L5.34021 20.5429L6.81694 13.9773L13.1266 3.04874Z",stroke:"#018374"}))),n.createElement("path",{d:"M8.69157 4.88121C7.81024 5.08868 7.12071 5.77187 6.90771 6.64867L6.89649 6.69484C6.79751 7.10228 6.2155 7.1015 6.11762 6.69381L6.10975 6.66104C5.8991 5.78369 5.21143 5.09867 4.3307 4.88884L4.30738 4.88329C3.89754 4.78565 3.89754 4.20481 4.30738 4.10717L4.3307 4.10161C5.21144 3.89178 5.89911 3.20676 6.10975 2.32942L6.11532 2.30619C6.21334 1.89794 6.79643 1.89794 6.89445 2.30619L6.90002 2.32942C7.11067 3.20677 7.79833 3.89179 8.67907 4.10161L8.69262 4.10484C9.10303 4.20262 9.10224 4.78454 8.69157 4.88121Z",fill:"#018374"}),n.createElement("path",{d:"M17.6916 17.8812C16.8102 18.0887 16.1207 18.7719 15.9077 19.6487L15.8965 19.6948C15.7975 20.1023 15.2155 20.1015 15.1176 19.6938L15.1097 19.661C14.8991 18.7837 14.2114 18.0987 13.3307 17.8888L13.3074 17.8833C12.8975 17.7856 12.8975 17.2048 13.3074 17.1072L13.3307 17.1016C14.2114 16.8918 14.8991 16.2068 15.1097 15.3294L15.1153 15.3062C15.2133 14.8979 15.7964 14.8979 15.8944 15.3062L15.9 15.3294C16.1107 16.2068 16.7983 16.8918 17.6791 17.1016L17.6926 17.1048C18.103 17.2026 18.1022 17.7845 17.6916 17.8812Z",fill:"#018374"}),n.createElement("defs",null,n.createElement("filter",{id:"filter0_f_5345_15767",x:"-1.5",y:"-3.63428",width:"24.7737",height:"31.6343",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},n.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),n.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),n.createElement("feGaussianBlur",{stdDeviation:"3",result:"effect1_foregroundBlur_5345_15767"}))))}(r||(r={}))},86611:(e,t,i)=>{i.d(t,{D:()=>b});var r=i(50659),n=i(80074),s=i(19840),a=i(86922),o=i(19967),l=i(27917),c=i(60280),d=i(81930),m=i(52869),p=i(15491),h=i(93712);const u=JSON.parse('{"a2":"_4d8e3185-new_toggler-full","Tp":"_5010b49c-new_toggler-background","qC":"_c8dc0c53-new_toggler-labelReveal","SA":"_6af1dd0a-new_toggler-edgeBackground _5010b49c-new_toggler-background"}'),g="checking-complete",f=14,_=l.rX.size+2,y=(28-_)/2,b=e=>{const t=r.useContext(a.S.Context),i=n.s.combine(e.checking,e.hasErrors,((e,i)=>{const n=e?t.sidebar.checkingLabel:i?t.sidebar.fixErrorsLabel:t.sidebar.openLabel;return r.createElement("div",{className:u.qC,key:"label","data-name":n},n)})),s=d.X.fadeOutState(e.checking.pipe(m.j((e=>!1===e)))),l=e.checking.pipe(p.T((e=>e?"inProgress":"end"))),h=l.pipe(p.T((e=>"end"!==e?r.createElement(c.y.Svg,{role:"presentation",key:"loading",type:"white",size:_,strokeWidth:5,onTransitionEnd:s.complete,x:164+y,y}):null))),f=l.pipe(p.T((e=>"inProgress"===e?null:r.createElement("g",{"data-name":g,className:g,key:"complete"}))));return r.createElement(o.$n,{name:"assistant",className:u.a2,onClick:e.onClick},r.createElement(C,null,f,h),i)},v=(0,s.yY)((e=>r.createElement("g",e))),C=({children:e})=>{const t=r.useContext(h.OH.Context);return r.createElement("svg",{viewBox:"0 0 192 28",className:t.has(h.OH.Flag.supportsSVGTransitions)?u.Tp:u.SA},r.createElement("defs",null,r.createElement("mask",{id:"mask"},r.createElement("circle",{cx:f,cy:f,r:f,fill:"#fff"}),r.createElement("rect",{x:f,width:164,height:28,fill:"#fff"}),r.createElement("circle",{cx:178,cy:f,r:f,fill:"#fff"})),r.createElement("clipPath",{id:"clip"},r.createElement("circle",{cx:178,cy:f,r:f}),r.createElement("rect",{x:-14,width:192,height:28,fill:"#fff"}))),r.createElement("g",{clipPath:"url(#clip)"},r.createElement("rect",{id:"box",x:"0",y:"0",width:192,height:28,mask:"url(#mask)"})),r.createElement(v,null,e))}},79025:(e,t,i)=>{i.d(t,{v:()=>b});var r=i(50659),n=i(87574),s=i(80074),a=i(63967),o=i(16721),l=i(86611),c=i(86922),d=i(19967),m=i(16117),p=i(82608),h=i(86562),u=i(40884);const g=JSON.parse('{"iE":"_3ba74340-new_toggler-wrapper","OK":"_8813904e-new_toggler-counters"}'),f=JSON.parse('{"YL":"_1a1e3949-new_toggler-issuesWrapper","Zp":"_c866ffce-new_toggler-criticalCounterWrapper","nf":"_7ff7d450-new_toggler-criticalCounterContent","sZ":"_f5d3206f-new_toggler-advancedCounterWrapper","qf":"_91c5f753-new_toggler-advancedCounterContent"}'),_=({switchToCritical:e,switchToAdvanced:t,counters:i,features:a})=>{const l=r.useContext(c.S.Context),{pageId:_,gnarSpec:b}=r.useContext(o.Y.Context),v=a.denali.alertGroupNames===u.yK.CRITICAL_ADVANCED?{critical:l.sidebar.critical,advanced:l.sidebar.advanced,criticalLabel:l.sidebar.criticalLabel,advancedLabel:l.sidebar.advancedLabel}:{critical:l.sidebar.free,advanced:a.proVsPremiumExperiment?l.sidebar.pro:l.sidebar.premium,criticalLabel:l.sidebar.freeLabel,advancedLabel:l.sidebar.premiumLabel},C=function(e,t){const i=function(e){switch(e){case u.yK.CRITICAL_ADVANCED:return"critical";case u.yK.FREE_PREMIUM:return"free";default:return(0,h.xb)(e)}}(t.denali.alertGroupNames),r=y(t.denali.alertGroupNames);return t.isLongFormPremiumFeedEnabled?s.s.combine(e.view(i),e.view(r),((e,t)=>0===e?0:e+t)):e.view(i)}(i,a),k=function(e,t){const i=y(t.denali.alertGroupNames);return t.isLongFormPremiumFeedEnabled?s.s.combine(e.view(i),e.view("freePremium"),((e,t)=>e+t)):e.view(i)}(i,a);return r.createElement(n.F.div,{className:g.OK},C.view((t=>t>0?r.createElement(d.$n,{key:"critical-issues",name:"critical-issues","aria-label":v.criticalLabel(t),styleType:p.Typography.Type.H3Legacy,className:f.YL,onClick:()=>{e(),b.assistantOpenButtonClick(_,"critical")}},r.createElement(m.Q.OutcomeCounter,{theme:{counterWrapper:f.Zp,counterContent:f.nf},count:t}),r.createElement("span",null," ",v.critical(t))):null)),k.view((e=>e>0?r.createElement(d.$n,{key:"advanced-issues",name:"advanced-issues","aria-label":v.advancedLabel(e),styleType:p.Typography.Type.H3Legacy,className:f.YL,onClick:()=>{t(),b.assistantOpenButtonClick(_,"advanced")}},r.createElement(m.Q.OutcomeCounter,{theme:{counterWrapper:f.sZ,counterContent:f.qf},count:e}),r.createElement("span",null," ",v.advanced(e))):null)))};function y(e){switch(e){case u.yK.CRITICAL_ADVANCED:return"advanced";case u.yK.FREE_PREMIUM:return"paid";default:return(0,h.xb)(e)}}const b=({features:e,documentModel:t,navigationViewModel:i})=>{const{gnarSpec:c,pageId:d}=r.useContext(o.Y.Context);return r.createElement(n.F.section,{className:g.iE},r.createElement(_,{features:e,switchToCritical:()=>i.events.next({type:"switchToCritical",actionSource:a.Kz.sidebar}),switchToAdvanced:()=>i.events.next({type:"switchToAdvanced",actionSource:a.Kz.sidebar}),counters:t.counters}),r.createElement(l.D,{checking:t.checkingState.view((e=>"idle"!==e)),hasErrors:s.s.combine(t.counters.view("critical"),t.counters.view("advanced"),((e,t)=>e>0||t>0)),onClick:()=>{i.events.next({type:"toggleSidebar",actionSource:a.Kz.sidebar}),c.assistantOpenButtonClick(d,"default")}}))}},70490:(e,t,i)=>{i.d(t,{F:()=>_,v:()=>f});var r=i(50659),n=i(84647),s=i(87574),a=i(19967),o=i(65873),l=i(82608),c=i(66202),d=i(35426),m=i(58538),p=i(25299),h=i(54730);const u=({word:e,apply:t})=>r.createElement(a.$n.Primary,{name:"accept-synonym",className:h.AS,onClick:t(e)},e),g=({synonyms:e,apply:t})=>r.createElement("div",{className:h.nM},e.map(((e,i)=>r.createElement(u,{word:e,key:i,apply:t})))),f=({result:{synonymsOrGroups:e},apply:t})=>{const i=r.useContext(d.k.Context);return r.createElement(s.F.div,{className:h.iE},r.createElement(o.C6,{className:h.DD},i.synonyms.title),(0,n.pipe)(e,c.fold((e=>r.createElement(g,{key:"single",synonyms:e,apply:t})),(e=>r.createElement("ol",{className:h.p_},e.map((({meaning:e,words:i},n)=>r.createElement(l.Typography,{key:n,styleType:l.Typography.Type.Base,nodeType:"li",className:h.Os},r.createElement(o.C6,{className:h.SZ},e),r.createElement(g,{key:"single",synonyms:i,apply:t})))))))))},_=({synonymsInfo:e,apply:t})=>m._g.isEmpty(e.synonymsState)?r.createElement(p.c,{activeWord:e.activeWord.meta.value}):r.createElement(f,{key:"synonymsCard",apply:t,result:e.synonymsState.synonyms})},25299:(e,t,i)=>{i.d(t,{c:()=>a});var r=i(50659),n=i(35426),s=i(54730);const a=({activeWord:e})=>{const t=r.useContext(n.k.Context);return r.createElement("div",{className:s.Yu},t.synonyms.empty(r.createElement("span",{className:s.PG},e)))}},16140:(e,t,i)=>{i.d(t,{V4:()=>w});var r=i(50659),n=i(92802),s=i(84647),a=i(87574),o=i(60575),l=i(86922),c=i(35098),d=i(35300),m=i(19967),p=i(10486),h=i(50993),u=i(98530),g=i(15491),f=i(38427),_=i(89769),y=i(86562),b=i(22835),v=i(66202),C=i(50581),k=i(14729),x=i(1404);const S=JSON.parse('{"x6":"_e9f7b8c5-formatting-link-button","kU":"_69c9878e-formatting-link-positionedWrapper","iE":"_14d68179-formatting-link-wrapper","Sh":"_23728bfd-formatting-link-editorToViewportContainer","S":"_8a4031ab-formatting-link-urlHolder _a7f5146c-formatting-link-base","Y2":"_1b5a1557-formatting-link-urlInput _8a4031ab-formatting-link-urlHolder _a7f5146c-formatting-link-base","xG":"_8f61eea3-formatting-link-urlText","uV":"_27acff95-formatting-link-delimiter"}');class E extends y.eo{}const w=({vm:e})=>{const t=r.useContext(c.L.Context).pipe(g.T(b.Up("rect")));return r.createElement(a.F.div,{className:S.kU},f.zV(t,e.visualState).pipe(g.T((([e,t])=>(0,s.pipe)(t,v.fromOption((()=>new E("Viewport state is O.none"))),v.chain((t=>(0,s.pipe)(t.rect.getRect(),v.map((({clientRects:[t,...i],rootClientRect:r})=>({viewportLikeRect:C.absToRelative(e,r),rect:(0,s.pipe)(C.Rect.join(t,...i),v.getOrElse((()=>C.Rect.empty)))}))),v.map((({viewportLikeRect:e,rect:i})=>r.createElement(a.F.div,{className:S.Sh,style:{top:e.top,left:e.left}},r.createElement(u.P.ByAbsoluteRect,{rect:i,align:C.Rect.Axis.vertical,selector:A},r.createElement(d.Q,{hide:t.close},r.createElement("div",{className:S.iE},t.visualState===x.W.VisualState.EditingMode?r.createElement(T,{inputContent:t.inputContent,apply:t.apply,isValid:t.isValid}):r.createElement(M,{url:t.url,change:t.change,remove:t.remove})))))))))),v.fold((e=>(e instanceof E||o.Bx.Logging.getLogger("FormattingLink").error("Cannot render links popup",e),null)),s.identity)))),_.Z(null)))},T=({apply:e,inputContent:t,isValid:i})=>{const a=r.useContext(l.S.Context);return r.createElement(r.Fragment,null,r.createElement(p.pd,{name:"rtfLinks-urlInput",placeholder:a.toolbar.formatting.links.placeholder,autofocus:!0,className:S.Y2,value:t}),r.createElement(m.$n.Ghost,{name:"rtfLinks-apply",onClick:()=>{e()},disabled:i.view((0,n.AU)(s.identity))},a.toolbar.formatting.links.apply))},M=({url:e,change:t,remove:i})=>{const n=r.useContext(l.S.Context);return r.createElement(r.Fragment,null,r.createElement(h.w,{href:e,className:S.S},r.createElement("span",{className:S.xG},e)),r.createElement(m.$n.Tertiary,{name:"rtfLinks-change",onClick:t,className:S.x6},n.toolbar.formatting.links.change),r.createElement("span",{className:S.uV}),r.createElement(m.$n.Tertiary,{name:"rtfLinks-remove",onClick:i,className:S.x6},n.toolbar.formatting.links.remove))},A=e=>{const t="bottom",i=k.w.Selector.Placement.left,r=k.w.Selector.takeBy(t,i)(e);return(({point:e})=>-1===Math.sign(e.x)||-1===Math.sign(e.y))(r.point)?k.w.Selector.preferBy(t,i)(e):r}},73566:(e,t,i)=>{i.d(t,{PT:()=>v,NI:()=>C});var r=i(10334),n=i(17171),s=i(50659),a=i(84647),o=i(87574),l=i(19840),c=i(76005),d=i(19967),m=i(14737),p=i(27917),h=i(65390),u=i(66202),g=i(86562),f=i(80019),_=i(26816),y=i(57791);const b=JSON.parse('{"iE":"_983d53b0-formatting-toolbar-wrapper","yu":"_b6bf19bd-formatting-toolbar-toolbarBtn","nd":"_dfdcacb3-formatting-toolbar-panel","$e":"_666c5e1f-formatting-toolbar-panelAnimateIn","AS":"_8bbcd63e-formatting-toolbar-item","me":"_fd8a9183-formatting-toolbar-separator","Lr":"_6cd9fea9-formatting-toolbar-panelHorizontal","AC":"_a6657dff-formatting-toolbar-verticalSeparator","ti":"_f1c80523-formatting-toolbar-itemMini _8bbcd63e-formatting-toolbar-item","V1":"_e1edbba1-formatting-toolbar-iconMini","YL":"_642a89aa-formatting-toolbar-tooltip","Pf":"_87e57eee-formatting-toolbar-label","H4":"_149f8a5d-formatting-toolbar-hotkeyLabel","Cr":"_81ab552d-formatting-toolbar-bold","TN":"_2f2a5db0-formatting-toolbar-italic","mn":"_dba0a4bc-formatting-toolbar-underline","h1":"_e743e53e-formatting-toolbar-h1 _bd2149d3-formatting-toolbar-header3","h2":"_cb468ed0-formatting-toolbar-h2 _498bfbff-formatting-toolbar-header4","nf":"_e91f7f84-formatting-toolbar-link"}'),v=({viewModel:e})=>s.createElement(o.F.div,{className:b.iE},s.createElement(d.$n.Ghost,(0,n._)((0,r._)({},(0,l.Ly)(y.yu,b.yu)),{name:"head",animationMode:m.g.FromCenter,title:e.head.title,active:e.head.active,onClick:e.head.onClick}),s.createElement(p.In.Formatting.Head,null)),e.visualState.view((t=>t===f.Ht.VisualState.Expanded&&s.createElement(k,{viewModel:e,theme:{panel:(0,l.Ly)(b.nd,b.$e).className,item:b.AS,separator:b.me}})))),C=({viewModel:e})=>s.createElement(k,{viewModel:e,theme:{panel:b.Lr,item:b.ti,itemIcon:b.V1,separator:b.AC}}),k=({viewModel:e,theme:t})=>s.createElement(o.F.div,{key:"formatting-wrapper",className:t.panel},e.list.map(((e,i)=>_.W.Item.isViewItem(e)?s.createElement(x,{theme:{itemClass:t.item,iconClass:t.itemIcon},key:i,item:e}):s.createElement("div",{key:i,className:t.separator})))),x=({item:e,theme:t})=>{const i=E(e.name,t.iconClass);return s.createElement(d.$n,{name:`rtfToolbar-${e.name}`,title:s.createElement(S,{item:e,labelClass:i.labelClass}),titleAlign:"topCenter",active:e.active,className:t.itemClass,key:e.name,onClick:e.onClick,"aria-label":e.ariaLabel},i.icon)},S=({item:e,labelClass:t})=>s.createElement("div",{className:b.YL},(0,a.pipe)(e.tooltip,h.fold(a.constNull,(e=>s.createElement("span",(0,l.Ly)(b.Pf,t),e)))),(0,a.pipe)(e.nestedItem,h.fold(a.constNull,u.fold((e=>s.createElement("span",{className:b.H4},e)),a.constVoid)))),E=(e,t)=>{switch(e){case c.M_.Type.bold:return{icon:s.createElement(p.In.Formatting.Bold,{className:t}),labelClass:b.Cr};case c.M_.Type.italic:return{icon:s.createElement(p.In.Formatting.Italic,{className:t}),labelClass:b.TN};case c.M_.Type.underline:return{icon:s.createElement(p.In.Formatting.Underline,{className:t}),labelClass:b.mn};case c.M_.Type.header1:return{icon:s.createElement(p.In.Formatting.Header1,{className:t}),labelClass:b.h1};case c.M_.Type.header2:return{icon:s.createElement(p.In.Formatting.Header2,{className:t}),labelClass:b.h2};case c.M_.Type.link:return{icon:s.createElement(p.In.Formatting.Link,{className:t}),labelClass:b.nf};case c.M_.Type.bulletList:return{icon:s.createElement(p.In.Formatting.BulletList,{className:t})};case c.M_.Type.orderedList:return{icon:s.createElement(p.In.Formatting.OrderedList,{className:t})};case"clear":return{icon:s.createElement(p.In.Formatting.Clear,{className:t})};default:return(0,g.xb)(e)}}},54610:(e,t,i)=>{i.d(t,{v:()=>r});var r,n=i(50659),s=i(35098),a=i(43308),o=i(15491);!function(e){var t=e.navigationHideWidthThreshold=850;e.useCollapsibleNavbarThreshold=(e=t)=>n.useContext(s.L.Context).pipe(a.E("rect","width"),o.T((t=>t<=e)))}(r||(r={}))},41933:(e,t,i)=>{i.d(t,{M:()=>L});var r=i(10334),n=i(17171),s=i(50659),a=i(96955),o=i(91283),l=i(56453),c=i(84647),d=i(87574),m=i(19840),p=i(35300),h=i(92141),u=i(15491),g=i(66202),f=i(58193),_=i(65390),y=i(36840),b=i(24497),v=i(80152),C=i(11864);const k={width:C.Ks.rem(1.5),position:"absolute",alignItems:"end",overflow:"visible"},x={background:"white",zIndex:99999,display:"flex",flexDirection:"column",width:C.Ks.rem(40),borderRadius:C.Ks.rem(.5),border:"0.5px solid #CDD1DC",position:"absolute",padding:`0 ${C.Ks.rem(.875)} ${C.Ks.rem(.875)} ${C.Ks.rem(.875)}`,boxShadow:`0px 1px ${C.Ks.rem(.5)} 0.5px rgba(135, 141, 162, 0.5);`},S=(0,n._)((0,r._)({},x),{padding:"0"}),E={display:"flex",minHeight:C.Ks.rem(2.5),alignItems:"center"},w={marginRight:C.Ks.rem(.5)},T={fontSize:C.Ks.rem(.875),lineHeight:C.Ks.rem(1),padding:C.Ks.rem(.25),color:"#646B81",flex:6},M={flex:1,minWidth:C.Ks.rem(4)},A={position:"absolute",right:C.Ks.rem(1.125),top:C.Ks.rem(.875),cursor:"pointer",background:"white"},K={fontSize:C.Ks.rem(.875),lineHeight:C.Ks.rem(1.3125)},N=(0,n._)((0,r._)({},K),{paddingBottom:C.Ks.rem(.625)}),B=(0,n._)((0,r._)({},K),{background:"white",color:"#027E6F",border:"#027E6F solid 1px",marginRight:C.Ks.rem(.5),padding:`${C.Ks.rem(.25)} ${C.Ks.rem(.5)}`}),I=(0,n._)((0,r._)({},K),{background:"white",color:"#646B81",padding:`${C.Ks.rem(.25)} ${C.Ks.rem(.5)}`}),$={marginLeft:C.Ks.rem(.25),marginRight:C.Ks.rem(.25),$nest:{svg:{verticalAlign:"middle"}}},F={backgroundColor:b.Green60,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{backgroundColor:b.Green80},path:{stroke:v.Q.Icon.Base.Inverse}}},R=C.Ks.stylesheet({vbarWrapper:[k],vbarInlineCard:[x],vbarInlineCardSDUI:[S],vbarInlineCardTitle:[E],vbarInlineCardTitleIcon:[w],vbarInlineCardTitleText:[T],vbarInlineCardTitleClose:[A],vbarInlineCardAlert:[N],vbarInlineCardToolbar:[{display:"flex",justifyContent:"space-between"}],vbarInlineCardReplaceBtn:[B],vbarInlineCardDismissBtn:[I],feedbackIcon:[$],feedbackButton:[F],insertedTextBold:[{fontWeight:"bold"}],retainedText:[{textDecoration:"none"}],vbarBetaLabel:[M]}),L=(e,t,i)=>r=>{const n=t.getInlineItemForAlert(r.alert.id),o=e=>{t.handleSDUIAction(e),e.actions.forEach((e=>{switch(e.type){case"applyAlerts":case"removeAlerts":case"removeRoot":case"closeCard":return void r.close();case"nativeOpenUserSatisfactionFeedback":return void r.giveFeedback();case"copyToClipboard":return void i(e.text);default:return}}))};return s.createElement(p.Q,{hide:()=>r.close()},s.createElement(d.F.Fragment,null,(0,c.pipe)(n,u.T(g.fold((()=>null),(t=>s.createElement(P,{item:t,maxWidth:e,position:r.position,designSystem:a.J,onSDUIAction:o})))))))},P=({item:e,position:t,maxWidth:i,onSDUIAction:a,designSystem:p})=>(s.useEffect((()=>{(0,c.pipe)(o.cK.findFirst(e.content,"inlineCard"),f.Mi((t=>{a({type:h.X9.Type.sduiCardAction,sourceId:t.id,cardId:e.id,actions:t.onFocus,scope:{alertRefs:[]}})})))})),s.createElement(d.F.div,(0,n._)((0,r._)({},(0,m.Ly)(R.vbarInlineCardSDUI)),{style:(0,n._)((0,r._)({},t),{maxWidth:i})}),s.createElement(l.R,{key:e.id,sduiRootId:e.id,content:e.content,designSystem:p,notify:(t,i,r)=>{a({type:h.X9.Type.sduiCardAction,sourceId:t,cardId:e.id,actions:i,scope:r})},transitions:[],prevContent:_.none,onAnimationEnd:y.Yi,onMount:y.Yi})))},82874:(e,t,i)=>{i.d(t,{g:()=>B});var r,n,s,a=i(23988),o=i(84647),l=i(65716),c=i.n(l),d=i(77752),m=i(80614),p=i(44757),h=i(60575),u=i(88105),g=i(76005),f=i(42543),_=i(78590),y=i(36840),b=i(38908),v=i(66202),C=i(65390),k=i(50581),x=i(22835),S=i(10334),E=i(17171),w=i(4102),T=i(63082),M=i(28986),A=i(86562);!function(e){var t=e.normalizeSpacesInDelta=e=>e.reduce(((e,t)=>e.push(u.E.isInsert(t)&&"string"==typeof t.insert?(0,E._)((0,S._)({},t),{insert:t.insert.replace(/\s/g,(e=>"\n"===e||"\r"===e||"\t"===e?e:" "))}):t)),new M.R);function i(e,t){let i="";for(let r=e.ops.length-1;r>=0&&i.length<t.length;--r){const t=e.ops[r];if("string"!=typeof t.insert)break;i=t.insert+i}return i.slice(-1*t.length)===t}let n,a;e.sanitizeContent=e=>(0,o.pipe)(b.aj(e,{addTags:["o:p","del"],allowedAttrs:["href","style","class",s.TrailingSpaces.dataPreserveSpaces],forbidTags:["script","style","meta","img","video","embed","frame","iframe","area","source","track","template","canvas","audio"],allowDataAttrs:!1,returnHTML:!0}),(e=>(0,o.pipe)(k.traverseMutate(e,(e=>k.Guardians.isHTMLElement(e)||k.Guardians.isDocumentFragment(e)),(0,o.flow)(s.normalizeBold,s.TrailingSpaces.decodeTrailingSpaces,s.cleanupStyles(["whiteSpace","fontWeight","fontStyle","white-space","font-weight","font-style","mso-list"]))),v.fold((e=>(h.Bx.Logging.getLogger("HTML2Delta").warn("Cannot normalize html on paste",e),C.none)),(e=>C.some(e)))))),e.normalizeDelta=e=>(0,o.flow)(C.map(e),C.map(t)),e.trimTrailingNewLine=function(e,t={}){return r.deltaEndsWith(e,"\n")&&(null==e.ops[e.ops.length-1].attributes||t.table)?e.compose((new(c())).retain(e.length()-1).delete(1)):e},e.deltaEndsWith=i,function(e){let t;!function(e){e.and=(...e)=>t=>e.every((e=>e(t))),e.or=(...e)=>t=>e.some((e=>e(t))),e.includes=e=>t=>t.includes(e)}(t=e.Test||(e.Test={})),e.checks=[{name:g.j1.MSOutlook,test:t.and(t.includes('xmlns:w="urn:schemas-microsoft-com:office:word'),t.includes("span.EmailStyle15"))},{name:g.j1.MSWord,test:t.includes('xmlns:w="urn:schemas-microsoft-com:office:word')},{name:g.j1.MSExcel,test:t.includes('xmlns:x="urn:schemas-microsoft-com:office:excel')},{name:g.j1.MSOffice,test:t.includes('xmlns:o="urn:schemas-microsoft-com:office:office')},{name:g.j1.MSWordOnline,test:t.and(t.includes('xml:lang="EN-US"'),t.includes("TextRun"),t.includes("SCX"))},{name:g.j1.GDocs,test:t.includes('id="docs-internal-guid-')},{name:g.j1.GSheets,test:t.includes('<meta name="generator" content="Sheets"/>')},{name:g.j1.DropboxPaper,test:t.includes('class=" author-d-')},{name:g.j1.CocoaHTMLWriter,test:t.includes('<meta name="Generator" content="Cocoa HTML Writer">')},{name:g.j1.ProbablyMSOutlookOnline,test:t.or(t.includes("color: rgb(0, 0, 0); font-family: Calibri, Helvetica, sans-serif;"),t.includes("color: rgb(0, 0, 0); font-family: Calibri,Helvetica,sans-serif;"))},{name:g.j1.ProbablyGMail,test:t.or(t.includes("color: rgb(34, 34, 34); font-family: Arial, Helvetica, sans-serif;"),t.includes("color: rgb(34, 34, 34); direction: ltr; font-family: Arial,Helvetica,sans-serif;"))}],e.detectSource=(e,t)=>{const i=t.find((t=>t.test(e)));return i?i.name:g.j1.Unknown}}(n=e.SourceDetector||(e.SourceDetector={})),function(e){let t;function n(e,t){return k.Guardians.isP(e)&&"MsoNormal"===e.className&&1===e.childNodes.length&&e.firstChild&&e.firstChild.textContent===s.nbsp?(new M.R).insert("\n"):t}function a(e,t){let i=(new M.R).compose(t);if(0===t.ops.length)return v.right(i);const r=i.ops[0];if(!k.Guardians.isHTMLElement(e))return v.left(new Error("Cannot parse non-html element"));if(!u.E.isInsertString(r))return v.left(new Error("The first operation is not a string insert"));const n=r.insert.match(/^\s*?(\.|·|o|§|Ø|●)\s+/),s=r.insert.match(/^\s*?(\d+|[a-zA-Z]+)?[\.\)][\ \t\u202F\u00A0]+/);if(null===n&&null===s||s&&r.insert.length-1===s[0].length&&1===i.ops.length)return v.right(i);const a=null!==n?"bullet":"ordered",o=null!==n?n:s;i=(new M.R).insert(r.insert.substring(o[0].length,r.insert.length),r.attributes).concat(new M.R(i.ops.slice(1)));const l=i.ops[i.ops.length-1];var c;null!=l&&u.E.isInsertString(l)&&(i=new M.R(i.ops.slice(0,-1)).push({insert:l.insert.substring(0,l.insert.length-1),attributes:l.attributes}));const d=(null!==(c=e.getAttribute("style"))&&void 0!==c?c:"").replace(/\n+/g,"").match(/level(\d+)/),m=d?Number(d[1])-1:0;return i.push({insert:"\n",attributes:{list:a,indent:m}}),v.right(i)}!function(e){e.matchNewline=[Node.TEXT_NODE,(e,t,r)=>{var s;if(!i(t,"\n")&&Boolean(null===(s=e.nodeValue)||void 0===s?void 0:s.trim())){if(n(e,r)&&"TD"!==e.tagName&&(e.childNodes.length>0||e instanceof HTMLParagraphElement))return t.insert("\n");if(t.length()>0&&e.nextSibling){let i=e.nextSibling;for(;null!=i;){if(n(i,r)&&"TD"!==e.tagName)return t.insert("\n");const s=r.query(i);if(s&&s.prototype instanceof T.zo)return t.insert("\n");i=i.firstChild}}}return t}],e.matchText=[Node.TEXT_NODE,(e,t,i)=>{var s,a;let o=e.data;if("O:P"===(null===(s=e.parentElement)||void 0===s?void 0:s.tagName))return t.insert(o.trim());if("DEL"===(null===(a=e.parentElement)||void 0===a?void 0:a.tagName))return t;if(!r(e)){if(/^\n+$/.test(o)&&!function(e,t){return e.previousElementSibling&&e.nextElementSibling&&!n(e.previousElementSibling,t)&&!n(e.nextElementSibling,t)}(e,i))return t;const r=(e,t)=>{const i=e?/[^\u00a0 ]/g:/[^\u00a0]/g,r=t.replace(i,"");return r.length<1&&e?" ":r};o=o.replace(/\r\n/g," "),o.trim().length>0&&(o=o.replace(/^\n/,""),o=o.replace(/^\s+/," "),o=o.replace(/\n$/,"")),o=o.replace(/\n\s*/g," "),o=o.replace(/\s\s+/g,r.bind(r,!0)),(null==e.previousSibling&&null!=e.parentElement&&n(e.parentElement,i)||e.previousSibling instanceof Element&&n(e.previousSibling,i))&&(o=o.replace(/^\s+/,r.bind(r,!1))),(null==e.nextSibling&&null!=e.parentElement&&n(e.parentElement,i)||e.nextSibling instanceof Element&&n(e.nextSibling,i))&&(o=o.replace(/\s+$/,r.bind(r,!1)))}return t.insert(o)}];const t=new WeakMap;function r(e){return null!=e&&(t.has(e)||("PRE"===e.tagName?t.set(e,!0):t.set(e,r(e.parentNode))),t.get(e))}function n(e,t){if(!(e instanceof Element))return!1;const i=t.query(e);return!(i&&i.prototype instanceof w.EmbedBlot)&&["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(e.tagName.toLowerCase())}}(t=e.Text||(e.Text={})),e.fancyTable=[["td",(e,t)=>{const i=Number(e.getAttribute("colspan"))||1;return e.nextSibling?r.trimTrailingNewLine(t).insert("\t".repeat(i)):t}]],e.matchOutlookEmptyLine=n,e.outlookEmptyLine=["p.MsoNormal",n],e.matchMsWordList=a;const l=e=>(t,i)=>(0,o.pipe)(a(t,i),v.fold((t=>(e.info("Cannot parse MS Word List",t),i)),o.identity));e.getMSWordList=e=>{const t=l(e.getLogger("MSWordListMatcher"));return[["p.MsoListParagraph",t],["p.MsoListParagraphCxSpFirst",t],["p.MsoListParagraphCxSpMiddle",t],["p.MsoListParagraphCxSpLast",t],["p.MsoNoSpacing",t],["h1",t],["h2",t],["h3",t],["h4",t],["h5",t],["h6",t],["p.MsoHeading7",t],["p.MsoHeading8",t],["p.MsoHeading9",t],["p.MsoTitle",t],["p.MsoSubtitle",t],["p.MsoQuote",t],["p.MsoIntenseQuote",t],['p.MsoNormal[style*="mso-list"]',t]]}}(a=e.Matchers||(e.Matchers={}))}(r||(r={})),function(e){const t="color: #4a6ee0;",i=(e,t)=>{e.setAttribute("style",t.join("; "))};e.prepareHTML=(e,r)=>{const n=[`color: ${window.getComputedStyle(e).color};`,"background: transparent;","margin-top:0pt;","margin-bottom:0pt;"].join(" ");return(0,o.flow)(s.TrailingSpaces.normalizeTrailingSpaces,v.chain((e=>k.traverseMutate(e,k.Guardians.isHTMLElement,(e=>(k.Guardians.isSPAN(e)?i(e,[n,e.parentNode&&k.Guardians.isLink(e.parentNode)?t:""]):k.Guardians.isBR(e)||(k.Guardians.isLink(e)?i(e,[n,t]):k.Guardians.isH1(e)||k.Guardians.isH2(e)?i(e,[n,"font-weight: normal;"]):k.Guardians.isLI(e)&&e.parentNode?k.Guardians.isOL(e.parentNode)?i(e,[n,`list-style-type:${r(e)[1]};`]):k.Guardians.isUL(e.parentNode)&&i(e,[n,"list-style-type:disc"]):k.Guardians.isHTMLElement(e)&&i(e,[n])),e))))))}}(n||(n={})),function(e){e.removeAllSpans=e=>(0,o.pipe)(k.traverseMutate(e,k.Guardians.isHTMLElement,(e=>{if(k.Guardians.isSPAN(e)){const t=k.moveChildrenTo(document.createDocumentFragment(),e);return t.normalize(),t}return e})),v.map((e=>(e.normalize(),e))));var t=e.space=" ",i=e.nbsp=" ";const r=e=>{if(0===e.length)return"";if(1===e.length)return e;const r=e.length-1,n=(r-r%2)/2;return`${i}${`${t}${i}`.repeat(n)}${2*n===r?"":i}`};let n;!function(e){var t=e.dataPreserveSpaces="data-preserver-spaces";const i=/mso-spacerun:\s*yes/;e.decodeTrailingSpaces=e=>{var r;return k.Guardians.isSPAN(e)&&(e.hasAttribute(t)||i.test(null!==(r=e.getAttribute("style"))&&void 0!==r?r:""))&&e.setAttribute("style","white-space: pre-wrap"),e},e.normalizeTrailingSpaces=e=>k.traverseMutate(e,(e=>k.Guardians.isHTMLElement(e)),(e=>{if(e.nodeType!==Node.TEXT_NODE||null==e.textContent||e.parentNode&&k.Guardians.isSPAN(e.parentNode)&&e.parentNode.hasAttribute(t))return e;{const i=e.textContent.match(/^( *)(.*?)( *)$/);if(i){const e=document.createElement("span");return e.appendChild(document.createTextNode(`${r(i[1])}${i[2]}${r(i[3])}`)),e.setAttribute(t,"true"),e}throw new A.zU("Cannot parse textContent")}}))}(n=e.TrailingSpaces||(e.TrailingSpaces={})),e.normalizeBold=e=>!k.Guardians.isHTMLElement(e)||"B"!==e.nodeName&&"STRONG"!==e.nodeName||"normal"!==e.style.fontWeight?e:k.moveChildrenTo(document.createElement("span"),e),e.cleanupStyles=e=>t=>{if(!k.Guardians.isHTMLElement(t))return t;var i;const r=(null!==(i=t.getAttribute("style"))&&void 0!==i?i:"").split(";").map((e=>e.split(":"))).filter((([t])=>e.includes(t.trim()))).map((([e,t])=>`${e}:${t}`)).join(";");return t.setAttribute("style",r),t}}(s||(s={}));const K=(0,y.Bj)((()=>h.Bx.Logging.getLogger("DEd.Clipboard")));class N extends p.Ay{get rtfSupport(){return!1}get plainTextSources(){return[]}onCapturePaste(e){try{var t,i;if(this.clipboardShortcutUsed.next(),e.defaultPrevented||!this.quill.isEnabled())return;e.preventDefault();const r=this.quill.getSelection(!0);if(null==r)return void K().warn("Paste event handler aborted because selection is empty");const n=null===(t=e.clipboardData)||void 0===t?void 0:t.getData("text/html"),s=null===(i=e.clipboardData)||void 0===i?void 0:i.getData("text/plain");this.onPaste(r,{html:n,text:s})}catch(e){K().error("Paste event handler failed",e)}}onPaste(e,{text:t,html:i,source:n}){this.rtfSupport?i&&i.length>0?(n=r.SourceDetector.detectSource(i,[...this._sourceChecks,...r.SourceDetector.checks]),this.plainTextSources.some((e=>e===n))&&(i=void 0)):n=g.j1.PlainText:(n=null!=n?n:g.j1.Unknown,i=void 0);const s=this.quill.getFormat(e.index),a=this.convert({text:t,html:i},s),o=u.E.calcAmountLength((0,_.y1)(a)),l=this.quill.getLength()-e.length+o,m=(new(c())).retain(e.index).delete(e.length).concat(a),p=this.quill.getText(),h=p.length-1,f=p.trim().length;if(l>this._maxAllowedTextLength)this._lengthExceededCallback();else{this._flushHistory((()=>{this._options.flush(),this.quill.updateContents(m,d.Ay.sources.USER),this._options.flush()})),this.quill.setSelection(m.length()-e.length,d.Ay.sources.SILENT),this.quill.scrollSelectionIntoView();const t=this._fetchTagsAmount((0,_.y1)(m)),i=0===f?"initial":e.length===h?"reset":"partial";this.textChangedAfterPaste.next({type:i,source:n,len:o,tags:t}),0===o&&K().warn("onPaste: pasted length is 0",{source:n,rtfSupport:this.rtfSupport,formats:s,pastedDeltaLength:o,lenAfterPaste:l,textLength:h,trimmedTextLength:f,type:i})}}onCaptureCopy(e,t=!1){var i;this.clipboardShortcutUsed.next(),super.onCaptureCopy(e,t),""===(null===(i=e.clipboardData)||void 0===i?void 0:i.getData("text/html"))&&e.clipboardData.clearData("text/html")}onCopy(e,t){const{html:i,text:r}=super.onCopy(e,t);if(!this.rtfSupport||!this._rangeHasFormatting(e))return{html:"",text:this.quill.getText(e.index,e.length)};let s;if(this.rtfSupport){const e=b.aj(i,{forbidTags:["span"],allowedAttrs:["class","href","style","target"],allowDataAttrs:!1,returnHTML:!0});s=(0,o.pipe)(e,n.prepareHTML(this.quill.root,N.getOrderedListLevel),v.getOrElse((()=>e)),(e=>{const t=document.createElement("div");return t.appendChild(e),t.innerHTML}))}else s=i;return{html:`<meta name='uuid' content='uuid${this._uuid}'>${s}`,text:r}}_rangeHasFormatting(e){return(e=>(0,_.y1)(this.quill.getContents(e.index,e.length)).ops.some((e=>C.isSome(u.E.getAttr(e,_.pR.QuillFormatNames.is)))))(e)||(e=>this.quill.scroll.path(e.index+e.length).some((([e])=>k.Guardians.isLI(e.domNode)||k.Guardians.isH1(e.domNode)||k.Guardians.isH2(e.domNode))))(e)}_flushHistory(e){this.quill.history.cutoff(),e(),this.quill.history.cutoff()}convert({html:e,text:t},i={}){if(!e)return(new(c())).insert(t||"",i);const n=(0,o.pipe)(r.sanitizeContent(e),C.chain((0,o.flow)(x.Up("childNodes"),C.fromPredicate((e=>e.length>0)))),C.map((e=>{const t=document.createElement("body");for(let i=0;i<e.length;i++)t.appendChild(e[i].cloneNode(!0));return t})),C.map((e=>{const t=new WeakMap,[i,r]=this.prepareMatching(e,t);return(0,p.hV)(this.quill.scroll,e,i,r,t)})),C.getOrElse((()=>(new(c())).insert(t||"",i))));return r.trimTrailingNewLine(n,i)}dangerouslyPasteHTML(){throw new Error("dangerouslyPasteHTML is not implemented")}constructor(e,t){var i,n;super(e,{matchers:[...r.Matchers.fancyTable,...r.Matchers.getMSWordList(K()),r.Matchers.outlookEmptyLine]}),(0,a._)(this,"quill",void 0),(0,a._)(this,"_options",void 0),(0,a._)(this,"_uuid",void 0),(0,a._)(this,"_sourceChecks",void 0),(0,a._)(this,"textChangedAfterPaste",void 0),(0,a._)(this,"clipboardShortcutUsed",void 0),(0,a._)(this,"_maxAllowedTextLength",void 0),(0,a._)(this,"_lengthExceededCallback",void 0),(0,a._)(this,"syntheticPaste",void 0),(0,a._)(this,"_fetchTagsAmount",void 0),this.quill=e,this._options=t,this._uuid=b.G7(12),this._sourceChecks=[{name:g.j1.DenaliSameDocSession,test:r.SourceDetector.Test.includes(this._uuid)},{name:g.j1.DenaliOtherDocSession,test:r.SourceDetector.Test.includes("<meta name='uuid' content='uuid")}],this.textChangedAfterPaste=new f.B7,this.clipboardShortcutUsed=new f.B7,this.syntheticPaste=e=>{try{this.onPaste(new m.Q(0),{text:e,source:g.j1.Synthetic})}catch(e){K().error("Synthetic paste event handler failed",e)}},this._fetchTagsAmount=e=>Array.from(e.reduce(((e,t)=>(u.E.match((t=>Object.keys(t.attributes||{}).forEach((t=>e.add(t)))),y.Yi,(t=>Object.keys(t.attributes||{}).forEach((t=>e.add(t)))))(t),e)),new Set)),this.matchers=[r.Matchers.Text.matchText,r.Matchers.Text.matchNewline].concat(this.matchers.filter((e=>e[0]!==Node.TEXT_NODE))),this._maxAllowedTextLength=null!==(i=t.maxAllowedTextLength)&&void 0!==i?i:1e5,this._lengthExceededCallback=null!==(n=t.lengthExceededCallback)&&void 0!==n?n:y.Yi}}(0,a._)(N,"getOrderedListLevel",(e=>{let t=0,i=e.parentElement;for(;i&&!0!==i.isContentEditable;)"OL"===i.tagName&&t++,i=i.parentElement;return[t,t%3==0?"lower-roman":t%2==0?"lower-alpha":"decimal"]}));const B=(e,t)=>class extends N{get rtfSupport(){return e}get plainTextSources(){return t}}},40857:(e,t,i)=>{i.d(t,{U:()=>_});var r=i(23988),n=i(10334),s=i(17171),a=i(84647),o=i(77752),l=i(45968),c=i(60575),d=i(88105),m=i(28986),p=i(80837),h=i(11298),u=i(78590),g=i(36840),f=i(65390);class _ extends l.A{commit(e){this.cutoff(),e(),this.cutoff()}redo(){try{this._log.info("History action: redo"),this.change("redo","undo")}catch(e){this._log.error("History action: redo error",e)}}canRedo(){return this.stack.redo.length>0}canUndo(){return this.stack.undo.length>0}undo(){try{this._log.info("History action: undo"),this.change("undo","redo")}catch(e){this._log.error("History action: undo error",e)}}getAnonymizedOperationsHistory(){return this._anonymizedOperationsCache.toArray()}dispose(){this._subs.dispose()}record(e,t){super.record(y(e),y(t))}transform(e){super.transform(y(e))}constructor(e,t){super(e,t),(0,r._)(this,"quill",void 0),(0,r._)(this,"_options",void 0),(0,r._)(this,"_subs",void 0),(0,r._)(this,"_log",void 0),(0,r._)(this,"_anonymizedOperationsCache",void 0),this.quill=e,this._options=t,this._subs=new p.y.Keeper,this._log=c.Bx.Logging.getLogger("DEd.History"),this._anonymizedOperationsCache=new c.N6(20,!0);const i=(0,u.U3)(this.quill).pipe(h.u());this._subs.push(i.subscribe((e=>{e.name===o.Ay.events.TEXT_CHANGE&&this._anonymizedOperationsCache.push({ops:d.E.anonymizeTextAndStringAttrs(e.delta).ops,source:e.source})}))),(0,g.hJ)("dedOpsHistory",(()=>this._anonymizedOperationsCache.toArray())),delete e.keyboard.bindings.Z,delete e.keyboard.bindings.z,delete e.keyboard.bindings.y}}function y(e){return(0,a.pipe)(d.E.getOps(e),f.fold((()=>new m.R(e.ops)),(t=>{const i=e.reduce(((e,t)=>d.E.match((t=>e.insert(t.insert,t.attributes&&v(t.attributes))),(t=>e.delete(t.delete)),(t=>e.retain(t.retain,t.attributes&&v(t.attributes))))(t)),new m.R),r=i.ops[0];return Boolean(i.ops)&&1===i.ops.length&&d.E.isRetain(r)&&!r.attributes?new m.R:new m.R(i.ops)})))}const b=new RegExp(`^${u.rd}_`);function v(e){return Object.keys(e).reduce(((t,i)=>b.test(i)?t:(0,s._)((0,n._)({},t),{[i]:e[i]})),{})}},3656:(e,t,i)=>{i.d(t,{TV:()=>f});var r=i(23988),n=i(10334),s=i(17171),a=i(77752),o=i(51823),l=i(28986),c=i(78590),d=i(36840),m=i(50581);const p=o.Ay.DEFAULTS.bindings;class h extends o.Ay{}function u(e){return{key:e[0].toUpperCase(),shortKey:!0,handler:d.Yi}}const g={key:" ",collapsed:!0,shiftKey:!1,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*)$/,handler(e,t){const i=t.prefix.length,[r,n]=this.quill.getLine(e.index);if(n>i)return!0;const[s,o]=(e=>{switch(e){case"-":return["dashed",/^\s*?-/];case"*":return["bullet",/^\s*?\*/];default:return["ordered",/^\s*?\d+\./]}})(t.prefix.trim());if(r&&r.prev&&!m.Guardians.isUL(r.prev.domNode)&&!m.Guardians.isOL(r.prev.domNode)&&Boolean(r.prev.domNode.textContent)&&o.test(r.prev.domNode.textContent))return!0;this.quill.insertText(e.index," ",a.Ay.sources.USER),this.quill.history.cutoff();const d=(new l.R).retain(e.index-n).delete(i+1).retain(r.length()-2-n).retain(1,{list:s});return this.quill.updateContents((0,c.po)(d),a.Ay.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index-i,0,a.Ay.sources.SILENT),!1}};var f;!function(e){let t;!function(e){e.plainTextBindings={indent:p.indent,outdent:p.outdent,"outdent backspace":p["outdent backspace"],tab:p.tab,"remove tab":p["remove tab"],bold:u("bold"),italic:u("italic"),underline:u("underline")},e.rtfBindings={indent:p.indent,outdent:p.outdent,"outdent backspace":p["outdent backspace"],tab:p.tab,"remove tab":p["remove tab"],"list empty enter":p["list empty enter"],"list autofill":g,"list autofill with shift":(0,s._)((0,n._)({},g),{shiftKey:!0}),"header enter":p["header enter"]}}(t=e.Bindings||(e.Bindings={})),e.getKeyboardWithBindings=e=>{class t extends h{}return(0,r._)(t,"DEFAULTS",{bindings:e}),t}}(f||(f={}))},17559:(e,t,i)=>{i.d(t,{O:()=>Q});var r,n=i(23988),s=i(38886),a=i(84647),o=i(77752),l=i(32102),c=i(60575),d=i(88105),m=i(55340),p=i(7432),h=i(72106),u=i(21216),g=i(65141),f=i(15491),_=i(36094),y=i(19711),b=i(68745),v=i(42543),C=i(11298),k=i(78339),x=i(46669),S=i(38427),E=i(60269),w=i(62822),T=i(6987),M=i(40027),A=i(14342),K=i(78590),N=i(66202),B=i(65390),I=i(13110),$=i(23121),F=i(86562),R=i(45419);!function(e){e.rangeMismatch="range_mismatch",e.partialRemoveMismatch="partial_update_mismatch",e.noMarkInDom="no_mark_in_dom"}(r||(r={}));class L{toString(){return`${this.type} on action '${this.action}', expected: ${this.expected}, got: ${this.got}`}constructor(e,t,i){(0,n._)(this,"action",void 0),(0,n._)(this,"got",void 0),(0,n._)(this,"expected",void 0),(0,n._)(this,"type",void 0),this.action=e,this.got=t,this.expected=i,this.type=r.rangeMismatch}}class P{toString(){return`${this.type} on action '${this.action}', expected: ${this.expected}, got: ${this.got}`}constructor(e,t,i){(0,n._)(this,"action",void 0),(0,n._)(this,"got",void 0),(0,n._)(this,"expected",void 0),(0,n._)(this,"type",void 0),this.action=e,this.got=t,this.expected=i,this.type=r.partialRemoveMismatch}}class D{toString(){return`${this.type} on action '${this.action}' for range: ${this.got}`}constructor(e,t){(0,n._)(this,"action",void 0),(0,n._)(this,"got",void 0),(0,n._)(this,"type",void 0),this.action=e,this.got=t,this.type=r.noMarkInDom}}function H(e,t){var i;return null===(i=e.getAttribute("data-mark-id"))||void 0===i?void 0:i.startsWith(t.split("|")[0])}class O{fromMarkEvent(e){return(0,a.pipe)(this._getCachedDomNodes(),N.chain(B.fold((()=>N.left(new m.C.CollapsedMarkError("cannot animate collapsed mark"))),(([e])=>N.right(e)))),N.fold((e=>u.of(N.left(e))),(t=>g.R(t,e).pipe(f.T(N.right)))))}get range(){return this._getPosition(this.id)}getRect(){return(0,a.pipe)(this._getCachedDomNodes(),N.chain(B.fold((()=>N.left(new m.C.CollapsedMarkError("Cannot get rect for collapsed mark"))),(([e,t])=>(0,a.pipe)(I.ci(e===t?Array.from(e.getClientRects()):[...Array.from(e.getClientRects()),...Array.from(t.getClientRects())]),B.fold((()=>N.left(new Error("getClientRects returned nothing "))),(e=>N.right({rootClientRect:this._getParentRect(),clientRects:e}))))))))}_getCachedDomNodes(){return(0,a.pipe)(this.range(),N.fold((()=>N.right(B.none)),(e=>{const t=p.vY.size(e);return null!==this._cachedNodes&&null!==this._cachedNodes[0].parentElement&&null!==this._cachedNodes[1].parentElement&&this._cachedMarkLength===t&&H(this._cachedNodes[0],this.id)&&H(this._cachedNodes[1],this.id)?N.right(B.some(this._cachedNodes)):(0,a.pipe)(this._getUnderlines(),N.map(B.map((([e,i])=>(this._cachedNodes=[e.domNode,i.domNode],this._cachedMarkLength=t,this._cachedNodes)))))})))}_getUnderlines(){return(0,a.pipe)(this.range(),N.fold((()=>N.right(B.none)),(e=>$.zb((()=>{const{start:t,end:i}=e,r=this._getNodeAt(t+1)[0],n=this._getNodeAt(i)[0],s=K.gl.findUnderlineUp(r),a=K.gl.findUnderlineUp(n);return(0,F.V1)(null!==s&&null!==a,"Cannot find corresponding Marker. Looks like we are trying to show/hide non-existing alert/underline",(()=>`id=${this.id}; first=${s}; firstNode=${r}; last=${a}; lastNode=${n}, getContents=${this._getQuillContents(e,20)}`)),B.some([s,a])})))))}_getQuillContents(e,t){const{start:i,end:r}=e,n=i-t,s=this._getContents(n<0?0:n,r+t),a=d.E.anonymizeTextAndStringAttrs(s);return JSON.stringify(a)}constructor(e,t,i,r,s){(0,n._)(this,"id",void 0),(0,n._)(this,"_getParentRect",void 0),(0,n._)(this,"_getPosition",void 0),(0,n._)(this,"_getNodeAt",void 0),(0,n._)(this,"_getContents",void 0),(0,n._)(this,"_cachedMarkLength",void 0),(0,n._)(this,"_cachedNodes",void 0),this.id=e,this._getParentRect=t,this._getPosition=i,this._getNodeAt=r,this._getContents=s,this._cachedMarkLength=p.vY.size(N.getOrElse((()=>p.vY.empty))(this.range())),this._cachedNodes=null}}class Q extends l.A{_getMarksByBlot(e){return(0,a.pipe)(B.fromNullable(K.gl.getMarksIdsByBlot(e)),B.filterMap((0,a.flow)(s.x1((0,a.flow)((e=>this._marks.get(e)),B.fromNullable)),I.ci)))}dispose(){this._subs.forEach((e=>e.unsubscribe())),this._subs=[]}_marksValidation(e,t,i){const r=e.filter((e=>!(e.action!==m.C.Change.ActionType.remove&&e.action!==m.C.Change.ActionType.update||p.IL.is(e.meta.range())||(0,K.Vc)(e.id)))).map((e=>({id:e.id,action:e.action,range:p.vY.copy(e.meta.range())})));r.length>0&&_._F.inRic(u.of(void 0),2e3).pipe(f.T((()=>function(e,t){return(0,a.pipe)((i=e,$.zb((()=>{const{deltaMarks:e}=i.ops.reduce((({deltaMarks:e,deltaLength:t},i)=>{if(!d.E.isInsert(i))throw new Error(`Quill marks: insert delta expected ${i}`);const r=d.E.getInsertLength(i),n=i.attributes||{},s=Object.keys(n);return 0===s.length||s.filter(K.Z5).forEach((i=>{const s=p.vY.create(t,t+r,n[i]);if(e.has(i)){const t=e.get(i);if(t.start>s.end+1)throw new Error(`Corrupted partial range. End part1: ${s.end}, start part2: ${t.start}`);e.set(i,p.vY.join(s,t))}else e.set(i,s)})),{deltaMarks:e,deltaLength:t+r}}),{deltaMarks:new Map,deltaLength:0});return e}))),N.map((e=>(0,a.pipe)(t.map((t=>(0,a.pipe)(B.fromNullable(e.get((0,K.VL)(t.id))),(e=>function(e,t){return(0,a.pipe)(t,B.fold((()=>p.vY.isEmpty(e.range)?B.none:B.some(N.right(new D(e.action,e.range)))),(t=>e.action===m.C.Change.ActionType.remove&&e.removeType===h.J.Change.RemoveType.partial?p.vY.contains(e.range,t)?B.none:B.some(N.left(new P(e.action,e.range,t))):p.vY.ord.equals(t,e.range)?B.none:B.some(p.vY.contains(t,e.range)?N.right(new L(e.action,e.range,t)):N.left(new L(e.action,e.range,t))))))}(t,e))))),s.YO.sequence(B.option),B.getOrElse((()=>[]))))));var i}(t,r))),y.$()).subscribe({next:N.fold((e=>this._log.warn("Cannot collect marks to validate",e)),(e=>e.forEach(N.fold((e=>{this._log.warn("Got invalid marks",{error:e,opsHistory:i})}),(e=>this._log.info("Range does not match with mark",{rangeMismatch:e,opsHistory:i}))))))})}_createMarkModel(e){const t=new O(e.id,(()=>this.quill.container.getBoundingClientRect()),(()=>()=>{const t=e.meta.range();return p.vY.isEmpty(t)?N.left(t):N.right(t)}),(e=>this.quill.getLeaf(e)),((e,t)=>(0,K.y1)(this.quill.getContents(e,t))));return this._marks.set(t.id,t),(0,K.is)(t.id),t}_getMarksModels(e){return e.reduce(((e,t)=>{switch(t.action){case m.C.Change.ActionType.create:const i=this._createMarkModel(t);e.created.set(i.id,N.right(i));break;case m.C.Change.ActionType.update:this._marks.has(t.id)?e.created.set(t.id,N.right(this._marks.get(t.id))):e.updated.set(t.id,N.left(new F.zU("Cannot update unknown mark")));break;case m.C.Change.ActionType.remove:if(!this._marks.has(t.id))throw e.removed.set(t.id,N.left(new F.zU("Cannot remove unknown mark"))),new F.zU("Cannot remove unknown mark");this._marks.delete(t.id),this._ensureActive(t.id),e.removed.set(t.id,N.right(void 0));break;default:(0,F.xb)(t)}return e}),m.C.Change.Result.getEmpty())}_getMarkAttributes(e){const t=(0,K.VL)(e.id);switch(e.action){case m.C.Change.ActionType.create:return{[t]:{action:m.C.Change.ActionType.create,id:e.id,classes:e.meta.classes,order:e.meta.order}};case m.C.Change.ActionType.update:return{[t]:{action:m.C.Change.ActionType.update,id:e.id,classes:e.meta.classes,order:e.meta.order}};case m.C.Change.ActionType.remove:return{[t]:!1};default:return(0,F.xb)(e)}}_ensureActive(e){(0,a.pipe)(this.activeMarks.getValue(),B.filter((t=>t.some((t=>t.id===e)))),B.map((()=>{this.activeMarks.next(B.none)}))),(0,a.pipe)(this.hoveredMarks.getValue(),B.filter((t=>t.some((t=>t.id===e)))),B.map((()=>this.hoveredMarks.next(B.none))))}_findInsertsToUnwrap(e,t){return this.quill.scroll.path(e+1).reduce(((i,[r,n])=>r instanceof K.z2?((1===n&&!K.gl.hasSameIdSibling(r,K.gl.LOOKUP_DIRECTION.left)||n+t-1===r.length()&&!K.gl.hasSameIdSibling(r,K.gl.LOOKUP_DIRECTION.right))&&i.push(h.J.Change.getRemoveAction({range:()=>p.vY.create(e,e+t)},h.J.Change.RemoveType.partial)(r.markId)),i):i),[])}_unwrapMarkExtension(e){const{toRemove:t}=e.reduce((({start:e,toRemove:t},i)=>((0,K.eB)(i)&&t.push(...this._findInsertsToUnwrap(e,d.E.getInsertLength(i))),{start:e+(0,K.wq)(i),toRemove:t})),{start:0,toRemove:[]});t.length&&this.quill.updateContents((0,K.po)((0,K.QW)(t,this._getMarkAttributes)),o.Ay.sources.API)}constructor(e,t){super(e,t),(0,n._)(this,"quill",void 0),(0,n._)(this,"options",void 0),(0,n._)(this,"_subs",void 0),(0,n._)(this,"_marks",void 0),(0,n._)(this,"_log",void 0),(0,n._)(this,"activeMarks",void 0),(0,n._)(this,"hoveredMarks",void 0),(0,n._)(this,"markChangeApplied",void 0),(0,n._)(this,"getMarkById",void 0),(0,n._)(this,"changeMarks",void 0),this.quill=e,this.options=t,this._subs=[],this._marks=new Map,this._log=c.Bx.Logging.getLogger("MarksManager",c.y7.$.DEBUG),this.activeMarks=new b.t(B.none),this.hoveredMarks=new b.t(B.none),this.markChangeApplied=new v.B7,this.getMarkById=e=>(0,a.pipe)(this._marks.get(e),N.fromNullable(new Error(`Cannot find mark by id: ${e}`))),this.changeMarks=e=>{if(0===e.length)return m.C.Change.Result.getEmpty();const t=this._getMarksModels(e);return this._marksValidation(e,(0,K.y1)(this.quill.editor.delta),this.options.getOpsHistory()),this.quill.updateContents((0,K.po)((0,K.QW)(e,this._getMarkAttributes)),o.Ay.sources.API),e.forEach((e=>e.action===m.C.Change.ActionType.remove&&(0,K.p0)(e.id))),this.markChangeApplied.next(e.map((e=>e.id))),t};const i=(0,K.U3)(this.quill).pipe(C.u());this._subs.push(i.pipe(k.p(K.wM)).subscribe((({delta:e})=>{this._unwrapMarkExtension(e.ops)})),i.pipe(k.p(K.vi),k.p((({range:e})=>Boolean(e)&&0===e.length)),x.F(((e,t)=>e.range.index===t.range.index&&e.range.length===t.range.length)),f.T((({range:e,source:t})=>t===o.Ay.sources.USER?(0,a.pipe)(B.fromNullable(e),B.chain((e=>{const t=this.quill.getLeaf(e.index)[0],i=this.quill.getLeaf(e.index+1)[0];if(null===t)return B.none;if(i!==t&&i){const e=(0,a.pipe)(this._getMarksByBlot(t),B.fold((()=>[]),a.identity)),r=(0,a.pipe)(this._getMarksByBlot(i),B.fold((()=>[]),a.identity));return R.FM(e.concat(r))}return this._getMarksByBlot(t)}))):B.none))).subscribe(this.activeMarks),S.zV([E.h(g.R(this.quill.root,"mouseenter").pipe(w.u(!0)),g.R(this.quill.root,"mouseleave").pipe(w.u(!1))).pipe(x.F()),this.options.ongoingSelection]).pipe(T.n((([e,i])=>i?u.of(B.none):e?E.h(t.contentUpdated.pipe(w.u(B.none)),t.scrollPositionChanged.pipe(w.u(B.none)),g.R(this.quill.root,"mousemove",{passive:!0}).pipe(M.Z(50),f.T((e=>{const t=document.elementFromPoint(e.clientX,e.clientY);try{const e=o.Ay.find(t,!0);return!Boolean(e)||e instanceof o.Ay?B.none:this._getMarksByBlot(e)}catch(e){return B.none}})))):u.of(B.none).pipe(A.c(200)))),x.F(B.getEq({equals:(e,t)=>e.length===t.length&&e.every(((e,i)=>t[i]===e))}).equals)).subscribe(this.hoveredMarks))}}(0,n._)(Q,"DEFAULTS",{})},91177:(e,t,i)=>{i.d(t,{H:()=>v,_:()=>b});var r=i(23988),n=i(10334),s=i(17171),a=i(50659),o=i(87574),l=i(19840),c=i(35098),d=i(19772),m=i(90405),p=i(19711),h=i(95168),u=i(15491),g=i(74168),f=i(46669),_=i(89769),y=i(36094);class b extends a.Component{componentDidMount(){this.props.onMount&&this.props.onMount(this._editorWrapEl)}shouldComponentUpdate(){return!1}render(){const{theme:e={},children:t,onMouseDown:i}=this.props;return a.createElement("div",{className:e.editorContentWrap,onMouseDown:i},a.createElement(o.F.div,(0,s._)((0,n._)({},(0,l.Ly)(e.editorContent)),{mount:e=>e&&(this._editorWrapEl=e)}),t))}constructor(...e){super(...e),(0,r._)(this,"_editorWrapEl",void 0)}}const v=e=>{const t=a.useContext(c.L.Context),{ref:i,onMount:r}=d.R.useElWatcher();d.R.useSubscriptionTo(i.pipe(m.Kc((i=>e.scrollEl.pipe(m.oE,p.$(),h.M((r=>e.denaliEditor.attach(i,r,t.pipe(u.T((e=>e.rect))))))))))),d.R.useSubscriptionTo(i.pipe(m.Kc((t=>g.sc(t).pipe(u.T((e=>e.height)),f.F(),_.Z(t.getBoundingClientRect().height),h.M(y.H9(e.editorHeight))))))),a.useEffect((()=>()=>e.denaliEditor.dispose()));const{theme:n={},children:s}=e;return a.createElement(b,{theme:n,onMount:r},s)}},94808:(e,t,i)=>{i.d(t,{W:()=>Ke,H:()=>Ne.H});var r=i(23988),n=i(10334),s=i(17171),a=i(38886),o=i(44869),l=i(84647),c=i(77752),d=i(82498),m=i(63404),p=i(77821),h=i(91597),u=i(80074),g=i(60575),f=i(49004),_=i(88105),y=i(28986),b=i(76005),v=i(7432),C=i(72106),k=i(34980),x=i(15114),S=i(46669),E=i(62822),w=i(36094),T=i(68594),M=i(65141),A=i(78339),K=i(10540),N=i(48209),B=i(95168),I=i(6987),$=i(3346),F=i(54988),R=i(15491),L=i(28066),P=i(90405),D=i(38427),H=i(58347),O=i(21216),Q=i(60269),V=i(21662),U=i(88423),W=i(8331),z=i(61586),G=i(80837),j=i(59183),q=i(68745),Y=i(42543),J=i(60246),Z=i(43308),X=i(14342),ee=i(83541),te=i(81930),ie=i(11298),re=i(62723),ne=i(89769),se=i(24946),ae=i(40027),oe=i(19711),le=i(36735),ce=i(98814),de=i(78590),me=i(50581),pe=i(86562),he=i(65390),ue=i(66202),ge=i(36840),fe=i(58193),_e=i(23121),ye=i(34717),be=i(36644),ve=i(29145),Ce=i(82874),ke=i(40857),xe=i(3656),Se=i(17559),Ee=i(19101);const we=(e,t)=>{const i=Boolean(c.Ay.imports[e])?c.Ay.import(e):null;return c.Ay.register(e,t,!0),()=>{c.Ay.imports[e]===i&&(Boolean(i)?c.Ay.register(e,i,!0):delete c.Ay.imports[e])}};var Te,Me,Ae;!function(e){var t,i,r,n,s=e.withDefaultThemeClasses=(e={})=>({editor:me.classes(Ee.EN,e.editor),containerClass:null!==(t=e.containerClass)&&void 0!==t?t:"",scrollWrap:null!==(i=e.scrollWrap)&&void 0!==i?i:"",markExtraClass:null!==(r=e.markExtraClass)&&void 0!==r?r:"",markClassesTheme:null!==(n=e.markClassesTheme)&&void 0!==n?n:(0,x.TM)()});e.getDefaultThemeClasses=()=>s({})}(Te||(Te={})),function(e){e.api="api",e.dox="dox",e.user="user"}(Me||(Me={})),(Me||(Me={})).toQuillSources=e=>{switch(e){case Me.dox:case Me.user:return c.Ay.sources.USER;case Me.api:return c.Ay.sources.API;default:return(0,pe.xb)(e)}},function(e){e.isLocalDelta=e=>"dox"!==e.source&&f.lY.isDelta(e.change)}(Ae||(Ae={}));class Ke{_initQuill(e,t){const i=[...Object.entries(t.modules).map((([e,t])=>we(`modules/${e}`,t))),...t.formats.map((e=>we(`formats/${e.blotName}`,e)))],r=(0,s._)((0,n._)({},Object.keys(t.modules).reduce(((e,t)=>(e[t]=!0,e)),{})),{keyboard:!0,clipboard:{maxAllowedTextLength:1e5,lengthExceededCallback:()=>alert("Oops, Document size exceeded!"),flush:this._flush,deltaFilter:this._deltaFilter},history:{userOnly:!0,delay:1e3,maxStack:100,flush:this._flush},marks:{scrollPositionChanged:this.scrollPosition.pipe(S.F(),E.u(w.q6),T.i(1)),contentUpdated:this.contentUpdated,scrollContainer:this._scrollEl,ongoingSelection:this.ongoingSelection.pipe(S.F()),getOpsHistory:()=>this._history.getAnonymizedOperationsHistory()}}),a=new c.Ay(this._editorEl,{modules:r});a.root.setAttribute("spellcheck","false");const o=a.container.className,l=a.root.className;return this._subs.push(e.subscribe((e=>{a.root.className=me.classes(e.editor,l),a.container.className=me.classes(e.containerClass,o)}))),i.forEach((e=>e())),a}_pushDelta(e){void 0===this._outgoingChanges?this._outgoingChanges=f.lY.delta(this._deltaFilter(e),this._textLength):this._outgoingChanges.delta=this._outgoingChanges.delta.compose(this._deltaFilter(e));const t=_.E.calcAmountLength(e);!Boolean(this._outgoingChanges.isEmpty)&&(t>100||this._textLength-t<=1||void 0!==e.ops.find((e=>(0,de.h)(e)||(0,de.eB)(e)))||he.isSome(this.activeMarks.getValue()))?this._applyingExternalChanges||this.flushChanges():(void 0!==this._changesSyncTimer&&clearTimeout(this._changesSyncTimer),this._changesSyncTimer=setTimeout(this.flushChanges,1500))}_setTextLength(e,t){const i=this._textLength-e;this._textLength=e;const r="api"===t?b.LN.Meta.Source.api:b.LN.Meta.Source.user,n="api"===t?{}:this.getFormatting(v.vY.create(e-1,0)),{index:s,length:a}=this.getCursor();s+a>=e&&this.selection.next({index:s,length:a-i,meta:{source:r,formatting:n}})}_handleFreezeFocus(){const e=(e,t)=>e===t||this._allowNavigationTo(e),t=M.R(document,"click").pipe(A.p((t=>!e(t.target,this.quill.root))),K.QE(N.$),A.p((()=>!e(document.activeElement,this.quill.root))),B.M((()=>this._restoreFocus("navigatedFromQuill"))));return this._freezeFocus.state.pipe(I.n(w._F.rafScheduler),B.M((e=>e?this._restoreFocus("focusFreeze"):this.quill.blur())),I.n(w.vh(t)),$.W((e=>(this._log.warn("unexpected exception in freezeFocus",e),F.w)))).subscribe()}attach(e,t,i){if(Boolean(this._wrapper))throw new Error("Editor already attached");this._wrapper=e,this._scrollEl.next(he.some(t)),this._viewportRect=i,e.appendChild(this._editorEl),this._textLength?ue.getOrElse((e=>this._log.error(`Failed to reset cursor on ded attach ${e}`)))(this.setCursor(0,0)):this.quill.root.focus(),(0,ge.hJ)("dedBlockFlush",(()=>this._isFlushBlocked=!0)),(0,ge.hJ)("dedAllowFlush",(()=>this._isFlushBlocked=!1)),(0,ge.hJ)("dedForceFlush",(()=>this.flushChanges())),(0,ge.hJ)("dedGetText",this.getText),(0,ge.hJ)("dedSetCursor",((e,t)=>ue.getOrElse((e=>this._log.error(e)))(this.setCursor(e,t,c.Ay.sources.USER)))),(0,ge.hJ)("dedGetCursor",(()=>this.getCursor())),(0,ge.hJ)("dedType",(e=>{this.flushChanges(),this._pushChanges(f.lY.ins(this.getCursor().index,e,this.getText().length),Me.user)})),(0,ge.hJ)("dedQuill",this.quill),(0,ge.hJ)("ded",this),(0,ge.hJ)("getPossibleCursorPosition",((e,t,i)=>this.getPossibleCursorPosition("string"==typeof e?ue.left(e):ue.right(e),"string"==typeof t?ue.left(t):ue.right(t),i))),this._subs.push(this._handleFreezeFocus(),M.R(this.quill.root,"mouseup").pipe(R.T((e=>({clicks:e.detail,range:he.fromNullable(this.quill.getSelection())}))),R.T((({clicks:e,range:t})=>(0,l.pipe)(t,he.chain((e=>(0,de.a3)(this.quill.getText(),e.index))),he.filter((e=>""!==e.meta.value)),he.map(v.h0.create(e)))))).subscribe(this.clickedWord),this._scrollTo.pipe(L.w()).subscribe(this._setScroll),this._scrollEl.pipe(P.oE,I.n((e=>M.R(e,"scroll").pipe(R.T(this._getScroll))))).subscribe(this.scrollPosition),D.zV(this._contentChange.pipe(A.p((({source:e})=>e===c.Ay.sources.USER))),this._viewportRect).subscribe((([,e])=>{requestAnimationFrame((()=>{(0,l.pipe)(this._getCursorRect(),ue.fold((e=>(this._log.warn("Typing enhancer: Cannot get cursor rect",e),he.none)),l.identity),fe.Mi((t=>{const i=Math.ceil(t.top+t.height),r=Math.ceil(.7*Math.max(e.top+e.height));i>r&&this._scrollTo.next(this._getAnimation({scrollTop:this._getScroll()+Math.round(i-r),animate:b.nA.initial},this._getScroll()))})))}))})),D.zV([this._scrollEl.pipe(P.oE),this._historyChanged]).subscribe((([e])=>requestAnimationFrame((()=>{(0,l.pipe)(this._getCursorRect(),ue.fold((e=>(this._log.warn("Undo/Redo: Cannot get cursor rect",e),he.none)),l.identity),fe.Mi((t=>{const i=e.getBoundingClientRect();(t.top<i.top||t.top>i.bottom)&&this._scrollTo.next(this._getAnimation({scrollTop:this._getScroll()+Math.round(t.top-i.top-i.height/2),animate:b.nA.none},this._getScroll()))})))})))),D.zV(this._viewportRect,this.scrollPosition.pipe(H.B(150))).pipe(R.T(a.d5),P.Kc((0,l.flow)(this._calculateViewport,O.of))).subscribe(this.viewport),Q.h(M.R(this.quill.root,"blur").pipe(E.u(!1)),M.R(this.quill.root,"focus").pipe(E.u(!0))).subscribe(this.isEditorFocused),this._execCommandAfterFocus.pipe(V.E(this.isEditorFocused)).subscribe((([e,t])=>{t||this._restoreFocus("Restore focus after copy/cut"),document.execCommand(e)})))}dispose(){this._subs.dispose(),this._marker.dispose(),this._history.dispose(),this.quill.emitter.removeAllListeners()}setContents(e,t=Me.api){const i=(0,de.H6)(e),r=void 0!==this._outgoingChanges,n=e.delta.compose(i.delta),s=_.E.calcDiffLength(n),a=this._deltaFilter(n),o=_.E.calcDiffLength(a);this._log.debug("reset content",{shouldNormalizeCRLF:!i.isEmpty,hasOutgoingChanges:r,deltaLength:s,deltaWithoutAttrsLength:o,deltaLengthMismatch:s!==o}),this.quill.setContents((0,de.po)(a),"api"),this._setTextLength(s,t),t!==Me.dox||i.isEmpty||(this._log.warn("Received Reset from DOX without trailing linebreak. Pushing linebreak delta to DOX",i),this._doxSync.pushChanges(i)),"api"!==t?this._changes.next({change:f.lY.unsafeRes(n),source:t}):i.isEmpty||this._changes.next({change:i,source:t})}getCursor(){const e=this.selection.getValue();return(0,s._)((0,n._)({},e),{meta:(0,s._)((0,n._)({},e.meta),{formatting:this.getFormatting(b.LN.toTextRange(e))})})}getLastPossibleCursorPosition(){return this._textLength-1}getSelectionRect(e){return(0,l.pipe)(this._getDocumentRange(e||this.getCursor()),ue.map((e=>new de.Yc(e,(()=>this.quill.container.getBoundingClientRect())))))}changeMarks(e){this.flushChanges(),this._log.debug("change marks",e.map(C.J.Change.addRange));const t=this._marker.changeMarks(e);return this.isEditorFocused.getValue()&&this._restoreFocus("changeMarks"),t}_scrollToPosition(e){const t=this._getScroll(),i=this._normalizeScrollOffset(e.scrollTop-this._getScrollTop());this._scrollTo.next(this._getAnimation({scrollTop:t+i,animate:e.animate},t).pipe(U.j((()=>{const e=this._getScroll();this._scrollTo.next(this._getAnimation({scrollTop:e,animate:b.nA.none},e))}))))}get contentRect(){return(0,l.pipe)(he.fromNullable(this._wrapper),he.map((e=>e.getBoundingClientRect())))}getMarkRect(e){return(0,l.pipe)(this._marker.getMarkById(e),ue.chain((e=>e.getRect())))}getMarkById(e){return this._marker.getMarkById(e)}scrollToMark(e,t={animate:b.nA.none,paddingTop:0}){return(0,l.pipe)(this._marker.getMarkById(e),ue.chain((e=>this._getMarkRect(e))),ue.fold((e=>(this._log.error("Cannot scroll to given mark",e),W.$(e))),(e=>{const i=t.animate||b.nA.none,r=this._getScrollTop(),n=this._normalizeScrollOffset(e.top-(t.paddingTop?t.paddingTop:r));return new z.c((e=>(e.next(void 0),this._scrollTo.next(this._getAnimation({scrollTop:this._getScroll()+n,animate:i},this._getScroll()).pipe(U.j((()=>{e.complete()})))),()=>{this._scrollTo.next(this._getAnimation({scrollTop:this._getScroll(),animate:b.nA.none},this._getScroll()))})))})))}undo(e="user"){this._history.undo(),this._historyChanged.next({source:e})}canUndo(){return this._history.canUndo()}clearHistory(){this._history.clear()}redo(e="user"){this._history.redo(),this._historyChanged.next({source:e})}canRedo(){return this._history.canRedo()}cut(){this._execCommandAfterFocus.next("cut")}copy(){this._execCommandAfterFocus.next("copy")}dontFreezeWhen(e,t){return!0===this._options.freezeFocusFeature?this._freezeFocus.watch(w.B8(e),t):G.y.EMPTY}_getScrollTop(){return(0,l.pipe)(this._getScrollRect(),he.fold((()=>0),(e=>e.top)))}_getMarkRect(e){return(0,l.pipe)(e.getRect(),ue.map(k.W.relativeToViewport),ue.map((e=>({top:e.top,bottom:e.bottom}))))}_getCursorRect(){return ue.tryCatch((()=>(0,l.pipe)(he.fromNullable(this.quill.getSelection()),he.filter((e=>0===e.length)),he.chain((e=>he.fromNullable(this.quill.getBounds(e.index,1)))),he.map((e=>{const t=this.quill.container.getBoundingClientRect();return{bottom:e.bottom+t.top,height:e.height,left:e.left+t.left,right:e.right+t.left,top:e.top+t.top,width:e.width}})))),(e=>e))}_ensureSelection(e){const t=this.quill.getSelection();e(),t&&t.length>0&&this._clearSelection((()=>{this.quill.setSelection(t.index,t.length,c.Ay.sources.API)}))}_clearSelection(e){const t=Boolean(window.getSelection)?window.getSelection():document.selection;Boolean(t)&&(Boolean(t.removeAllRanges)?t.removeAllRanges():Boolean(t.empty)&&t.empty()),e&&requestAnimationFrame(e)}_addFormatting(e,t,i){t===b.M_.Type.link?this._applyFormatting(b.M_.Type.link,e,i):this._applyFormatting(t,e)}_removeFormatting(e,t){t===b.M_.Type.link?this._applyFormatting(b.M_.Type.link,e,!1):this._applyFormatting(t,e,!1)}_clearFormatting(e){v.vY.isEmpty(e)&&(b.M_.asList.forEach((e=>{const{key:t}=de.pR.mapEditorFormatToQuill(e);this.quill.format(t,!1,"user")})),this._contentUpdatedInternal.next({type:b.D_.Type.onlyFormatting,source:"user",delta:new y.R})),this.quill.removeFormat(e.start,v.vY.size(e),c.Ay.sources.USER)}_applyFormatting(e,t,i){const{key:r,value:n}=de.pR.mapEditorFormatToQuill(e),s=void 0!==i?i:n;if(v.vY.isEmpty(t)){if(e===b.M_.Type.link)return;this.quill.format(r,s,"user"),this._contentUpdatedInternal.next({type:b.D_.Type.onlyFormatting,source:"user",delta:new y.R})}else this._getFormattingFn(e)(t.start,v.vY.size(t),r,s,"user")}getFormatting(e){return de.pR.mapQuillFormatsToDenali(this.quill,e)}constructor(e,t,i,n,s){(0,r._)(this,"_doxSync",void 0),(0,r._)(this,"_allowedAttrs",void 0),(0,r._)(this,"_allowedEmbeds",void 0),(0,r._)(this,"_options",void 0),(0,r._)(this,"_log",void 0),(0,r._)(this,"_freezeFocus",void 0),(0,r._)(this,"_subs",void 0),(0,r._)(this,"_editorEl",void 0),(0,r._)(this,"_scrollEl",void 0),(0,r._)(this,"_viewportRect",void 0),(0,r._)(this,"_wrapper",void 0),(0,r._)(this,"_quillEditorChange",void 0),(0,r._)(this,"_scrollTo",void 0),(0,r._)(this,"_textLength",void 0),(0,r._)(this,"_outgoingChanges",void 0),(0,r._)(this,"_changesSyncTimer",void 0),(0,r._)(this,"_marker",void 0),(0,r._)(this,"_history",void 0),(0,r._)(this,"_historyChanged",void 0),(0,r._)(this,"_allowNavigationTo",void 0),(0,r._)(this,"_clipboard",void 0),(0,r._)(this,"_contentChange",void 0),(0,r._)(this,"_isFlushBlocked",void 0),(0,r._)(this,"quill",void 0),(0,r._)(this,"textChangedAfterPaste",void 0),(0,r._)(this,"shortcutUsed",void 0),(0,r._)(this,"_deltaFilter",void 0),(0,r._)(this,"_userClasses",void 0),(0,r._)(this,"flushChanges",void 0),(0,r._)(this,"_flush",void 0),(0,r._)(this,"_changes",void 0),(0,r._)(this,"changes",void 0),(0,r._)(this,"_contentUpdatedInternal",void 0),(0,r._)(this,"contentUpdated",void 0),(0,r._)(this,"selection",void 0),(0,r._)(this,"selectedFormatting",void 0),(0,r._)(this,"clickedWord",void 0),(0,r._)(this,"scrollPosition",void 0),(0,r._)(this,"activeMarks",void 0),(0,r._)(this,"hoveredMarks",void 0),(0,r._)(this,"markChangeApplied",void 0),(0,r._)(this,"scrollPercentage",void 0),(0,r._)(this,"ongoingSelection",void 0),(0,r._)(this,"viewport",void 0),(0,r._)(this,"viewportRange",void 0),(0,r._)(this,"isEditorFocused",void 0),(0,r._)(this,"_execCommandAfterFocus",void 0),(0,r._)(this,"_validateSelection",void 0),(0,r._)(this,"_documentRangeCache",void 0),(0,r._)(this,"_getDocumentRange",void 0),(0,r._)(this,"_setNativeSelection",void 0),(0,r._)(this,"_restoreFocus",void 0),(0,r._)(this,"_scrollToCursor",void 0),(0,r._)(this,"restoreFocus",void 0),(0,r._)(this,"_getAnimation",void 0),(0,r._)(this,"_applyingExternalChanges",void 0),(0,r._)(this,"_pushChanges",void 0),(0,r._)(this,"pushChanges",void 0),(0,r._)(this,"_text",void 0),(0,r._)(this,"getText",void 0),(0,r._)(this,"getHTML",void 0),(0,r._)(this,"getTextLength",void 0),(0,r._)(this,"getContents",void 0),(0,r._)(this,"setCursor",void 0),(0,r._)(this,"scrollToTitle",void 0),(0,r._)(this,"_getScrollRect",void 0),(0,r._)(this,"_getScroll",void 0),(0,r._)(this,"_normalizeScrollOffset",void 0),(0,r._)(this,"_setScroll",void 0),(0,r._)(this,"_calculateViewport",void 0),(0,r._)(this,"containsElement",void 0),(0,r._)(this,"getPossibleCursorPosition",void 0),(0,r._)(this,"setFormatting",void 0),(0,r._)(this,"_getFormattingFn",void 0),this._doxSync=t,this._allowedAttrs=i,this._allowedEmbeds=n,this._options=s,this._log=g.Bx.Logging.getLogger("DEd",g.y7.$.DEBUG,g.y7.I.Model.getColor("DEd")),this._freezeFocus=new j.p.Impl("freezeFocus",!0===this._options.freezeFocusFeature?j.p.everyTrue:()=>!1),this._subs=new G.y.Keeper,this._editorEl=document.createElement("div"),this._scrollEl=new q.t(he.none),this._scrollTo=new Y.B7,this._textLength=0,this._outgoingChanges=void 0,this._historyChanged=new Y.B7,this._isFlushBlocked=!1,this.shortcutUsed=new Y.B7,this._deltaFilter=_.E.cleanDelta(this._allowedEmbeds,this._allowedAttrs),this._userClasses=this._options.classes?this._options.classes.view(Te.withDefaultThemeClasses):u.s.create(Te.getDefaultThemeClasses()),this.flushChanges=(e=Me.api)=>{if(!this._isFlushBlocked&&void 0!==this._outgoingChanges){this._log.trace("flushChanges");const t=this._outgoingChanges;this._outgoingChanges=void 0,void 0!==this._changesSyncTimer&&(clearTimeout(this._changesSyncTimer),this._changesSyncTimer=void 0),Boolean(t.isEmpty)||(this._log.debug("emit changes",{textLength:this.getTextLength(),deltaLength:t.length,deltaAmount:t.amount,deltaTargetLen:t.prevLen}),this._changes.next({change:t,source:e}))}},this._flush=()=>{this.flushChanges(),this._changes.next({change:f.lY.flush(),source:Me.api})},this._changes=new J.m,this.changes=this._changes.pipe(Z.E("change")),this._contentUpdatedInternal=new Y.B7,this.contentUpdated=this._contentUpdatedInternal.pipe(X.c(1)),this.selection=new q.t(b.LN.empty),this.selectedFormatting=Q.h(this._contentUpdatedInternal.pipe(A.p((e=>e.type===b.D_.Type.onlyFormatting)),V.E(this.selection,((e,t)=>t))),this.selection).pipe(R.T((e=>this.getFormatting(b.LN.toTextRange(e)))),ee.shareReplay({bufferSize:1,refCount:!0})),this.clickedWord=new Y.B7,this.scrollPosition=new q.t(0),this.ongoingSelection=new q.t(!1),this.viewport=new q.t({text:me.Rect.empty,wrapper:me.Rect.empty}),this.isEditorFocused=new q.t(!0),this._execCommandAfterFocus=new Y.B7,this._validateSelection=({index:e,length:t})=>_e.zb((()=>((0,pe.V1)(e+t>=0,"Selection is less than zero",(()=>`index: ${e}, length: ${t}`)),(0,pe.V1)(e+t<this._textLength,"Selection is greater than text length",(()=>`index: ${e}, length: ${t}, text length: ${this._textLength}`)),{index:e,length:t}))),this._documentRangeCache=ce.l.createCache(5),this._getDocumentRange=(0,l.flow)(this._validateSelection,ue.chain((e=>(0,l.pipe)(this._documentRangeCache.get(e),he.fold((()=>(0,l.pipe)(e,ce.l.BoundaryPoint.getPoints((t=>{const i=this.quill.getLeaf(t);return(0,pe.V1)(null!==i[0],"Failed to get boundary point",(()=>JSON.stringify({quillTextLength:this.quill.getLength(),path:this.quill.scroll.path(t).map((([e,t])=>[e.statics.blotName,t])),dedTextLength:this._textLength,position:t,selection:e}))),(0,de.RU)(i)})),ue.chain(ce.l.BoundaryPoint.toNativeRange))),ue.right),ue.map((t=>(this._documentRangeCache.set(e,t),t))))))),this._setNativeSelection=(e,t)=>(0,l.pipe)(this._getDocumentRange(e),ue.map((e=>{const i=window.getSelection()||document.selection;i.removeAllRanges(),i.addRange(e),this.quill.focus({preventScroll:t})}))),this._restoreFocus=e=>(0,l.pipe)(this.getCursor(),this._setNativeSelection,ue.getOrElse((t=>this._log.error("Cannot reset focus",t,e)))),this._scrollToCursor=()=>(0,l.pipe)(this._getCursorRect(),ue.getOrElse((e=>(this._log.warn("Scroll to cursor: Cannot get cursor rect",e),he.none))),he.chain((e=>(0,l.pipe)(this._getScrollRect(),he.map((t=>({cursorRect:e,wrapperRect:t})))))),fe.Mi((({cursorRect:e,wrapperRect:t})=>this._scrollToPosition({scrollTop:Math.round(e.top-t.top-t.height/2),animate:b.nA.initial})))),this.restoreFocus=e=>{this._restoreFocus(e),this._scrollToCursor()},this._getAnimation=(e,t)=>{switch(e.animate){case b.nA.none:return O.of(e.scrollTop);case b.nA.fast:return te.X.createAnimationObservable(t,e.scrollTop,100);case b.nA.initial:return te.X.createAnimationObservable(t,e.scrollTop,200);case b.nA.fake:return function(e,t,i){return z.c.create((r=>{const n=Math.abs(e-t)<250?0:e-t>0?Math.min(e-t,250):Math.max(e-t,-250);i.style.transform=`translateY(${n}px)`,i.style.transition="",r.next(e);const s=requestAnimationFrame((()=>{i.style.transition="transform 150ms linear",i.style.transform=""}));return()=>{cancelAnimationFrame(s),i.style.transition="",i.style.transform=""}}))}(e.scrollTop,t,this._wrapper);default:return(0,pe.xb)(e.animate)}},this._applyingExternalChanges=!1,this._pushChanges=(e,t)=>{this._log.trace("pushChanges",e),f.lY.isFlush(e)?this.flushChanges(t):f.lY.isReset(e)?(this._log.debug("get reset",{source:t,textLength:this.getTextLength(),deltaLength:e.length}),this._outgoingChanges=void 0,this.setContents(e,t)):(this._log.debug("get changes",{source:t,textLength:this.getTextLength(),deltaLength:e.length,deltaAmount:e.amount,deltaTargetLen:e.prevLen,change:e}),(0,pe.V1)(void 0===this._outgoingChanges,"There should be no outgoing changes in the editor when pushChanges() is called. Use flush()"),e.prevLen!==this._textLength&&this._log.error("Incoming change for a wrong text len",{expected:this._textLength,incoming:e.prevLen}),this._ensureSelection((()=>{this._history.commit((()=>{this._applyingExternalChanges=!0,_.E.splitToDeleteThenInsert(e.delta).filter(_.E.nonEmpty).forEach((e=>{this.quill.updateContents((0,de.po)(e),Me.toQuillSources(t))})),this._applyingExternalChanges=!1,this.flushChanges(t)}))})))},this.pushChanges=(e,t)=>{this._pushChanges(e,"api"===t?Me.api:Me.user)},this._text=null,this.getText=()=>(null===this._text&&(this._text=this.quill.getText()),this._text),this.getHTML=()=>(this.flushChanges(),this._editorEl.outerHTML),this.getTextLength=()=>this._textLength,this.getContents=(e,t)=>f.lY.unsafeRes(this._deltaFilter((0,de.y1)(this.quill.getContents(e,t)))),this.setCursor=(e,t=0,i="api")=>(0,l.pipe)(this._setNativeSelection({index:e,length:t,meta:{source:"api"===i?b.LN.Meta.Source.api:b.LN.Meta.Source.user,formatting:this.getFormatting(v.vY.create(e,t))}},"silent"===i),ue.map((()=>{this.quill.setSelection(e,t,i)}))),this.scrollToTitle=()=>{this._scrollTo.next(this._getAnimation({scrollTop:0,animate:b.nA.initial},this._getScroll()))},this._getScrollRect=()=>(0,l.pipe)(this._scrollEl.getValue(),he.map((e=>e.getBoundingClientRect()))),this._getScroll=()=>((0,pe.V1)(he.isSome(this._scrollEl.getValue()),"DEd should be attached"),fe.$v(this._scrollEl.getValue()).scrollTop),this._normalizeScrollOffset=e=>{(0,pe.V1)(he.isSome(this._scrollEl.getValue()),"DEd should be attached");const t=fe.$v(this._scrollEl.getValue()),i=t.scrollTop,r=t.scrollHeight-t.offsetHeight;return e+i<r?e+i>0?e:-i:r-i},this._setScroll=e=>((0,pe.V1)(he.isSome(this._scrollEl.getValue()),"DEd should be attached"),fe.$v(this._scrollEl.getValue()).scrollTop=e),this._calculateViewport=e=>{const t=this.quill.root.getBoundingClientRect();return{text:(0,l.pipe)(me.Rect.intersection(e,t),he.getOrElse((()=>t))),wrapper:e}},this.containsElement=e=>me.isParent(this.quill.root,e),this.getPossibleCursorPosition=(e,t,i=!1)=>{const r=this.viewport.value.text,n=(0,l.pipe)(e,ue.fold(b.Yd.X.toViewport(r),l.identity)),s=(0,l.pipe)(t,ue.fold(b.Yd.Y.toViewport(r),l.identity));return(0,l.pipe)(de.pi.getNativeCursorByPosition(n,s,r,this.quill.root,this._log.isEnabled(g.y7.$.TRACE)||i),ue.map(de.pi.getPositionByNativeCursor(this.quill.root)))},this.setFormatting=e=>{const t=Array.from(Object.entries(e.meta.formatting));if(0===t.length)return;const i=b.LN.toTextRange(e);t.length===b.M_.asList.length&&t.every((([e,t])=>!1===t||void 0===t))?this._clearFormatting(i):(0,l.pipe)(t,a.jB((([e,t])=>t)),(({left:e,right:t})=>{e.forEach((([e])=>this._removeFormatting(i,e))),t.forEach((([e])=>this._addFormatting(i,e)))}))},this._getFormattingFn=e=>(de.pR.isBlockFormat(e)?this.quill.formatLine:this.quill.formatText).bind(this.quill),this._allowNavigationTo=s.allowNavigationTo||(()=>!1),this.quill=this._initQuill(this._userClasses,e),this._marker=this.quill.getModule("marks"),this._history=this.quill.getModule("history"),this._clipboard=this.quill.getModule("clipboard"),this.textChangedAfterPaste=this._clipboard.textChangedAfterPaste,this.activeMarks=this._marker.activeMarks,this.hoveredMarks=this._marker.hoveredMarks,this.markChangeApplied=this._marker.markChangeApplied,this._quillEditorChange=(0,de.U3)(this.quill).pipe(ie.u()),this._contentChange=this._quillEditorChange.pipe(A.p((0,de.oF)(this._allowedAttrs)),ie.u()),this._log.isEnabled(g.y7.$.DEBUG)&&function(e,t,i,r=he.some){const n=e[t].bind(e);e[t]=(...e)=>((0,l.pipe)(r(...e),fe.Mi((e=>i.debug(`trace call of ${t}`,{args:e,stack:(new Error).stack})))),n(...e))}(this.quill,"updateContents",this._log.getLogger("quill.core"),((e,t)=>"user"!==t&&_.E.calcDiffLength(e)<0?he.some({delta:_.E.anonymizeTextAndStringAttrs(e),source:t}):he.none)),this.scrollPercentage=this.scrollPosition.pipe(re.z(this._scrollEl.pipe(re.z(Q.h(M.R(window,"resize"),this._contentChange).pipe(H.B(500),ne.Z(w.q6)),(e=>e)),R.T((e=>(0,l.pipe)(e,he.chain((e=>{const t=e.scrollHeight-e.clientHeight;return t>0?he.some(t):he.none}))))),S.F(he.getEq(o.US).equals))),R.T((([e,t])=>(0,l.pipe)(t,he.map((t=>e/t))))),S.F(he.getEq(o.US).equals),ee.shareReplay({bufferSize:1,refCount:!0}));const d=this._quillEditorChange.pipe(A.p(de.vi),A.p((e=>Boolean(e)&&Boolean(e.range))));this._subs.push(this._contentChange.subscribe((({delta:e,source:t})=>{void 0!==e.ops&&(this._text=null,t===c.Ay.sources.USER?this._pushDelta(e):this._log.debug("skip emit",{source:t,textLength:this.getTextLength(),deltaLength:_.E.calcDiffLength(e),delta:_.E.anonymizeTextAndStringAttrs(e)}),this._setTextLength(this._textLength+_.E.calcDiffLength(e),t))})),this._contentChange.pipe(se.s(1)).subscribe((()=>(0,be.TE)("dedChangeContent"))),Q.h([this._historyChanged.pipe(A.p((({source:e})=>"keyboard"===e))),this._clipboard.clipboardShortcutUsed]).pipe(E.u(void 0)).subscribe(this.shortcutUsed),this._contentChange.pipe(R.T((e=>({type:e.delta.ops.some((e=>!_.E.isRetain(e)))?b.D_.Type.textMaybeWithFormatting:b.D_.Type.onlyFormatting,source:e.source,delta:e.delta})))).subscribe(this._contentUpdatedInternal),d.pipe(R.T((({range:{index:e,length:t},source:i})=>({index:e,length:t,meta:{source:Boolean(i)?i:b.LN.Meta.Source.user,formatting:this.getFormatting(v.vY.create(e,e+t))}}))),S.F(b.LN.eq.equals)).subscribe(this.selection),Q.h(M.R(this.quill.root,"mousedown",{passive:!0}).pipe(E.u(!0)),M.R(document,"mouseup",{passive:!0}).pipe(E.u(!1)),M.R(document,"dragend",{passive:!0}).pipe(E.u(!1)),M.R(document,"click",{passive:!0}).pipe(E.u(!1))).pipe(I.n((0,ge.Sw)(M.R(document,"mousemove",{passive:!0}).pipe(ae.Z(50),A.p((()=>!window.getSelection().isCollapsed)),oe.$(),E.u(!0)),O.of(!1)))).subscribe(this.ongoingSelection),t.changes.subscribe((e=>this._pushChanges(e,Me.dox))),this._changes.pipe(A.p(Ae.isLocalDelta),Z.E("change")).subscribe(t.pushChanges),this.changes.pipe(R.T((()=>this._textLength)),S.F(),le.c(5*ye.mZ)).subscribe((e=>g.Bx.TimeSeries.rootFemetrics.getTimer("text_length").recordTime(e)))),this.viewportRange=this.viewport.pipe(S.F(),re.z(this.scrollPosition),H.B(300),R.T((([{text:e}])=>(0,l.pipe)((0,l.tuple)((0,l.pipe)(de.pi.getNativeCursorByPosition(e.left,e.top,this.viewport.value.text,this.quill.root),ue.map(de.pi.getPositionByNativeCursor(this.quill.root))),(0,l.pipe)(de.pi.getNativeCursorByPosition(e.right,e.bottom,this.viewport.value.text,this.quill.root),ue.map(de.pi.getPositionByNativeCursor(this.quill.root)))),_e.fP(v.vY.create),ue.fold((e=>(this._log.error("Cannot calculate viewportRange",e),v.vY.empty)),l.identity)))),ee.shareReplay({bufferSize:1,refCount:!0}))}}!function(e){class t extends Ke{fakeAttach(){this.attach(document.createElement("div"),document.createElement("div"),O.of(me.Rect.empty))}get mutationObserverPeriod(){return Boolean(MutationObserver._period)?MutationObserver._period:t.defaultMutationObserverPeriod}get container(){return this.quill.root}setContents(e,t=Me.api){super.setContents(e,t)}getCursor(){return this._envSupportsSelection?super.getCursor():b.LN.empty}static create({modules:e,allowedAttrs:i,allowedEmbeds:r,options:n,dox:s}){return new t(e,i,r,n,s?ve.N.Mock(s):void 0)}constructor(e=t.DEFAULT_MODULES,i=_.E.skipAny,n=_.E.skipAny,s={},a=ve.N.Mock()){(0,de.gw)(),super(e,a,i,n,s),(0,r._)(this,"markChangeApplied",void 0),(0,r._)(this,"selectedFormatting",void 0),(0,r._)(this,"_envSupportsSelection",void 0),this.markChangeApplied=this._marker.markChangeApplied,this.selectedFormatting=new Y.B7,this._envSupportsSelection=Boolean(window.getSelection),this._envSupportsSelection||Object.assign(this.quill,{setSelection:(e,t)=>{if(null===e)return;const i="object"==typeof e?e.index:e;(0,pe.V1)(i>=0,"range selection can not accept negative values")}})}}(0,r._)(t,"defaultMutationObserverPeriod",100),(0,r._)(t,"DEFAULT_MODULES",{modules:{history:ke.U,clipboard:(0,Ce.g)(!1,[]),keyboard:xe.TV.getKeyboardWithBindings(xe.TV.Bindings.plainTextBindings),marks:Se.O},formats:[d.A,p.A,h.A,m.A]}),e.Mock=t}(Ke||(Ke={}));var Ne=i(91177)},61098:(e,t,i)=>{i.d(t,{z:()=>r});var r,n=i(23988),s=i(10334),a=i(17171),o=i(50659),l=i(80074),c=i(87574),d=i(60575),m=i(80837),p=i(6987),h=i(54988),u=i(60269),g=i(65141),f=i(15491),_=i(78339),y=i(62822),b=i(95168),v=i(65390),C=i(50581),k=i(59636),x=i(7813),S=i(66202);!function(e){e.getSelectionHOCs=e=>({withNeutralForSelection:t=>function(e,t){return class extends o.Component{componentDidMount(){this._subs.push(this._neutralForSelection(),...this._preventOnMouseMove())}componentWillUnmount(){this._subs.dispose()}render(){return o.createElement(e,(0,a._)((0,s._)({},this.props),{onMount:this._onMount}))}constructor(...e){super(...e),(0,n._)(this,"_el",l.s.create(v.none)),(0,n._)(this,"_subs",new m.y.Keeper),(0,n._)(this,"_onMount",(e=>{this._el.set(v.fromNullable(e)),this.props.onMount&&e&&this.props.onMount(e)})),(0,n._)(this,"_neutralForSelection",(()=>this._el.pipe(p.n(v.fold((()=>h.w),(e=>u.h(g.R(document,"mousedown").pipe(f.T((e=>e.target)),_.p((t=>!(t===e||C.isParent(e,t)))),y.u(!0)),g.R(document,"mouseup").pipe(y.u(!1))).pipe(b.M((t=>{e.style.pointerEvents=t?"none":"auto"}))))))).subscribe())),(0,n._)(this,"_preventOnMouseMove",(()=>{const e=l.s.create(!1);return[t.dontFreezeWhen(e,"prevent-focus"),this._el.pipe(p.n(v.fold((()=>h.w),(e=>u.h(g.R(e,"mousedown").pipe(y.u(!0)),g.R(e,"mouseup").pipe(y.u(!1)))))),b.M((t=>e.set(t)))).subscribe()]}))}}}(t,e),withSelectionEffect:(t,r)=>i.withSelectionEffect(t,e,r)});const t=e=>t=>o.createElement(e,t);let i;e.getPassThrough=()=>({withNeutralForSelection:t,withSelectionEffect:t}),e.Context=o.createContext(k.o.invariantContent("DenaliEditorSelection")),function(e){e.PlainContainer=({children:e,onMouseDown:t,onMount:i,className:r})=>o.createElement(c.F.div,{className:r,onMouseDown:t,mount:i},e),e.withSelectionEffect=function(e,t,i){return class extends o.Component{_onMouseDown(e){x.C.isLeftMouseButtom(e)&&i(t,e)}render(){return o.createElement(e,(0,a._)((0,s._)({},this.props),{onMouseDown:this._onMouseDown}))}}},e.collapse=(e,t)=>{const i=e.getCursor().index;S.getOrElse((e=>d.Bx.Logging.getLogger("Selection").error("Failed to set cursor on selection collapse",e,{index:i})))(e.setCursor(i+e.getCursor().length,0,"silent")),t.stopPropagation()},e.resetAsap=(e,t)=>{setTimeout((()=>{const{index:t,length:i}=e.getCursor();S.getOrElse((e=>d.Bx.Logging.getLogger("Selection").error("Failed to set cursor on selection reset.",e,{index:t,length:i})))(e.setCursor(t,i))}),0),t.stopPropagation()},e.prevent=(e,t)=>{t.stopPropagation()}}(i=e.Effect||(e.Effect={}))}(r||(r={}))},44011:(e,t,i)=>{i.r(t),i.d(t,{annotatorEmptyDocument:()=>l,bulkAcceptDemoText:()=>a,fullSentenceDemoText:()=>n,listTransformDemoText:()=>o,mutedAlertsDemoText:()=>s,premiumDemoDocument:()=>r});const r={title:"Welcome to Grammarly Premium!",text:""},n={title:"",text:"As many people in the Lima region wait with much hopeful anticipation for all of the impact Rhodes State College will have on our downtown area, many others have concerns due to the lack of activity after the demolition of most of the buildings downtown earlier this year.\n\nAs a business man with local interests, I have always tried to be as supportive as it is possible for me to be of our entire community. I can become passionte about all of the positive opportunities that arise. I could also become frustrated with all of the negative comments and roadblocks that stand in the way of the progress of our community.\n\nI feel it is time the public realizes and supports the impact this facility would have on the community and the reason the project has been slowed down.\n\nThe vision of the doctor and board to build a new medical school in the heart of our county and city is a model of community spirit and partnership for the betterment of so many aspects of our region. The 500 to 700 students and faculty that will be in our Town Square on a daily basis will bring foot traffic and youth, talent and opportunity. Many of the young people will fill many job openings and remain in our community for many years to come.\n\nAs a community full of positive thinkers and optimists, let’s not just be passive and ask ourselves five years from now what could we have done! Let us all gather together and demand answers, demand progress and let our voices ring through city hall."},s={title:"",text:"Regarding our vaction policy, a decision was made to give everyone an extra day off. The decision was based on the fact that lots people are extra stressed now and not taking time off. We really hope that this will give everyone a good rest. If you have any comments or questions please send them to us promptly. The feedback has always been appreciated.\nAdditionally, please review the latest changes in our work from home police that have been updated this month. The new page was added to our Wiki. It includes a number of new recommendations on how to stay productive remotely."},a={title:"",text:"Welcome to the Grammarly Editor, the best place to write what’s important.\n\nRed underlines mean that Grammarly has spotted a mistake in your writing. You’ll sea one if you mispell something. (See what we did there?) You’ll also see an underline, if you misuse a punctuation mark.If you’re worry about typos or grammatical errors that could effect your credibility, Grammarly will helps you fix those to. Click any of Grammarly’s suggested corrections to apply them to your text, or open a brief explanation to learn more about error and how to fix it.\n\nBut there’s more to good writing than speling, punctuation and grammar. (Sorry, couldn’t resist.)\n\nBrilliant sentences are clear and concise. Underlines that are blue indicate that Grammarly has spotted a sentence that is unnecessarily wordy. Grammarly scores each text based on how clear it will be to your readers and gives you guidance in order to do a revision of it in an effortless manner. Afterall, there are some sentences that are gramatically correct but still awkward and hard to follow. It goes without saying that sometimes you can actually improve a sentence by completely eliminating words that are basically unnecessary."},o={title:"",text:"The last few day have been full of a lot of thinking about what our goals should be for the development of great new features for our users. While there is a ton we could be doing, there's a few areas where I see us helping our users next year: making sure their message is clear and is able to get through to their readers, helping them sound friendlier and develop stronger and more authentic connections with their coworkers, appearing reputable with correct grammar and proper formatting, and feeling more confident about their writing. I hope you're all as excited by these opportunity as I am. The workmanship in our products will be evident to all of our users.  Send me your thoughts and any additional ideas by October 1st."},l={title:"",text:""}},57014:(e,t,i)=>{i.d(t,{$U:()=>r,T7:()=>c,sM:()=>d,sg:()=>o});var r,n=i(10334),s=i(17171),a=i(24497);!function(e){const t=e=>`@media ${e}`;e.screenXS=t("only screen"),e.screenS=t("only screen and (min-width: 600px)"),e.screenM=t("only screen and (min-width: 800px)"),e.screenL=t("only screen and (min-width: 1270px)"),e.screenXL=t("only screen and (min-width: 1360px)"),e.screenHD=t("only screen and (min-width: 1430px)"),e.threeColumnsMax=t("only screen and (max-width: 1100px)"),e.fourColumnsMax=t("only screen and (max-width: 1250px)"),e.xss=t("(max-width: 700px)"),e.xssUpper=t("(max-width: 780px)"),e.xsLower=t("(max-width: 960px)"),e.xs=t("(max-width: 1024px)"),e.tiny=t("(max-width: 1279px)"),e.small=t("(max-width: 1359px)"),e.normal=t("(min-width: 1360px) and (max-width: 1599px)"),e.big=t("(min-width: 1600px)"),e.bigUpper=t("(min-width: 1920px)"),e.retina=t("(min-device-pixel-ratio: 1.5), (min-resolution: 144dpi)"),e.smallHeight=t("(max-height: 760px)"),e.xssHeight=t("(max-height: 520px)"),e.print=t("print");var i=e.collapsedSidebarQuery="((min-width: 1600px) and (max-height: 750px)), ((min-width: 1360px) and (max-width: 1599px) and (max-height: 680px)), ((max-width: 1359px) and (max-height: 590px))",r=e.compactSidebarQuery="((min-width: 1600px) and (max-height: 900px)), ((min-width: 1360px) and (max-width: 1599px) and (max-height: 800px)), ((max-width: 1359px) and (max-height: 710px))";e.compactSidebar=t(r),e.collapsedSidebar=t(i),e.normalLower=t("(min-width: 1360px) and (max-width: 1471px)"),e.bigHigher=t("(min-width: 1600px) and (max-width: 1647px)"),e.maxWidth=e=>t(`(max-width: ${e}px)`),e.minWidth=e=>t(`(min-width: ${e}px)`),e.maxHeight=e=>t(`(max-height: ${e}px)`),e.minHeight=e=>t(`(min-height: ${e}px)`)}(r||(r={}));const o=()=>({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),l={boxShadow:`0 0 0 1px ${a.White}, 0 0 0 3px ${a.Blue40}`,zIndex:1,outline:"none"},c=(e={})=>({$nest:{"&:focus":(0,n._)({},l,e),"&:focus:not(:focus-visible)":{boxShadow:"none",$unique:!0},"&:focus-visible":(0,s._)((0,n._)({},l,e),{$unique:!0})}}),d={position:"absolute",width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0,0,0,0)",whiteSpace:"nowrap",border:0}},92935:(e,t,i)=>{e.exports=i.p+"files/85c9adfbbe6c323245d2/mutedAlerts.mp4"},76387:(e,t,i)=>{e.exports=i.p+"files/eb5b3b9bc627c8b7bf87/mutedAlerts.png"},28882:e=>{e.exports=JSON.parse('{"Td":"_b7b0ef4d-view-firstTier","m$":"_363949ce-view-firstTierLoader _b7b0ef4d-view-firstTier","EN":"_7897b0b2-view-editor"}')},54730:e=>{e.exports=JSON.parse('{"FG":"_b2c6e27c-synonyms-contentWrapper","P0":"_08c665f9-synonyms-iconWrapper","wG":"_0c3de60c-synonyms-loader","AA":"_94add495-synonyms-synonymsPopupWrapper","iE":"_fbad2f66-synonyms-wrapper","Yu":"_c203692f-synonyms-emptyResultWrapper","PG":"_8adb8bf0-synonyms-activeWord","DD":"_738f37b5-synonyms-title","p_":"_602411e1-synonyms-list","Os":"_4fdf6736-synonyms-group","SZ":"_752acd81-synonyms-groupTitle","nM":"_44351849-synonyms-row","AS":"_2e566ea7-synonyms-item"}')},57791:e=>{e.exports=JSON.parse('{"yJ":"_b57d7ffb-header-fakeToolbarWrapper","Vv":"_83b0cecd-header-fakeToolbarTitle","hl":"_a0de5151-header-fakeToolbarTitleMacEditor","yu":"_00d699e4-header-toolbarBtn","j2":"_11861f7c-header-backIcon"}')},19101:e=>{e.exports=JSON.parse('{"EN":"_b4dbc6b7-denali-editor-editor","UH":"_38e369d9-denali-editor-graySelection"}')}}]);